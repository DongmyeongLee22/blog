<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>코틀린 인 액션 정리 | BLOG</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/blog/img/favicon.svg">
    <meta name="description" content="">
    <meta name="google-site-verification" content="5Yx4T6uI30XHP7CaIBllI-z_pTFiIF9H73JCnPtoqu0">
    
    <link rel="preload" href="/blog/assets/css/0.styles.bbd07f65.css" as="style"><link rel="preload" href="/blog/assets/js/app.a19d2190.js" as="script"><link rel="preload" href="/blog/assets/js/18.5924265b.js" as="script"><link rel="preload" href="/blog/assets/js/2.a1252cbe.js" as="script"><link rel="preload" href="/blog/assets/js/3.d1125fe1.js" as="script"><link rel="preload" href="/blog/assets/js/1.f9d497c3.js" as="script"><link rel="preload" href="/blog/assets/js/41.7722e4ea.js" as="script"><link rel="prefetch" href="/blog/assets/js/10.057c0f2a.js"><link rel="prefetch" href="/blog/assets/js/11.d88c7b6a.js"><link rel="prefetch" href="/blog/assets/js/12.df282630.js"><link rel="prefetch" href="/blog/assets/js/13.faa7d23e.js"><link rel="prefetch" href="/blog/assets/js/14.ad1f3b3b.js"><link rel="prefetch" href="/blog/assets/js/15.965955c1.js"><link rel="prefetch" href="/blog/assets/js/16.90cf628b.js"><link rel="prefetch" href="/blog/assets/js/17.21410106.js"><link rel="prefetch" href="/blog/assets/js/19.dd17d056.js"><link rel="prefetch" href="/blog/assets/js/20.9a9e5b00.js"><link rel="prefetch" href="/blog/assets/js/21.a72710f0.js"><link rel="prefetch" href="/blog/assets/js/22.9b11e254.js"><link rel="prefetch" href="/blog/assets/js/23.fbcb42c4.js"><link rel="prefetch" href="/blog/assets/js/24.7e6b1f64.js"><link rel="prefetch" href="/blog/assets/js/25.7109e96f.js"><link rel="prefetch" href="/blog/assets/js/26.aea8ab92.js"><link rel="prefetch" href="/blog/assets/js/27.a087a1b3.js"><link rel="prefetch" href="/blog/assets/js/28.d73a3406.js"><link rel="prefetch" href="/blog/assets/js/29.948550fc.js"><link rel="prefetch" href="/blog/assets/js/30.a43453d1.js"><link rel="prefetch" href="/blog/assets/js/31.d2c5aec5.js"><link rel="prefetch" href="/blog/assets/js/32.20c1bf78.js"><link rel="prefetch" href="/blog/assets/js/33.ef11007c.js"><link rel="prefetch" href="/blog/assets/js/34.294877bf.js"><link rel="prefetch" href="/blog/assets/js/35.652a4676.js"><link rel="prefetch" href="/blog/assets/js/36.ddc31151.js"><link rel="prefetch" href="/blog/assets/js/37.de39a904.js"><link rel="prefetch" href="/blog/assets/js/38.f6ee8ed6.js"><link rel="prefetch" href="/blog/assets/js/39.7e90e0b8.js"><link rel="prefetch" href="/blog/assets/js/4.77cc8067.js"><link rel="prefetch" href="/blog/assets/js/40.eb444157.js"><link rel="prefetch" href="/blog/assets/js/42.7d7fed8f.js"><link rel="prefetch" href="/blog/assets/js/43.a1b40f16.js"><link rel="prefetch" href="/blog/assets/js/44.b3c2d634.js"><link rel="prefetch" href="/blog/assets/js/45.b20d6809.js"><link rel="prefetch" href="/blog/assets/js/46.66081734.js"><link rel="prefetch" href="/blog/assets/js/47.6341569d.js"><link rel="prefetch" href="/blog/assets/js/48.9f4a322f.js"><link rel="prefetch" href="/blog/assets/js/49.5d8525ba.js"><link rel="prefetch" href="/blog/assets/js/50.12c17036.js"><link rel="prefetch" href="/blog/assets/js/51.5fafbb36.js"><link rel="prefetch" href="/blog/assets/js/52.781a3592.js"><link rel="prefetch" href="/blog/assets/js/53.57fd4c53.js"><link rel="prefetch" href="/blog/assets/js/54.953e4346.js"><link rel="prefetch" href="/blog/assets/js/55.241986f1.js"><link rel="prefetch" href="/blog/assets/js/56.e39bf643.js"><link rel="prefetch" href="/blog/assets/js/6.b2f08631.js"><link rel="prefetch" href="/blog/assets/js/7.c4919be5.js"><link rel="prefetch" href="/blog/assets/js/8.07eb69fe.js"><link rel="prefetch" href="/blog/assets/js/9.97c02b7f.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.bbd07f65.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container" data-v-fa8c0460><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><img src="/blog/img/logo.png" alt="BLOG" class="logo"> <span class="site-name can-hide">BLOG</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Cassandra</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/Cassandra/Cassandra_Consistency_Level.html" class="sidebar-link">카산드라 Consistency Level</a></li><li><a href="/blog/Cassandra/Cassandra_Eventual_And_Strong_Consistency.html" class="sidebar-link">카산드라 Eventual consistency vs Strong consistency</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>ComputerScience</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/ComputerScience/CharacterEncoding.html" class="sidebar-link">문자열 인코딩</a></li><li><a href="/blog/ComputerScience/CreationalDesignPattern.html" class="sidebar-link">디자인 패턴(생성 패턴)</a></li><li><a href="/blog/ComputerScience/DesigningDataIntensiveApplication.html" class="sidebar-link">데이터 중심 애플리케이션 설계(Part 1. 데이터 시스템의 기초)</a></li><li><a href="/blog/ComputerScience/StructuralDesignPattern.html" class="sidebar-link">디자인 패턴(구조 패턴)</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Groovy</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/Groovy/spock-summary.html" class="sidebar-link">Spock 사용 시 주의해야 할 것들</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Java</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/Java/EffectiveJava.html" class="sidebar-link">Effective Java 3/E 정리</a></li><li><a href="/blog/Java/UseThreadLocalWhenAsyncCall.html" class="sidebar-link">비동기 호출 시 ThreadLocal 값 유지하기</a></li><li><a href="/blog/Java/awsEc2InstallJDK11.html" class="sidebar-link">AWS EC2에 JDK 11 설치하기</a></li><li><a href="/blog/Java/javaCodingSkill.html" class="sidebar-link">자바 코딩의 기술 정리</a></li><li><a href="/blog/Java/javaOverloadingParameter.html" class="sidebar-link">JAVA 매개변수(Parameter)수가 같은 오버로딩 메서드가 위험한 이유</a></li><li><a href="/blog/Java/resilience4j.html" class="sidebar-link">resilience4j Circuit Breaker</a></li><li><a href="/blog/Java/threadPoolExecutor.html" class="sidebar-link">Java의 ThreadPoolExecutor, Spring의 ThreadPoolTaskExecutor</a></li><li><a href="/blog/Java/whyCantCreateGenericsArray.html" class="sidebar-link">JAVA 제네릭 배열을 생성하지 못하는 이유</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Kotlin</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/Kotlin/kotlinInAction.html" aria-current="page" class="active sidebar-link">코틀린 인 액션 정리</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/Kotlin/kotlinInAction.html#_1장-코틀린이란-무엇이며-왜-필요한가" class="sidebar-link">1장 코틀린이란 무엇이며, 왜 필요한가?</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/Kotlin/kotlinInAction.html#정적-타입-언어의-장점" class="sidebar-link">정적 타입 언어의 장점</a></li><li class="sidebar-sub-header"><a href="/blog/Kotlin/kotlinInAction.html#코틀린의-철학" class="sidebar-link">코틀린의 철학</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog/Kotlin/kotlinInAction.html#_2장-코틀린-기초" class="sidebar-link">2장 코틀린 기초</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/Kotlin/kotlinInAction.html#함수와-변수" class="sidebar-link">함수와 변수</a></li><li class="sidebar-sub-header"><a href="/blog/Kotlin/kotlinInAction.html#문자열-템플릿" class="sidebar-link">문자열 템플릿</a></li><li class="sidebar-sub-header"><a href="/blog/Kotlin/kotlinInAction.html#클래스" class="sidebar-link">클래스</a></li><li class="sidebar-sub-header"><a href="/blog/Kotlin/kotlinInAction.html#커스텀-접근자" class="sidebar-link">커스텀 접근자</a></li><li class="sidebar-sub-header"><a href="/blog/Kotlin/kotlinInAction.html#enum과-when" class="sidebar-link">enum과 when</a></li><li class="sidebar-sub-header"><a href="/blog/Kotlin/kotlinInAction.html#스마트-캐스팅" class="sidebar-link">스마트 캐스팅</a></li><li class="sidebar-sub-header"><a href="/blog/Kotlin/kotlinInAction.html#expression-when-if" class="sidebar-link">expression when, if</a></li><li class="sidebar-sub-header"><a href="/blog/Kotlin/kotlinInAction.html#이터레이션" class="sidebar-link">이터레이션</a></li><li class="sidebar-sub-header"><a href="/blog/Kotlin/kotlinInAction.html#in으로-범위-검사" class="sidebar-link">in으로 범위 검사</a></li><li class="sidebar-sub-header"><a href="/blog/Kotlin/kotlinInAction.html#예외" class="sidebar-link">예외</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog/Kotlin/kotlinInAction.html#_3장-함수-정의와-호출" class="sidebar-link">3장 함수 정의와 호출</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/Kotlin/kotlinInAction.html#default-and-named-argument" class="sidebar-link">Default and Named Argument</a></li><li class="sidebar-sub-header"><a href="/blog/Kotlin/kotlinInAction.html#최상위-함수와-최상위-프로퍼티" class="sidebar-link">최상위 함수와 최상위 프로퍼티</a></li><li class="sidebar-sub-header"><a href="/blog/Kotlin/kotlinInAction.html#확장-함수" class="sidebar-link">확장 함수</a></li><li class="sidebar-sub-header"><a href="/blog/Kotlin/kotlinInAction.html#확장-프로퍼티" class="sidebar-link">확장 프로퍼티</a></li><li class="sidebar-sub-header"><a href="/blog/Kotlin/kotlinInAction.html#가변-인자-함수" class="sidebar-link">가변 인자 함수</a></li><li class="sidebar-sub-header"><a href="/blog/Kotlin/kotlinInAction.html#중위-함수" class="sidebar-link">중위 함수</a></li><li class="sidebar-sub-header"><a href="/blog/Kotlin/kotlinInAction.html#구조-분해" class="sidebar-link">구조 분해</a></li><li class="sidebar-sub-header"><a href="/blog/Kotlin/kotlinInAction.html#문자열-및-정규식-다루기" class="sidebar-link">문자열 및 정규식 다루기</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog/Kotlin/kotlinInAction.html#_4장-클래스-객체-인터페이스" class="sidebar-link">4장. 클래스, 객체, 인터페이스</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/Kotlin/kotlinInAction.html#인터페이스와-클래스" class="sidebar-link">인터페이스와 클래스</a></li><li class="sidebar-sub-header"><a href="/blog/Kotlin/kotlinInAction.html#가시성-변경자" class="sidebar-link">가시성 변경자</a></li><li class="sidebar-sub-header"><a href="/blog/Kotlin/kotlinInAction.html#내부-클래스와-중첩-클래스" class="sidebar-link">내부 클래스와 중첩 클래스</a></li><li class="sidebar-sub-header"><a href="/blog/Kotlin/kotlinInAction.html#코틀린의-생성자" class="sidebar-link">코틀린의 생성자</a></li><li class="sidebar-sub-header"><a href="/blog/Kotlin/kotlinInAction.html#인터페이스-프로퍼티와-backing-field" class="sidebar-link">인터페이스 프로퍼티와 Backing Field</a></li><li class="sidebar-sub-header"><a href="/blog/Kotlin/kotlinInAction.html#data-class" class="sidebar-link">data class</a></li><li class="sidebar-sub-header"><a href="/blog/Kotlin/kotlinInAction.html#클래스-위임-by" class="sidebar-link">클래스 위임: by</a></li><li class="sidebar-sub-header"><a href="/blog/Kotlin/kotlinInAction.html#object-키워드-클래스-선언과-동시에-인스턴스-생성-싱글톤-보장" class="sidebar-link">object 키워드: 클래스 선언과 동시에 인스턴스 생성(싱글톤 보장)</a></li><li class="sidebar-sub-header"><a href="/blog/Kotlin/kotlinInAction.html#동반-객체" class="sidebar-link">동반 객체</a></li><li class="sidebar-sub-header"><a href="/blog/Kotlin/kotlinInAction.html#객체-식-익명-내부-클래스" class="sidebar-link">객체 식: 익명 내부 클래스</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog/Kotlin/kotlinInAction.html#_5장-람다로-프로그래밍" class="sidebar-link">5장. 람다로 프로그래밍</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/Kotlin/kotlinInAction.html#람다와-컬렉션" class="sidebar-link">람다와 컬렉션</a></li><li class="sidebar-sub-header"><a href="/blog/Kotlin/kotlinInAction.html#컬렉션-함수형-api" class="sidebar-link">컬렉션 함수형 API</a></li><li class="sidebar-sub-header"><a href="/blog/Kotlin/kotlinInAction.html#지연-계산을-위한-시퀀스" class="sidebar-link">지연 계산을 위한 시퀀스</a></li><li class="sidebar-sub-header"><a href="/blog/Kotlin/kotlinInAction.html#람다-vs-익명-클래스" class="sidebar-link">람다 vs 익명 클래스</a></li><li class="sidebar-sub-header"><a href="/blog/Kotlin/kotlinInAction.html#sam-생성자-람다를-함수형-인터페이스로-명시적-변경" class="sidebar-link">SAM 생성자: 람다를 함수형 인터페이스로 명시적 변경</a></li><li class="sidebar-sub-header"><a href="/blog/Kotlin/kotlinInAction.html#수신-객체-지정-람다-with-apply" class="sidebar-link">수신 객체 지정 람다: with, apply</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog/Kotlin/kotlinInAction.html#_6장-코틀린-타입-시스템" class="sidebar-link">6장. 코틀린 타입 시스템</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/Kotlin/kotlinInAction.html#nullability" class="sidebar-link">Nullability</a></li><li class="sidebar-sub-header"><a href="/blog/Kotlin/kotlinInAction.html#앨비스-연산자" class="sidebar-link">앨비스 연산자 ?:</a></li><li class="sidebar-sub-header"><a href="/blog/Kotlin/kotlinInAction.html#안전한-캐스팅-as" class="sidebar-link">안전한 캐스팅 as?</a></li><li class="sidebar-sub-header"><a href="/blog/Kotlin/kotlinInAction.html#null-아님-단언" class="sidebar-link">null 아님 단언: !!</a></li><li class="sidebar-sub-header"><a href="/blog/Kotlin/kotlinInAction.html#let-함수" class="sidebar-link">let 함수</a></li><li class="sidebar-sub-header"><a href="/blog/Kotlin/kotlinInAction.html#null-불가능-타입의-지연-초기화" class="sidebar-link">null 불가능 타입의 지연 초기화</a></li><li class="sidebar-sub-header"><a href="/blog/Kotlin/kotlinInAction.html#타입-파라미터와-nullable" class="sidebar-link">타입 파라미터와 nullable</a></li><li class="sidebar-sub-header"><a href="/blog/Kotlin/kotlinInAction.html#플랫폼-타입" class="sidebar-link">플랫폼 타입</a></li><li class="sidebar-sub-header"><a href="/blog/Kotlin/kotlinInAction.html#코틀린의-원시타입" class="sidebar-link">코틀린의 원시타입</a></li><li class="sidebar-sub-header"><a href="/blog/Kotlin/kotlinInAction.html#any-any-최상위-타입" class="sidebar-link">Any, Any?: 최상위 타입</a></li><li class="sidebar-sub-header"><a href="/blog/Kotlin/kotlinInAction.html#unit" class="sidebar-link">Unit</a></li><li class="sidebar-sub-header"><a href="/blog/Kotlin/kotlinInAction.html#nothing" class="sidebar-link">Nothing</a></li><li class="sidebar-sub-header"><a href="/blog/Kotlin/kotlinInAction.html#코틀린과-자바-컬렉션" class="sidebar-link">코틀린과 자바 컬렉션</a></li><li class="sidebar-sub-header"><a href="/blog/Kotlin/kotlinInAction.html#배열" class="sidebar-link">배열</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog/Kotlin/kotlinInAction.html#_7장-연산자-오버로딩과-기타-관례" class="sidebar-link">7장. 연산자 오버로딩과 기타 관례</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/Kotlin/kotlinInAction.html#산술-연산자-오버로딩" class="sidebar-link">산술 연산자 오버로딩</a></li><li class="sidebar-sub-header"><a href="/blog/Kotlin/kotlinInAction.html#복합-대입-연산자-오버로딩" class="sidebar-link">복합 대입 연산자 오버로딩</a></li><li class="sidebar-sub-header"><a href="/blog/Kotlin/kotlinInAction.html#단항-연산자-오버로딩" class="sidebar-link">단항 연산자 오버로딩</a></li><li class="sidebar-sub-header"><a href="/blog/Kotlin/kotlinInAction.html#비교-연산자-오버로딩" class="sidebar-link">비교 연산자 오버로딩</a></li><li class="sidebar-sub-header"><a href="/blog/Kotlin/kotlinInAction.html#get-set-관례" class="sidebar-link">get, set 관례</a></li><li class="sidebar-sub-header"><a href="/blog/Kotlin/kotlinInAction.html#in-관례" class="sidebar-link">in 관례</a></li><li class="sidebar-sub-header"><a href="/blog/Kotlin/kotlinInAction.html#rangeto-관례" class="sidebar-link">rangeTo 관례</a></li><li class="sidebar-sub-header"><a href="/blog/Kotlin/kotlinInAction.html#for-루프-iterator-관례" class="sidebar-link">for 루프 iterator 관례</a></li><li class="sidebar-sub-header"><a href="/blog/Kotlin/kotlinInAction.html#구조-분해-관례" class="sidebar-link">구조 분해 관례</a></li><li class="sidebar-sub-header"><a href="/blog/Kotlin/kotlinInAction.html#위임-프로퍼티" class="sidebar-link">위임 프로퍼티</a></li><li class="sidebar-sub-header"><a href="/blog/Kotlin/kotlinInAction.html#위임-프로퍼티-구현해보기" class="sidebar-link">위임 프로퍼티 구현해보기</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog/Kotlin/kotlinInAction.html#_8장-고차-함수" class="sidebar-link">8장. 고차 함수</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/Kotlin/kotlinInAction.html#고차-함수-정의" class="sidebar-link">고차 함수 정의</a></li><li class="sidebar-sub-header"><a href="/blog/Kotlin/kotlinInAction.html#함수-타입" class="sidebar-link">함수 타입</a></li><li class="sidebar-sub-header"><a href="/blog/Kotlin/kotlinInAction.html#자바에서-코틀린-함수-타입" class="sidebar-link">자바에서 코틀린 함수 타입</a></li><li class="sidebar-sub-header"><a href="/blog/Kotlin/kotlinInAction.html#안전한-nullable-function-호출" class="sidebar-link">안전한 nullable function 호출</a></li><li class="sidebar-sub-header"><a href="/blog/Kotlin/kotlinInAction.html#함수를-반환하는-함수-만들기" class="sidebar-link">함수를 반환하는 함수 만들기</a></li><li class="sidebar-sub-header"><a href="/blog/Kotlin/kotlinInAction.html#인라인-함수-람다의-부가-비용-없애기" class="sidebar-link">인라인 함수: 람다의 부가 비용 없애기</a></li><li class="sidebar-sub-header"><a href="/blog/Kotlin/kotlinInAction.html#인라이닝이-작동하는-방식" class="sidebar-link">인라이닝이 작동하는 방식</a></li><li class="sidebar-sub-header"><a href="/blog/Kotlin/kotlinInAction.html#인라인-함수의-한계" class="sidebar-link">인라인 함수의 한계</a></li><li class="sidebar-sub-header"><a href="/blog/Kotlin/kotlinInAction.html#컬렉션-연산-인라이닝" class="sidebar-link">컬렉션 연산 인라이닝</a></li><li class="sidebar-sub-header"><a href="/blog/Kotlin/kotlinInAction.html#시퀀스와-인라이닝" class="sidebar-link">시퀀스와 인라이닝</a></li><li class="sidebar-sub-header"><a href="/blog/Kotlin/kotlinInAction.html#함수를-인라인으로-선언해야-할-때" class="sidebar-link">함수를 인라인으로 선언해야 할 때</a></li><li class="sidebar-sub-header"><a href="/blog/Kotlin/kotlinInAction.html#함수를-인라인으로-선언하지-말아야-할-때" class="sidebar-link">함수를 인라인으로 선언하지 말아야 할 때</a></li><li class="sidebar-sub-header"><a href="/blog/Kotlin/kotlinInAction.html#인라인-함수를-사용할-때-주의할-점" class="sidebar-link">인라인 함수를 사용할 때 주의할 점</a></li><li class="sidebar-sub-header"><a href="/blog/Kotlin/kotlinInAction.html#인라인-함수-활용-예" class="sidebar-link">인라인 함수 활용 예</a></li><li class="sidebar-sub-header"><a href="/blog/Kotlin/kotlinInAction.html#인라인-함수의-non-local-return" class="sidebar-link">인라인 함수의 non-local return</a></li><li class="sidebar-sub-header"><a href="/blog/Kotlin/kotlinInAction.html#레이블을-활용한-로컬-return" class="sidebar-link">레이블을 활용한 로컬 return</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog/Kotlin/kotlinInAction.html#_9장-제네릭스" class="sidebar-link">9장. 제네릭스</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/Kotlin/kotlinInAction.html#제네릭-타입-파라미터" class="sidebar-link">제네릭 타입 파라미터</a></li><li class="sidebar-sub-header"><a href="/blog/Kotlin/kotlinInAction.html#런타임의-제네릭-타임-검사와-캐스트" class="sidebar-link">런타임의 제네릭: 타임 검사와 캐스트</a></li><li class="sidebar-sub-header"><a href="/blog/Kotlin/kotlinInAction.html#실체화한-타입으로-클래스-참조를-대신하기" class="sidebar-link">실체화한 타입으로 클래스 참조를 대신하기</a></li><li class="sidebar-sub-header"><a href="/blog/Kotlin/kotlinInAction.html#변성-variance-제네릭과-하위-타입" class="sidebar-link">변성(variance): 제네릭과 하위 타입</a></li><li class="sidebar-sub-header"><a href="/blog/Kotlin/kotlinInAction.html#변성이-있는-이유-인자를-함수에-넘기기" class="sidebar-link">변성이 있는 이유: 인자를 함수에 넘기기</a></li><li class="sidebar-sub-header"><a href="/blog/Kotlin/kotlinInAction.html#공변성-하위-타입-관계를-유지" class="sidebar-link">공변성: 하위 타입 관계를 유지</a></li><li class="sidebar-sub-header"><a href="/blog/Kotlin/kotlinInAction.html#반공변성-뒤집힌-하위-타입-관계" class="sidebar-link">반공변성: 뒤집힌 하위 타입 관계</a></li><li class="sidebar-sub-header"><a href="/blog/Kotlin/kotlinInAction.html#사용-지점-변성-타입이-언급되는-지점에서-변성-지정" class="sidebar-link">사용 지점 변성: 타입이 언급되는 지점에서 변성 지정</a></li><li class="sidebar-sub-header"><a href="/blog/Kotlin/kotlinInAction.html#스타-프로젝션-타입-대신" class="sidebar-link">스타 프로젝션: 타입 대신 *</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog/Kotlin/kotlinInAction.html#_10장-애노테이션과-리플렉션" class="sidebar-link">10장. 애노테이션과 리플렉션</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/Kotlin/kotlinInAction.html#애노테이션-선언과-적용" class="sidebar-link">애노테이션 선언과 적용</a></li><li class="sidebar-sub-header"><a href="/blog/Kotlin/kotlinInAction.html#자바-api를-애노테이션으로-제어" class="sidebar-link">자바 API를 애노테이션으로 제어</a></li><li class="sidebar-sub-header"><a href="/blog/Kotlin/kotlinInAction.html#리플렉션" class="sidebar-link">리플렉션</a></li><li class="sidebar-sub-header"><a href="/blog/Kotlin/kotlinInAction.html#코틀린-리플렉션-api-kclass-kcallable-kfunction-kproperty" class="sidebar-link">코틀린 리플렉션 API: KClass, KCallable, KFunction, KProperty</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog/Kotlin/kotlinInAction.html#_11장-dsl-만들기" class="sidebar-link">11장. DSL 만들기</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/Kotlin/kotlinInAction.html#api에서-dsl로" class="sidebar-link">API에서 DSL로</a></li><li class="sidebar-sub-header"><a href="/blog/Kotlin/kotlinInAction.html#domain-specific-language" class="sidebar-link">Domain-Specific Language</a></li><li class="sidebar-sub-header"><a href="/blog/Kotlin/kotlinInAction.html#내부-dsl" class="sidebar-link">내부 DSL</a></li><li class="sidebar-sub-header"><a href="/blog/Kotlin/kotlinInAction.html#dsl의-구조" class="sidebar-link">DSL의 구조</a></li><li class="sidebar-sub-header"><a href="/blog/Kotlin/kotlinInAction.html#구조화된-api-구축으로-dsl-만들기" class="sidebar-link">구조화된 API 구축으로 DSL 만들기</a></li><li class="sidebar-sub-header"><a href="/blog/Kotlin/kotlinInAction.html#kotlinx-사용해보기" class="sidebar-link">kotlinx 사용해보기</a></li><li class="sidebar-sub-header"><a href="/blog/Kotlin/kotlinInAction.html#invoke-관례" class="sidebar-link">invoke 관례</a></li><li class="sidebar-sub-header"><a href="/blog/Kotlin/kotlinInAction.html#중위-함수-활용" class="sidebar-link">중위 함수 활용</a></li><li class="sidebar-sub-header"><a href="/blog/Kotlin/kotlinInAction.html#원시-타입에-확장-프로퍼티를-활용하여-날짜-처리를-간단히" class="sidebar-link">원시 타입에 확장 프로퍼티를 활용하여 날짜 처리를 간단히</a></li><li class="sidebar-sub-header"><a href="/blog/Kotlin/kotlinInAction.html#sql-dsl-만들기" class="sidebar-link">SQL DSL 만들기</a></li></ul></li></ul></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Network</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/Network/HttpNetworkBasic.html" class="sidebar-link">그림으로 배우는 Http Network Basic 정리</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Spring</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/Spring/DI_IOC.html" class="sidebar-link">Java, Spring 의존성 주입(DI), 제어의 역전(IoC)</a></li><li><a href="/blog/Spring/MockMvc_Encoding.html" class="sidebar-link">MockMvc 한글 깨짐 현상</a></li><li><a href="/blog/Spring/Scheduler.html" class="sidebar-link">스프링 TaskScheduler(@EnableScheduling, @Scheduled)</a></li><li><a href="/blog/Spring/SpringBoot_Custom_Config_Properties.html" class="sidebar-link">SpringBoot Type-Safe하게 Property 설정하기</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Vue</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/Vue/N1VuePressCh1.html" class="sidebar-link">VuePress로 블로그 제작 1 시작하기</a></li><li><a href="/blog/Vue/N2VuePressCh2.html" class="sidebar-link">VuePress로 블로그 제작 2 배포하기</a></li><li><a href="/blog/Vue/vuexModuleAutoRegister.html" class="sidebar-link">Vuex 모듈 등록 자동화하기</a></li></ul></section></li></ul> </aside> <aside class="rightbar" data-v-40a14b8c><div class="pr-2" data-v-c620ccac data-v-40a14b8c><div class="header" data-v-c620ccac><a href="/blog/Kotlin/kotlinInAction.html#_1장-코틀린이란-무엇이며-왜-필요한가" class="rightbar-link" data-v-c620ccac>
      1장 코틀린이란 무엇이며, 왜 필요한가?
    </a> <div data-v-c620ccac data-v-c620ccac><div class="header" data-v-c620ccac><a href="/blog/Kotlin/kotlinInAction.html#정적-타입-언어의-장점" class="rightbar-link" data-v-c620ccac>
      정적 타입 언어의 장점
    </a> <div data-v-c620ccac data-v-c620ccac></div></div><div class="header" data-v-c620ccac><a href="/blog/Kotlin/kotlinInAction.html#코틀린의-철학" class="rightbar-link" data-v-c620ccac>
      코틀린의 철학
    </a> <div data-v-c620ccac data-v-c620ccac></div></div></div></div><div class="header" data-v-c620ccac><a href="/blog/Kotlin/kotlinInAction.html#_2장-코틀린-기초" class="rightbar-link" data-v-c620ccac>
      2장 코틀린 기초
    </a> <div data-v-c620ccac data-v-c620ccac><div class="header" data-v-c620ccac><a href="/blog/Kotlin/kotlinInAction.html#함수와-변수" class="rightbar-link" data-v-c620ccac>
      함수와 변수
    </a> <div data-v-c620ccac data-v-c620ccac></div></div><div class="header" data-v-c620ccac><a href="/blog/Kotlin/kotlinInAction.html#문자열-템플릿" class="rightbar-link" data-v-c620ccac>
      문자열 템플릿
    </a> <div data-v-c620ccac data-v-c620ccac></div></div><div class="header" data-v-c620ccac><a href="/blog/Kotlin/kotlinInAction.html#클래스" class="rightbar-link" data-v-c620ccac>
      클래스
    </a> <div data-v-c620ccac data-v-c620ccac></div></div><div class="header" data-v-c620ccac><a href="/blog/Kotlin/kotlinInAction.html#커스텀-접근자" class="rightbar-link" data-v-c620ccac>
      커스텀 접근자
    </a> <div data-v-c620ccac data-v-c620ccac></div></div><div class="header" data-v-c620ccac><a href="/blog/Kotlin/kotlinInAction.html#enum과-when" class="rightbar-link" data-v-c620ccac>
      enum과 when
    </a> <div data-v-c620ccac data-v-c620ccac></div></div><div class="header" data-v-c620ccac><a href="/blog/Kotlin/kotlinInAction.html#스마트-캐스팅" class="rightbar-link" data-v-c620ccac>
      스마트 캐스팅
    </a> <div data-v-c620ccac data-v-c620ccac></div></div><div class="header" data-v-c620ccac><a href="/blog/Kotlin/kotlinInAction.html#expression-when-if" class="rightbar-link" data-v-c620ccac>
      expression when, if
    </a> <div data-v-c620ccac data-v-c620ccac></div></div><div class="header" data-v-c620ccac><a href="/blog/Kotlin/kotlinInAction.html#이터레이션" class="rightbar-link" data-v-c620ccac>
      이터레이션
    </a> <div data-v-c620ccac data-v-c620ccac></div></div><div class="header" data-v-c620ccac><a href="/blog/Kotlin/kotlinInAction.html#in으로-범위-검사" class="rightbar-link" data-v-c620ccac>
      in으로 범위 검사
    </a> <div data-v-c620ccac data-v-c620ccac></div></div><div class="header" data-v-c620ccac><a href="/blog/Kotlin/kotlinInAction.html#예외" class="rightbar-link" data-v-c620ccac>
      예외
    </a> <div data-v-c620ccac data-v-c620ccac></div></div></div></div><div class="header" data-v-c620ccac><a href="/blog/Kotlin/kotlinInAction.html#_3장-함수-정의와-호출" class="rightbar-link" data-v-c620ccac>
      3장 함수 정의와 호출
    </a> <div data-v-c620ccac data-v-c620ccac><div class="header" data-v-c620ccac><a href="/blog/Kotlin/kotlinInAction.html#default-and-named-argument" class="rightbar-link" data-v-c620ccac>
      Default and Named Argument
    </a> <div data-v-c620ccac data-v-c620ccac></div></div><div class="header" data-v-c620ccac><a href="/blog/Kotlin/kotlinInAction.html#최상위-함수와-최상위-프로퍼티" class="rightbar-link" data-v-c620ccac>
      최상위 함수와 최상위 프로퍼티
    </a> <div data-v-c620ccac data-v-c620ccac></div></div><div class="header" data-v-c620ccac><a href="/blog/Kotlin/kotlinInAction.html#확장-함수" class="rightbar-link" data-v-c620ccac>
      확장 함수
    </a> <div data-v-c620ccac data-v-c620ccac></div></div><div class="header" data-v-c620ccac><a href="/blog/Kotlin/kotlinInAction.html#확장-프로퍼티" class="rightbar-link" data-v-c620ccac>
      확장 프로퍼티
    </a> <div data-v-c620ccac data-v-c620ccac></div></div><div class="header" data-v-c620ccac><a href="/blog/Kotlin/kotlinInAction.html#가변-인자-함수" class="rightbar-link" data-v-c620ccac>
      가변 인자 함수
    </a> <div data-v-c620ccac data-v-c620ccac></div></div><div class="header" data-v-c620ccac><a href="/blog/Kotlin/kotlinInAction.html#중위-함수" class="rightbar-link" data-v-c620ccac>
      중위 함수
    </a> <div data-v-c620ccac data-v-c620ccac></div></div><div class="header" data-v-c620ccac><a href="/blog/Kotlin/kotlinInAction.html#구조-분해" class="rightbar-link" data-v-c620ccac>
      구조 분해
    </a> <div data-v-c620ccac data-v-c620ccac></div></div><div class="header" data-v-c620ccac><a href="/blog/Kotlin/kotlinInAction.html#문자열-및-정규식-다루기" class="rightbar-link" data-v-c620ccac>
      문자열 및 정규식 다루기
    </a> <div data-v-c620ccac data-v-c620ccac></div></div></div></div><div class="header" data-v-c620ccac><a href="/blog/Kotlin/kotlinInAction.html#_4장-클래스-객체-인터페이스" class="rightbar-link" data-v-c620ccac>
      4장. 클래스, 객체, 인터페이스
    </a> <div data-v-c620ccac data-v-c620ccac><div class="header" data-v-c620ccac><a href="/blog/Kotlin/kotlinInAction.html#인터페이스와-클래스" class="rightbar-link" data-v-c620ccac>
      인터페이스와 클래스
    </a> <div data-v-c620ccac data-v-c620ccac></div></div><div class="header" data-v-c620ccac><a href="/blog/Kotlin/kotlinInAction.html#가시성-변경자" class="rightbar-link" data-v-c620ccac>
      가시성 변경자
    </a> <div data-v-c620ccac data-v-c620ccac></div></div><div class="header" data-v-c620ccac><a href="/blog/Kotlin/kotlinInAction.html#내부-클래스와-중첩-클래스" class="rightbar-link" data-v-c620ccac>
      내부 클래스와 중첩 클래스
    </a> <div data-v-c620ccac data-v-c620ccac></div></div><div class="header" data-v-c620ccac><a href="/blog/Kotlin/kotlinInAction.html#코틀린의-생성자" class="rightbar-link" data-v-c620ccac>
      코틀린의 생성자
    </a> <div data-v-c620ccac data-v-c620ccac></div></div><div class="header" data-v-c620ccac><a href="/blog/Kotlin/kotlinInAction.html#인터페이스-프로퍼티와-backing-field" class="rightbar-link" data-v-c620ccac>
      인터페이스 프로퍼티와 Backing Field
    </a> <div data-v-c620ccac data-v-c620ccac></div></div><div class="header" data-v-c620ccac><a href="/blog/Kotlin/kotlinInAction.html#data-class" class="rightbar-link" data-v-c620ccac>
      data class
    </a> <div data-v-c620ccac data-v-c620ccac></div></div><div class="header" data-v-c620ccac><a href="/blog/Kotlin/kotlinInAction.html#클래스-위임-by" class="rightbar-link" data-v-c620ccac>
      클래스 위임: by
    </a> <div data-v-c620ccac data-v-c620ccac></div></div><div class="header" data-v-c620ccac><a href="/blog/Kotlin/kotlinInAction.html#object-키워드-클래스-선언과-동시에-인스턴스-생성-싱글톤-보장" class="rightbar-link" data-v-c620ccac>
      object 키워드: 클래스 선언과 동시에 인스턴스 생성(싱글톤 보장)
    </a> <div data-v-c620ccac data-v-c620ccac></div></div><div class="header" data-v-c620ccac><a href="/blog/Kotlin/kotlinInAction.html#동반-객체" class="rightbar-link" data-v-c620ccac>
      동반 객체
    </a> <div data-v-c620ccac data-v-c620ccac></div></div><div class="header" data-v-c620ccac><a href="/blog/Kotlin/kotlinInAction.html#객체-식-익명-내부-클래스" class="rightbar-link" data-v-c620ccac>
      객체 식: 익명 내부 클래스
    </a> <div data-v-c620ccac data-v-c620ccac></div></div></div></div><div class="header" data-v-c620ccac><a href="/blog/Kotlin/kotlinInAction.html#_5장-람다로-프로그래밍" class="rightbar-link" data-v-c620ccac>
      5장. 람다로 프로그래밍
    </a> <div data-v-c620ccac data-v-c620ccac><div class="header" data-v-c620ccac><a href="/blog/Kotlin/kotlinInAction.html#람다와-컬렉션" class="rightbar-link" data-v-c620ccac>
      람다와 컬렉션
    </a> <div data-v-c620ccac data-v-c620ccac></div></div><div class="header" data-v-c620ccac><a href="/blog/Kotlin/kotlinInAction.html#컬렉션-함수형-api" class="rightbar-link" data-v-c620ccac>
      컬렉션 함수형 API
    </a> <div data-v-c620ccac data-v-c620ccac></div></div><div class="header" data-v-c620ccac><a href="/blog/Kotlin/kotlinInAction.html#지연-계산을-위한-시퀀스" class="rightbar-link" data-v-c620ccac>
      지연 계산을 위한 시퀀스
    </a> <div data-v-c620ccac data-v-c620ccac></div></div><div class="header" data-v-c620ccac><a href="/blog/Kotlin/kotlinInAction.html#람다-vs-익명-클래스" class="rightbar-link" data-v-c620ccac>
      람다 vs 익명 클래스
    </a> <div data-v-c620ccac data-v-c620ccac></div></div><div class="header" data-v-c620ccac><a href="/blog/Kotlin/kotlinInAction.html#sam-생성자-람다를-함수형-인터페이스로-명시적-변경" class="rightbar-link" data-v-c620ccac>
      SAM 생성자: 람다를 함수형 인터페이스로 명시적 변경
    </a> <div data-v-c620ccac data-v-c620ccac></div></div><div class="header" data-v-c620ccac><a href="/blog/Kotlin/kotlinInAction.html#수신-객체-지정-람다-with-apply" class="rightbar-link" data-v-c620ccac>
      수신 객체 지정 람다: with, apply
    </a> <div data-v-c620ccac data-v-c620ccac></div></div></div></div><div class="header" data-v-c620ccac><a href="/blog/Kotlin/kotlinInAction.html#_6장-코틀린-타입-시스템" class="rightbar-link" data-v-c620ccac>
      6장. 코틀린 타입 시스템
    </a> <div data-v-c620ccac data-v-c620ccac><div class="header" data-v-c620ccac><a href="/blog/Kotlin/kotlinInAction.html#nullability" class="rightbar-link" data-v-c620ccac>
      Nullability
    </a> <div data-v-c620ccac data-v-c620ccac></div></div><div class="header" data-v-c620ccac><a href="/blog/Kotlin/kotlinInAction.html#앨비스-연산자" class="rightbar-link" data-v-c620ccac>
      앨비스 연산자 ?:
    </a> <div data-v-c620ccac data-v-c620ccac></div></div><div class="header" data-v-c620ccac><a href="/blog/Kotlin/kotlinInAction.html#안전한-캐스팅-as" class="rightbar-link" data-v-c620ccac>
      안전한 캐스팅 as?
    </a> <div data-v-c620ccac data-v-c620ccac></div></div><div class="header" data-v-c620ccac><a href="/blog/Kotlin/kotlinInAction.html#null-아님-단언" class="rightbar-link" data-v-c620ccac>
      null 아님 단언: !!
    </a> <div data-v-c620ccac data-v-c620ccac></div></div><div class="header" data-v-c620ccac><a href="/blog/Kotlin/kotlinInAction.html#let-함수" class="rightbar-link" data-v-c620ccac>
      let 함수
    </a> <div data-v-c620ccac data-v-c620ccac></div></div><div class="header" data-v-c620ccac><a href="/blog/Kotlin/kotlinInAction.html#null-불가능-타입의-지연-초기화" class="rightbar-link" data-v-c620ccac>
      null 불가능 타입의 지연 초기화
    </a> <div data-v-c620ccac data-v-c620ccac></div></div><div class="header" data-v-c620ccac><a href="/blog/Kotlin/kotlinInAction.html#타입-파라미터와-nullable" class="rightbar-link" data-v-c620ccac>
      타입 파라미터와 nullable
    </a> <div data-v-c620ccac data-v-c620ccac></div></div><div class="header" data-v-c620ccac><a href="/blog/Kotlin/kotlinInAction.html#플랫폼-타입" class="rightbar-link" data-v-c620ccac>
      플랫폼 타입
    </a> <div data-v-c620ccac data-v-c620ccac></div></div><div class="header" data-v-c620ccac><a href="/blog/Kotlin/kotlinInAction.html#코틀린의-원시타입" class="rightbar-link" data-v-c620ccac>
      코틀린의 원시타입
    </a> <div data-v-c620ccac data-v-c620ccac></div></div><div class="header" data-v-c620ccac><a href="/blog/Kotlin/kotlinInAction.html#any-any-최상위-타입" class="rightbar-link" data-v-c620ccac>
      Any, Any?: 최상위 타입
    </a> <div data-v-c620ccac data-v-c620ccac></div></div><div class="header" data-v-c620ccac><a href="/blog/Kotlin/kotlinInAction.html#unit" class="rightbar-link" data-v-c620ccac>
      Unit
    </a> <div data-v-c620ccac data-v-c620ccac></div></div><div class="header" data-v-c620ccac><a href="/blog/Kotlin/kotlinInAction.html#nothing" class="rightbar-link" data-v-c620ccac>
      Nothing
    </a> <div data-v-c620ccac data-v-c620ccac></div></div><div class="header" data-v-c620ccac><a href="/blog/Kotlin/kotlinInAction.html#코틀린과-자바-컬렉션" class="rightbar-link" data-v-c620ccac>
      코틀린과 자바 컬렉션
    </a> <div data-v-c620ccac data-v-c620ccac></div></div><div class="header" data-v-c620ccac><a href="/blog/Kotlin/kotlinInAction.html#배열" class="rightbar-link" data-v-c620ccac>
      배열
    </a> <div data-v-c620ccac data-v-c620ccac></div></div></div></div><div class="header" data-v-c620ccac><a href="/blog/Kotlin/kotlinInAction.html#_7장-연산자-오버로딩과-기타-관례" class="rightbar-link" data-v-c620ccac>
      7장. 연산자 오버로딩과 기타 관례
    </a> <div data-v-c620ccac data-v-c620ccac><div class="header" data-v-c620ccac><a href="/blog/Kotlin/kotlinInAction.html#산술-연산자-오버로딩" class="rightbar-link" data-v-c620ccac>
      산술 연산자 오버로딩
    </a> <div data-v-c620ccac data-v-c620ccac></div></div><div class="header" data-v-c620ccac><a href="/blog/Kotlin/kotlinInAction.html#복합-대입-연산자-오버로딩" class="rightbar-link" data-v-c620ccac>
      복합 대입 연산자 오버로딩
    </a> <div data-v-c620ccac data-v-c620ccac></div></div><div class="header" data-v-c620ccac><a href="/blog/Kotlin/kotlinInAction.html#단항-연산자-오버로딩" class="rightbar-link" data-v-c620ccac>
      단항 연산자 오버로딩
    </a> <div data-v-c620ccac data-v-c620ccac></div></div><div class="header" data-v-c620ccac><a href="/blog/Kotlin/kotlinInAction.html#비교-연산자-오버로딩" class="rightbar-link" data-v-c620ccac>
      비교 연산자 오버로딩
    </a> <div data-v-c620ccac data-v-c620ccac></div></div><div class="header" data-v-c620ccac><a href="/blog/Kotlin/kotlinInAction.html#get-set-관례" class="rightbar-link" data-v-c620ccac>
      get, set 관례
    </a> <div data-v-c620ccac data-v-c620ccac></div></div><div class="header" data-v-c620ccac><a href="/blog/Kotlin/kotlinInAction.html#in-관례" class="rightbar-link" data-v-c620ccac>
      in 관례
    </a> <div data-v-c620ccac data-v-c620ccac></div></div><div class="header" data-v-c620ccac><a href="/blog/Kotlin/kotlinInAction.html#rangeto-관례" class="rightbar-link" data-v-c620ccac>
      rangeTo 관례
    </a> <div data-v-c620ccac data-v-c620ccac></div></div><div class="header" data-v-c620ccac><a href="/blog/Kotlin/kotlinInAction.html#for-루프-iterator-관례" class="rightbar-link" data-v-c620ccac>
      for 루프 iterator 관례
    </a> <div data-v-c620ccac data-v-c620ccac></div></div><div class="header" data-v-c620ccac><a href="/blog/Kotlin/kotlinInAction.html#구조-분해-관례" class="rightbar-link" data-v-c620ccac>
      구조 분해 관례
    </a> <div data-v-c620ccac data-v-c620ccac></div></div><div class="header" data-v-c620ccac><a href="/blog/Kotlin/kotlinInAction.html#위임-프로퍼티" class="rightbar-link" data-v-c620ccac>
      위임 프로퍼티
    </a> <div data-v-c620ccac data-v-c620ccac></div></div><div class="header" data-v-c620ccac><a href="/blog/Kotlin/kotlinInAction.html#위임-프로퍼티-구현해보기" class="rightbar-link" data-v-c620ccac>
      위임 프로퍼티 구현해보기
    </a> <div data-v-c620ccac data-v-c620ccac></div></div></div></div><div class="header" data-v-c620ccac><a href="/blog/Kotlin/kotlinInAction.html#_8장-고차-함수" class="rightbar-link" data-v-c620ccac>
      8장. 고차 함수
    </a> <div data-v-c620ccac data-v-c620ccac><div class="header" data-v-c620ccac><a href="/blog/Kotlin/kotlinInAction.html#고차-함수-정의" class="rightbar-link" data-v-c620ccac>
      고차 함수 정의
    </a> <div data-v-c620ccac data-v-c620ccac></div></div><div class="header" data-v-c620ccac><a href="/blog/Kotlin/kotlinInAction.html#함수-타입" class="rightbar-link" data-v-c620ccac>
      함수 타입
    </a> <div data-v-c620ccac data-v-c620ccac></div></div><div class="header" data-v-c620ccac><a href="/blog/Kotlin/kotlinInAction.html#자바에서-코틀린-함수-타입" class="rightbar-link" data-v-c620ccac>
      자바에서 코틀린 함수 타입
    </a> <div data-v-c620ccac data-v-c620ccac></div></div><div class="header" data-v-c620ccac><a href="/blog/Kotlin/kotlinInAction.html#안전한-nullable-function-호출" class="rightbar-link" data-v-c620ccac>
      안전한 nullable function 호출
    </a> <div data-v-c620ccac data-v-c620ccac></div></div><div class="header" data-v-c620ccac><a href="/blog/Kotlin/kotlinInAction.html#함수를-반환하는-함수-만들기" class="rightbar-link" data-v-c620ccac>
      함수를 반환하는 함수 만들기
    </a> <div data-v-c620ccac data-v-c620ccac></div></div><div class="header" data-v-c620ccac><a href="/blog/Kotlin/kotlinInAction.html#인라인-함수-람다의-부가-비용-없애기" class="rightbar-link" data-v-c620ccac>
      인라인 함수: 람다의 부가 비용 없애기
    </a> <div data-v-c620ccac data-v-c620ccac></div></div><div class="header" data-v-c620ccac><a href="/blog/Kotlin/kotlinInAction.html#인라이닝이-작동하는-방식" class="rightbar-link" data-v-c620ccac>
      인라이닝이 작동하는 방식
    </a> <div data-v-c620ccac data-v-c620ccac></div></div><div class="header" data-v-c620ccac><a href="/blog/Kotlin/kotlinInAction.html#인라인-함수의-한계" class="rightbar-link" data-v-c620ccac>
      인라인 함수의 한계
    </a> <div data-v-c620ccac data-v-c620ccac></div></div><div class="header" data-v-c620ccac><a href="/blog/Kotlin/kotlinInAction.html#컬렉션-연산-인라이닝" class="rightbar-link" data-v-c620ccac>
      컬렉션 연산 인라이닝
    </a> <div data-v-c620ccac data-v-c620ccac></div></div><div class="header" data-v-c620ccac><a href="/blog/Kotlin/kotlinInAction.html#시퀀스와-인라이닝" class="rightbar-link" data-v-c620ccac>
      시퀀스와 인라이닝
    </a> <div data-v-c620ccac data-v-c620ccac></div></div><div class="header" data-v-c620ccac><a href="/blog/Kotlin/kotlinInAction.html#함수를-인라인으로-선언해야-할-때" class="rightbar-link" data-v-c620ccac>
      함수를 인라인으로 선언해야 할 때
    </a> <div data-v-c620ccac data-v-c620ccac></div></div><div class="header" data-v-c620ccac><a href="/blog/Kotlin/kotlinInAction.html#함수를-인라인으로-선언하지-말아야-할-때" class="rightbar-link" data-v-c620ccac>
      함수를 인라인으로 선언하지 말아야 할 때
    </a> <div data-v-c620ccac data-v-c620ccac></div></div><div class="header" data-v-c620ccac><a href="/blog/Kotlin/kotlinInAction.html#인라인-함수를-사용할-때-주의할-점" class="rightbar-link" data-v-c620ccac>
      인라인 함수를 사용할 때 주의할 점
    </a> <div data-v-c620ccac data-v-c620ccac></div></div><div class="header" data-v-c620ccac><a href="/blog/Kotlin/kotlinInAction.html#인라인-함수-활용-예" class="rightbar-link" data-v-c620ccac>
      인라인 함수 활용 예
    </a> <div data-v-c620ccac data-v-c620ccac></div></div><div class="header" data-v-c620ccac><a href="/blog/Kotlin/kotlinInAction.html#인라인-함수의-non-local-return" class="rightbar-link" data-v-c620ccac>
      인라인 함수의 non-local return
    </a> <div data-v-c620ccac data-v-c620ccac></div></div><div class="header" data-v-c620ccac><a href="/blog/Kotlin/kotlinInAction.html#레이블을-활용한-로컬-return" class="rightbar-link" data-v-c620ccac>
      레이블을 활용한 로컬 return
    </a> <div data-v-c620ccac data-v-c620ccac></div></div></div></div><div class="header" data-v-c620ccac><a href="/blog/Kotlin/kotlinInAction.html#_9장-제네릭스" class="rightbar-link" data-v-c620ccac>
      9장. 제네릭스
    </a> <div data-v-c620ccac data-v-c620ccac><div class="header" data-v-c620ccac><a href="/blog/Kotlin/kotlinInAction.html#제네릭-타입-파라미터" class="rightbar-link" data-v-c620ccac>
      제네릭 타입 파라미터
    </a> <div data-v-c620ccac data-v-c620ccac></div></div><div class="header" data-v-c620ccac><a href="/blog/Kotlin/kotlinInAction.html#런타임의-제네릭-타임-검사와-캐스트" class="rightbar-link" data-v-c620ccac>
      런타임의 제네릭: 타임 검사와 캐스트
    </a> <div data-v-c620ccac data-v-c620ccac></div></div><div class="header" data-v-c620ccac><a href="/blog/Kotlin/kotlinInAction.html#실체화한-타입으로-클래스-참조를-대신하기" class="rightbar-link" data-v-c620ccac>
      실체화한 타입으로 클래스 참조를 대신하기
    </a> <div data-v-c620ccac data-v-c620ccac></div></div><div class="header" data-v-c620ccac><a href="/blog/Kotlin/kotlinInAction.html#변성-variance-제네릭과-하위-타입" class="rightbar-link" data-v-c620ccac>
      변성(variance): 제네릭과 하위 타입
    </a> <div data-v-c620ccac data-v-c620ccac></div></div><div class="header" data-v-c620ccac><a href="/blog/Kotlin/kotlinInAction.html#변성이-있는-이유-인자를-함수에-넘기기" class="rightbar-link" data-v-c620ccac>
      변성이 있는 이유: 인자를 함수에 넘기기
    </a> <div data-v-c620ccac data-v-c620ccac></div></div><div class="header" data-v-c620ccac><a href="/blog/Kotlin/kotlinInAction.html#공변성-하위-타입-관계를-유지" class="rightbar-link" data-v-c620ccac>
      공변성: 하위 타입 관계를 유지
    </a> <div data-v-c620ccac data-v-c620ccac></div></div><div class="header" data-v-c620ccac><a href="/blog/Kotlin/kotlinInAction.html#반공변성-뒤집힌-하위-타입-관계" class="rightbar-link" data-v-c620ccac>
      반공변성: 뒤집힌 하위 타입 관계
    </a> <div data-v-c620ccac data-v-c620ccac></div></div><div class="header" data-v-c620ccac><a href="/blog/Kotlin/kotlinInAction.html#사용-지점-변성-타입이-언급되는-지점에서-변성-지정" class="rightbar-link" data-v-c620ccac>
      사용 지점 변성: 타입이 언급되는 지점에서 변성 지정
    </a> <div data-v-c620ccac data-v-c620ccac></div></div><div class="header" data-v-c620ccac><a href="/blog/Kotlin/kotlinInAction.html#스타-프로젝션-타입-대신" class="rightbar-link" data-v-c620ccac>
      스타 프로젝션: 타입 대신 *
    </a> <div data-v-c620ccac data-v-c620ccac></div></div></div></div><div class="header" data-v-c620ccac><a href="/blog/Kotlin/kotlinInAction.html#_10장-애노테이션과-리플렉션" class="rightbar-link" data-v-c620ccac>
      10장. 애노테이션과 리플렉션
    </a> <div data-v-c620ccac data-v-c620ccac><div class="header" data-v-c620ccac><a href="/blog/Kotlin/kotlinInAction.html#애노테이션-선언과-적용" class="rightbar-link" data-v-c620ccac>
      애노테이션 선언과 적용
    </a> <div data-v-c620ccac data-v-c620ccac></div></div><div class="header" data-v-c620ccac><a href="/blog/Kotlin/kotlinInAction.html#자바-api를-애노테이션으로-제어" class="rightbar-link" data-v-c620ccac>
      자바 API를 애노테이션으로 제어
    </a> <div data-v-c620ccac data-v-c620ccac></div></div><div class="header" data-v-c620ccac><a href="/blog/Kotlin/kotlinInAction.html#리플렉션" class="rightbar-link" data-v-c620ccac>
      리플렉션
    </a> <div data-v-c620ccac data-v-c620ccac></div></div><div class="header" data-v-c620ccac><a href="/blog/Kotlin/kotlinInAction.html#코틀린-리플렉션-api-kclass-kcallable-kfunction-kproperty" class="rightbar-link" data-v-c620ccac>
      코틀린 리플렉션 API: KClass, KCallable, KFunction, KProperty
    </a> <div data-v-c620ccac data-v-c620ccac></div></div></div></div><div class="header" data-v-c620ccac><a href="/blog/Kotlin/kotlinInAction.html#_11장-dsl-만들기" class="rightbar-link" data-v-c620ccac>
      11장. DSL 만들기
    </a> <div data-v-c620ccac data-v-c620ccac><div class="header" data-v-c620ccac><a href="/blog/Kotlin/kotlinInAction.html#api에서-dsl로" class="rightbar-link" data-v-c620ccac>
      API에서 DSL로
    </a> <div data-v-c620ccac data-v-c620ccac></div></div><div class="header" data-v-c620ccac><a href="/blog/Kotlin/kotlinInAction.html#domain-specific-language" class="rightbar-link" data-v-c620ccac>
      Domain-Specific Language
    </a> <div data-v-c620ccac data-v-c620ccac></div></div><div class="header" data-v-c620ccac><a href="/blog/Kotlin/kotlinInAction.html#내부-dsl" class="rightbar-link" data-v-c620ccac>
      내부 DSL
    </a> <div data-v-c620ccac data-v-c620ccac></div></div><div class="header" data-v-c620ccac><a href="/blog/Kotlin/kotlinInAction.html#dsl의-구조" class="rightbar-link" data-v-c620ccac>
      DSL의 구조
    </a> <div data-v-c620ccac data-v-c620ccac></div></div><div class="header" data-v-c620ccac><a href="/blog/Kotlin/kotlinInAction.html#구조화된-api-구축으로-dsl-만들기" class="rightbar-link" data-v-c620ccac>
      구조화된 API 구축으로 DSL 만들기
    </a> <div data-v-c620ccac data-v-c620ccac></div></div><div class="header" data-v-c620ccac><a href="/blog/Kotlin/kotlinInAction.html#kotlinx-사용해보기" class="rightbar-link" data-v-c620ccac>
      kotlinx 사용해보기
    </a> <div data-v-c620ccac data-v-c620ccac></div></div><div class="header" data-v-c620ccac><a href="/blog/Kotlin/kotlinInAction.html#invoke-관례" class="rightbar-link" data-v-c620ccac>
      invoke 관례
    </a> <div data-v-c620ccac data-v-c620ccac></div></div><div class="header" data-v-c620ccac><a href="/blog/Kotlin/kotlinInAction.html#중위-함수-활용" class="rightbar-link" data-v-c620ccac>
      중위 함수 활용
    </a> <div data-v-c620ccac data-v-c620ccac></div></div><div class="header" data-v-c620ccac><a href="/blog/Kotlin/kotlinInAction.html#원시-타입에-확장-프로퍼티를-활용하여-날짜-처리를-간단히" class="rightbar-link" data-v-c620ccac>
      원시 타입에 확장 프로퍼티를 활용하여 날짜 처리를 간단히
    </a> <div data-v-c620ccac data-v-c620ccac></div></div><div class="header" data-v-c620ccac><a href="/blog/Kotlin/kotlinInAction.html#sql-dsl-만들기" class="rightbar-link" data-v-c620ccac>
      SQL DSL 만들기
    </a> <div data-v-c620ccac data-v-c620ccac></div></div></div></div></div></aside> <main class="page"><div class="block content-title" data-v-73713578 data-v-fa8c0460><div style="width: 100%" data-v-73713578><div class="w-11/12 mx-auto title" data-v-73713578><h1 class="title" data-v-73713578>코틀린 인 액션 정리</h1></div> <div class="text--primary text-right w-95 mr-5 my-2" data-v-73713578>
      작성일: 2021-01-29 22:06
    </div> <div class="w-100 text-center" data-v-73713578><!----></div> <hr class="content-divider" data-v-73713578></div></div> <div class="theme-default-content content__default"><h2 id="_1장-코틀린이란-무엇이며-왜-필요한가"><a href="#_1장-코틀린이란-무엇이며-왜-필요한가" class="header-anchor">#</a> 1장 코틀린이란 무엇이며, 왜 필요한가?</h2> <ul><li>코틀린은 자바 코드와의 상호운용성을 중시한다.</li> <li>코틀린은 정적 타입 지정 언어이다.</li></ul> <h3 id="정적-타입-언어의-장점"><a href="#정적-타입-언어의-장점" class="header-anchor">#</a> 정적 타입 언어의 장점</h3> <details class="custom-block details"><summary>자세히</summary> <ul><li><strong>성능</strong> <ul><li>런타임에 어떤 메서드를 호출해야할 지 알아내지 않아도되므로 성능이 더 우수</li></ul></li> <li><strong>신뢰성</strong> <ul><li>컴파일러를 통한 검증으로 신뢰성 향상</li></ul></li> <li><strong>유지보수성</strong></li> <li><strong>강력한 도구 지원</strong></li></ul></details> <h3 id="코틀린의-철학"><a href="#코틀린의-철학" class="header-anchor">#</a> 코틀린의 철학</h3> <details class="custom-block details"><summary>자세히</summary> <ul><li><strong>실용성</strong> <ul><li>연구를 위한 언어가 아닌 실무에 사용할 수 있도록 증명된 해법과 기능을 바탕으로 만듬</li></ul></li> <li><strong>간결성</strong> <ul><li>간결한 코드는 코드 가독성을 높여 더 빠르고 효율적인 개발 가능</li></ul></li> <li><strong>안전성</strong> <ul><li>JVM 기반으로 동작하므로 JVM의 지원을 받을 수 있다.</li> <li>타입 지정 언어이므로 안전한 코딩이 가능하다.</li></ul></li> <li><strong>상호운용성</strong> <ul><li>자바와 매우 높은 호환성을 가짐</li></ul></li></ul></details> <h2 id="_2장-코틀린-기초"><a href="#_2장-코틀린-기초" class="header-anchor">#</a> 2장 코틀린 기초</h2> <ul><li>코틀린은 루프를 제외하고 대부분 <code>식(expression)</code>으로 구성됨</li> <li>expression은 값을 만들지만 statement는 블럭의 최상위 요소로 존재할 뿐 값을 만들지 않는다.</li></ul> <h3 id="함수와-변수"><a href="#함수와-변수" class="header-anchor">#</a> 함수와 변수</h3> <details class="custom-block details"><summary>자세히</summary> <div class="language-kotlin line-numbers-mode"><pre class="language-kotlin"><code><span class="token comment">// 함수는 fun으로 정의하며 블럭문이 아닌 식으로도 정의 가능</span>
<span class="token keyword">fun</span> <span class="token function">hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Hello&quot;</span><span class="token punctuation">)</span>

<span class="token comment">// val은 java final과 동일하게 재할당이 불가능</span>
<span class="token keyword">val</span> name1<span class="token operator">:</span> String <span class="token operator">=</span> <span class="token string">&quot;Dexter&quot;</span>

<span class="token comment">// var는 재할당 가능</span>
<span class="token keyword">var</span> name2<span class="token operator">:</span> String <span class="token operator">=</span> <span class="token string">&quot;Dexter&quot;</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><div class="language-kotlin line-numbers-mode"><pre class="language-kotlin"><code><span class="token comment">// if문도 expression으로 사용 가능</span>
<span class="token keyword">fun</span> <span class="token function">max</span><span class="token punctuation">(</span>a<span class="token operator">:</span> Int<span class="token punctuation">,</span> b<span class="token operator">:</span> Int<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>a <span class="token operator">&gt;</span> b<span class="token punctuation">)</span> a <span class="token keyword">else</span> b
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li>expression을 함수의 본문으로 구성하여 간결하게 표현가능</li></ul> <h4 id="굳이-변수를-뒤에-선언하는-이유"><a href="#굳이-변수를-뒤에-선언하는-이유" class="header-anchor">#</a> 굳이 변수를 뒤에 선언하는 이유?</h4> <ul><li>변수를 뒤에 지정하게 되면 <code>타입 지정을 생략할 수 있게 해준다.</code></li></ul></details> <h3 id="문자열-템플릿"><a href="#문자열-템플릿" class="header-anchor">#</a> 문자열 템플릿</h3> <details class="custom-block details"><summary>자세히</summary> <div class="language-kotlin line-numbers-mode"><pre class="language-kotlin"><code><span class="token keyword">val</span> name <span class="token operator">=</span> <span class="token string">&quot;Dexter&quot;</span>
<span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Hello <span class="token interpolation variable">$name</span>&quot;</span><span class="token punctuation">)</span>
<span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Hello <span class="token interpolation"><span class="token delimiter variable">${</span>name<span class="token delimiter variable">}</span></span>&quot;</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ul><li>자바에 비해 훨씬 더 간편하게 문자열을 다룰 수 있다.</li></ul></details> <h3 id="클래스"><a href="#클래스" class="header-anchor">#</a> 클래스</h3> <details class="custom-block details"><summary>자세히</summary> <div class="language-kotlin line-numbers-mode"><pre class="language-kotlin"><code><span class="token keyword">class</span> <span class="token function">Person</span><span class="token punctuation">(</span>
    <span class="token comment">// val은 읽기 전용으로 비공개 필드와 getter 제공</span>
    <span class="token keyword">val</span> name<span class="token operator">:</span> String<span class="token punctuation">,</span>
    <span class="token comment">// var은 변경 가능하므로 비공개 필드와 getter, setter 제공</span>
    <span class="token keyword">var</span> age<span class="token operator">:</span> Integer<span class="token punctuation">,</span>
<span class="token punctuation">)</span>

<span class="token keyword">val</span> person <span class="token operator">=</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token string">&quot;Dexter&quot;</span><span class="token punctuation">,</span> <span class="token number">26</span><span class="token punctuation">)</span>
<span class="token function">println</span><span class="token punctuation">(</span>person<span class="token punctuation">.</span>name<span class="token punctuation">)</span> <span class="token comment">// 프로퍼티로 직접 접근하면 게터가 호출된다.</span>
<span class="token function">println</span><span class="token punctuation">(</span>person<span class="token punctuation">.</span>age<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div></details> <h3 id="커스텀-접근자"><a href="#커스텀-접근자" class="header-anchor">#</a> 커스텀 접근자</h3> <details class="custom-block details"><summary>자세히</summary> <div class="language-kotlin line-numbers-mode"><pre class="language-kotlin"><code><span class="token keyword">class</span> <span class="token function">Rectangle</span><span class="token punctuation">(</span><span class="token keyword">val</span> height<span class="token operator">:</span> Int<span class="token punctuation">,</span> <span class="token keyword">val</span> width<span class="token operator">:</span> Int<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 커스텀 접근자를 지정할 수 있다.</span>
    <span class="token keyword">val</span> isSquare<span class="token operator">:</span> Boolean 
        <span class="token keyword">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> height <span class="token operator">==</span> width
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></details> <h3 id="enum과-when"><a href="#enum과-when" class="header-anchor">#</a> enum과 when</h3> <details class="custom-block details"><summary>자세히</summary> <div class="language-kotlin line-numbers-mode"><pre class="language-kotlin"><code><span class="token keyword">enum</span> <span class="token keyword">class</span> Color <span class="token punctuation">{</span>
    RED<span class="token punctuation">,</span>
    ORANGE<span class="token punctuation">,</span>
    YELLOW
    <span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// java 스위치랑 비슷</span>
<span class="token keyword">fun</span> <span class="token function">getStringColor</span><span class="token punctuation">(</span>color<span class="token operator">:</span> Color<span class="token punctuation">)</span> <span class="token operator">=</span>
        <span class="token keyword">when</span> <span class="token punctuation">(</span>color<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            Color<span class="token punctuation">.</span>RED <span class="token operator">-&gt;</span> <span class="token string">&quot;RED&quot;</span> 
            Color<span class="token punctuation">.</span>ORANGE <span class="token operator">-&gt;</span> <span class="token string">&quot;ORANGE&quot;</span> 
            Color<span class="token punctuation">.</span>YELLOW <span class="token operator">-&gt;</span> <span class="token string">&quot;YELLOW&quot;</span> 
        <span class="token punctuation">}</span>

<span class="token keyword">fun</span> <span class="token function">getStringColor2</span><span class="token punctuation">(</span>color<span class="token operator">:</span> Color<span class="token punctuation">)</span> <span class="token operator">=</span>
        <span class="token keyword">when</span> <span class="token punctuation">(</span>color<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            Color<span class="token punctuation">.</span>RED<span class="token punctuation">,</span> Color<span class="token punctuation">.</span>ORANGE<span class="token punctuation">,</span> Color<span class="token punctuation">.</span>YELLOW <span class="token operator">-&gt;</span> <span class="token string">&quot;COLOR&quot;</span>
        <span class="token punctuation">}</span>

<span class="token keyword">fun</span> <span class="token function">getStringColor3</span><span class="token punctuation">(</span>color1<span class="token operator">:</span> Color<span class="token punctuation">,</span> color2<span class="token operator">:</span> Color<span class="token punctuation">)</span> <span class="token operator">=</span> 
        <span class="token keyword">when</span> <span class="token punctuation">{</span>
            <span class="token punctuation">(</span>color1 <span class="token operator">==</span> Color<span class="token punctuation">.</span>RED <span class="token operator">||</span> color2 <span class="token operator">==</span> Color<span class="token punctuation">.</span>ORANGE<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token string">&quot;RED ORANGE&quot;</span>
            <span class="token keyword">else</span> <span class="token operator">-&gt;</span> <span class="token keyword">throw</span> <span class="token function">RuntimeException</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div></details> <h3 id="스마트-캐스팅"><a href="#스마트-캐스팅" class="header-anchor">#</a> 스마트 캐스팅</h3> <details class="custom-block details"><summary>자세히</summary> <div class="language-kotlin line-numbers-mode"><pre class="language-kotlin"><code><span class="token keyword">interface</span> Expr
<span class="token keyword">class</span> <span class="token function">Num</span><span class="token punctuation">(</span><span class="token keyword">val</span> value<span class="token operator">:</span> Int<span class="token punctuation">)</span> <span class="token operator">:</span> Expr
<span class="token keyword">class</span> <span class="token function">Sum</span><span class="token punctuation">(</span><span class="token keyword">var</span> left<span class="token operator">:</span> Expr<span class="token punctuation">,</span> <span class="token keyword">val</span> right<span class="token operator">:</span> Expr<span class="token punctuation">)</span> <span class="token operator">:</span> Expr

<span class="token comment">// 스마트 캐스팅을 지원한다.</span>
<span class="token keyword">fun</span> <span class="token function">eval</span><span class="token punctuation">(</span>e<span class="token operator">:</span> Expr<span class="token punctuation">)</span><span class="token operator">:</span> Int <span class="token operator">=</span>
        <span class="token keyword">when</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">is</span> Num <span class="token operator">-&gt;</span> e<span class="token punctuation">.</span>value
          <span class="token keyword">is</span> Sum <span class="token operator">-&gt;</span> <span class="token function">eval</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>left<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">eval</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>right<span class="token punctuation">)</span>
          <span class="token keyword">else</span> <span class="token operator">-&gt;</span> <span class="token keyword">throw</span> <span class="token function">IllegalArgumentException</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>

<span class="token comment">/**
 *  클래스의 프로퍼티를 스마트 캐스팅하고 싶다면 val이면서 커스텀 접근자가 정의되어 있지 않아야 한다.
 *  - var거나 커스텀 접근자가 있으면 언제나 같은 타입을 반환해준다는 것을 확신할 수 없기 때문에..
 */</span>
<span class="token keyword">fun</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">val</span> sum <span class="token operator">=</span> <span class="token function">Sum</span><span class="token punctuation">(</span><span class="token function">Num</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">Num</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>sum<span class="token punctuation">.</span>left <span class="token keyword">is</span> Num<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//  println(sum.left.value) 컴파일 에러 (left는 var이다)</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// 스마트 캐스팅 가능(rifht는 val이기 때문)</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>sum<span class="token punctuation">.</span>right <span class="token keyword">is</span> Num<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">println</span><span class="token punctuation">(</span>sum<span class="token punctuation">.</span>right<span class="token punctuation">.</span>value<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><ul><li>타입검사와 동시에 형변환을 하도록하여 스마트 캐스팅 지원</li></ul></details> <h3 id="expression-when-if"><a href="#expression-when-if" class="header-anchor">#</a> expression when, if</h3> <details class="custom-block details"><summary>자세히</summary> <div class="language-kotlin line-numbers-mode"><pre class="language-kotlin"><code><span class="token keyword">fun</span> <span class="token function">expressionWhen</span><span class="token punctuation">(</span>e<span class="token operator">:</span> Expr<span class="token punctuation">)</span><span class="token operator">:</span> Int <span class="token operator">=</span>
        <span class="token keyword">when</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">is</span> Num <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
                <span class="token function">println</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>value<span class="token punctuation">)</span>
                e<span class="token punctuation">.</span>value <span class="token comment">// 표현식의 블럭문은 마지막 값이 리턴 값이 된다.</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">is</span> Sum <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
                <span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;<span class="token interpolation"><span class="token delimiter variable">${</span>e<span class="token punctuation">.</span>left<span class="token delimiter variable">}</span></span> + <span class="token interpolation"><span class="token delimiter variable">${</span>e<span class="token punctuation">.</span>right<span class="token delimiter variable">}</span></span>&quot;</span><span class="token punctuation">)</span>
                <span class="token function">expressionWhen</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>left<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">expressionWhen</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>right<span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">else</span> <span class="token operator">-&gt;</span> <span class="token keyword">throw</span> <span class="token function">IllegalArgumentException</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>

<span class="token comment">// if절도 가능하지만 when이 더 깔끔해보인다.</span>
<span class="token keyword">fun</span> <span class="token function">expressionIf</span><span class="token punctuation">(</span>e<span class="token operator">:</span> Expr<span class="token punctuation">)</span><span class="token operator">:</span> Int <span class="token operator">=</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>e <span class="token keyword">is</span> Num<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">println</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>value<span class="token punctuation">)</span>
            e<span class="token punctuation">.</span>value <span class="token comment">// 표현식의 블럭문은 마지막 값이 리턴 값이 된다.</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>e <span class="token keyword">is</span> Sum<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;<span class="token interpolation"><span class="token delimiter variable">${</span>e<span class="token punctuation">.</span>left<span class="token delimiter variable">}</span></span> + <span class="token interpolation"><span class="token delimiter variable">${</span>e<span class="token punctuation">.</span>right<span class="token delimiter variable">}</span></span>&quot;</span><span class="token punctuation">)</span>
            <span class="token function">expressionIf</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>left<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">expressionIf</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>right<span class="token punctuation">)</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token function">IllegalArgumentException</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div></details> <h3 id="이터레이션"><a href="#이터레이션" class="header-anchor">#</a> 이터레이션</h3> <details class="custom-block details"><summary>자세히</summary> <div class="language-kotlin line-numbers-mode"><pre class="language-kotlin"><code><span class="token keyword">fun</span> <span class="token function">iterationEx</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 1~10 출력</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token keyword">in</span> <span class="token number">1</span><span class="token operator">..</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token keyword">in</span> <span class="token number">1</span><span class="token operator">..</span><span class="token number">10</span> step <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 10에서 1까지 2 칸씩</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token keyword">in</span> <span class="token number">10</span> downTo <span class="token number">1</span> step <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;<span class="token interpolation variable">$i</span>, &quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// map의 key, value를 for문으로 풀어낼 수 있다.</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> value<span class="token punctuation">)</span> <span class="token keyword">in</span> <span class="token function">mutableMapOf</span><span class="token punctuation">(</span><span class="token function">Pair</span><span class="token punctuation">(</span><span class="token string">&quot;A&quot;</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token punctuation">}</span>

    <span class="token comment">// withIndex를 활용하면 리스트의 index도 간편히 가져올 수 있다.</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>index<span class="token punctuation">,</span> value<span class="token punctuation">)</span> <span class="token keyword">in</span> <span class="token function">mutableListOf</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">withIndex</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div></details> <h3 id="in으로-범위-검사"><a href="#in으로-범위-검사" class="header-anchor">#</a> in으로 범위 검사</h3> <details class="custom-block details"><summary>자세히</summary> <div class="language-kotlin line-numbers-mode"><pre class="language-kotlin"><code>
<span class="token keyword">fun</span> <span class="token function">isSmallLetter</span><span class="token punctuation">(</span>c<span class="token operator">:</span> Char<span class="token punctuation">)</span> <span class="token operator">=</span> c <span class="token keyword">in</span> <span class="token string">'a'</span><span class="token operator">..</span><span class="token string">'z'</span> <span class="token comment">// 컴파일 -&gt; 'a'&lt;= c &amp;&amp; c &lt;= 'z'</span>
<span class="token keyword">fun</span> <span class="token function">isNotSmallLetter</span><span class="token punctuation">(</span>c<span class="token operator">:</span> Char<span class="token punctuation">)</span> <span class="token operator">=</span> c <span class="token operator">!</span><span class="token keyword">in</span> <span class="token string">'a'</span><span class="token operator">..</span><span class="token string">'z'</span>

<span class="token keyword">fun</span> <span class="token function">regognize</span><span class="token punctuation">(</span>c<span class="token operator">:</span> Char<span class="token punctuation">)</span><span class="token operator">:</span> String <span class="token operator">=</span>
        <span class="token keyword">when</span> <span class="token punctuation">(</span>c<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// when절에서도 in 검증 방식 사용 가능</span>
            <span class="token keyword">in</span> <span class="token string">'a'</span><span class="token operator">..</span><span class="token string">'z'</span> <span class="token operator">-&gt;</span> <span class="token string">&quot;is small letter&quot;</span>
            <span class="token keyword">else</span> <span class="token operator">-&gt;</span> <span class="token string">&quot;is not small letter&quot;</span>
        <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div></details> <h3 id="예외"><a href="#예외" class="header-anchor">#</a> 예외</h3> <ul><li>코틀린은 모두 언체크 예외로 이루어져 있다.</li></ul> <h2 id="_3장-함수-정의와-호출"><a href="#_3장-함수-정의와-호출" class="header-anchor">#</a> 3장 함수 정의와 호출</h2> <h3 id="default-and-named-argument"><a href="#default-and-named-argument" class="header-anchor">#</a> Default and Named Argument</h3> <details class="custom-block details"><summary>자세히</summary> <div class="language-kotlin line-numbers-mode"><pre class="language-kotlin"><code><span class="token keyword">fun</span> <span class="token operator">&lt;</span>T<span class="token operator">&gt;</span> <span class="token function">joinToString</span><span class="token punctuation">(</span>collection<span class="token operator">:</span> Collection<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span><span class="token punctuation">,</span> separator<span class="token operator">:</span> String <span class="token operator">=</span> <span class="token string">&quot;,&quot;</span><span class="token punctuation">)</span><span class="token operator">:</span> String <span class="token punctuation">{</span>
    <span class="token keyword">val</span> builder <span class="token operator">=</span> <span class="token function">StringBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>index<span class="token punctuation">,</span> element<span class="token punctuation">)</span> <span class="token keyword">in</span> collection<span class="token punctuation">.</span><span class="token function">withIndex</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> builder<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>separator<span class="token punctuation">)</span>
      builder<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>element<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token keyword">return</span> builder<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">fun</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">joinToString</span><span class="token punctuation">(</span>separator <span class="token operator">=</span> <span class="token string">&quot;|&quot;</span><span class="token punctuation">,</span> collection <span class="token operator">=</span> <span class="token function">listOf</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><ul><li>아규먼트에 디폴트 값을 지정할 수 있고 호출 시 네이밍이 가능하다.</li> <li>named argument로 자바의 빌더를 대체할 수 있다.</li></ul> <h4 id="default-argument를-자바에도-지원하려면"><a href="#default-argument를-자바에도-지원하려면" class="header-anchor">#</a> Default Argument를 자바에도 지원하려면?</h4> <ul><li>@JvmOverloads를 붙이면 각각의 아규먼트에 맞는 오버로딩 메서드를 만들어준다.</li></ul></details> <h3 id="최상위-함수와-최상위-프로퍼티"><a href="#최상위-함수와-최상위-프로퍼티" class="header-anchor">#</a> 최상위 함수와 최상위 프로퍼티</h3> <details class="custom-block details"><summary>자세히</summary> <h4 id="최상위-함수는-어떻게-생성될까"><a href="#최상위-함수는-어떻게-생성될까" class="header-anchor">#</a> 최상위 함수는 어떻게 생성될까?</h4> <ul><li>바이트코드로 변환 후 자바로 디컴파일해보면 해당 코드가 작성된 파일명Kt라는 클래스의 static 메서드로 정의된다.</li></ul> <h4 id="최상위-프로퍼티-val-const"><a href="#최상위-프로퍼티-val-const" class="header-anchor">#</a> 최상위 프로퍼티 val? const?</h4> <ul><li>최상위 프로퍼티에 val, var 모두 사용 가능하다.</li> <li>val은 재할당이 불가능한건 맞지만 실제 호출 시 내부의 getter를 호출한다.</li> <li>상수를 선언할 때 getter를 호출하는건 자연스럽지 못하므로 <code>const val NAME = &quot;Dexter&quot;</code>와 같이 const를 붙여주자.</li></ul></details> <h3 id="확장-함수"><a href="#확장-함수" class="header-anchor">#</a> 확장 함수</h3> <details class="custom-block details"><summary>자세히</summary> <ul><li>기존에 만들어져 있던 클래스의 함수를 외부에서 추가하여 확장시키는 기법</li></ul> <div class="language-kotlin line-numbers-mode"><pre class="language-kotlin"><code><span class="token comment">// String의 확장 함수 정의. 확장이 될 대상을 **수신 객체 타입**이라고 칭하며 호출된 수신 객체는 해당 함수에서 this로 참조가능</span>
<span class="token keyword">fun</span> String<span class="token punctuation">.</span><span class="token function">lastChar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> Char <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><blockquote><p>확장 함수는 캡슐화를 지키므로 수신 객체를 this로 참조하더라도 확장 함수에서는 확장할 클래스 내부로 접근이 제한된 대상은 접근이 불가능</p></blockquote> <h4 id="자바에서-확장-함수-호출하기"><a href="#자바에서-확장-함수-호출하기" class="header-anchor">#</a> 자바에서 확장 함수 호출하기</h4> <ul><li>확장함수는 내부적으로 수신 객체를 첫번째 인자로 갖는 static method로 정의된다.</li> <li>그러므로 자바에서도 정적 메서드 호출로 호출할 수 있으며, static method이므로 런타임에 부가 비용이 없다.</li></ul> <blockquote><p><strong>확장 함수는 정적 메서드 호출에 대한 syntatic sugar일 뿐 대단한 것이 아니다</strong></p></blockquote> <h4 id="확장함수는-오버라이딩-불가"><a href="#확장함수는-오버라이딩-불가" class="header-anchor">#</a> 확장함수는 오버라이딩 불가</h4> <div class="language-kotlin line-numbers-mode"><pre class="language-kotlin"><code><span class="token keyword">open</span> <span class="token keyword">class</span> Parent
<span class="token keyword">class</span> Child <span class="token operator">:</span> <span class="token function">Parent</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">fun</span> Parent<span class="token punctuation">.</span><span class="token function">hi</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Parent.hi&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">fun</span> Child<span class="token punctuation">.</span><span class="token function">hi</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Child.hi&quot;</span><span class="token punctuation">)</span>

<span class="token keyword">fun</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">Child</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">hi</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// child 호출</span>
    <span class="token keyword">val</span> parent<span class="token operator">:</span> Parent <span class="token operator">=</span> <span class="token function">Child</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    parent<span class="token punctuation">.</span><span class="token function">hi</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// parent 호출</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><ul><li>내부적으로 정적 메서드로 구현되므로 오버라이딩은 불가능하기 때문에 실제 인스턴스는 Child이나 Parent의 hi가 호출된다.</li></ul></details> <h3 id="확장-프로퍼티"><a href="#확장-프로퍼티" class="header-anchor">#</a> 확장 프로퍼티</h3> <details class="custom-block details"><summary>자세히</summary> <div class="language-kotlin line-numbers-mode"><pre class="language-kotlin"><code><span class="token keyword">val</span> String<span class="token punctuation">.</span>lastChar<span class="token operator">:</span> Char
    <span class="token keyword">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token keyword">get</span><span class="token punctuation">(</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span>

<span class="token keyword">var</span> StringBuilder<span class="token punctuation">.</span>lastChar <span class="token operator">:</span> Char
    <span class="token keyword">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token keyword">get</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span>
    <span class="token keyword">set</span><span class="token punctuation">(</span>value<span class="token operator">:</span> Char<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setCharAt</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> value<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

<span class="token keyword">fun</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">val</span> sb <span class="token operator">=</span> <span class="token function">StringBuilder</span><span class="token punctuation">(</span><span class="token string">&quot;Hello World&quot;</span><span class="token punctuation">)</span>
    <span class="token function">println</span><span class="token punctuation">(</span>sb<span class="token punctuation">.</span>lastChar<span class="token punctuation">)</span>
    sb<span class="token punctuation">.</span>lastChar <span class="token operator">=</span> <span class="token string">'k'</span> <span class="token comment">// lastChar의 set 프로퍼티 호출</span>
    <span class="token function">println</span><span class="token punctuation">(</span>sb<span class="token punctuation">.</span>lastChar<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><ul><li>기존 클래스 객체에 필드를 추가하는게 아니라 상태를 가질 순 없고 접근자 프로퍼티를 정의하여 사용 가능</li></ul></details> <h3 id="가변-인자-함수"><a href="#가변-인자-함수" class="header-anchor">#</a> 가변 인자 함수</h3> <details class="custom-block details"><summary>자세히</summary> <div class="language-kotlin line-numbers-mode"><pre class="language-kotlin"><code><span class="token keyword">fun</span> <span class="token function">print</span><span class="token punctuation">(</span><span class="token keyword">vararg</span> args<span class="token operator">:</span> String<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span>arg <span class="token keyword">in</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">println</span><span class="token punctuation">(</span>arg<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">fun</span> <span class="token function">printArray</span><span class="token punctuation">(</span>args<span class="token operator">:</span> Array<span class="token operator">&lt;</span>String<span class="token operator">&gt;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Array 객체를 넘길때도 *를 반드시 붙여줘야 한다.</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token operator">*</span>args<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">fun</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">printArray</span><span class="token punctuation">(</span><span class="token function">arrayOf</span><span class="token punctuation">(</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div></details> <h3 id="중위-함수"><a href="#중위-함수" class="header-anchor">#</a> 중위 함수</h3> <details class="custom-block details"><summary>자세히</summary> <div class="language-kotlin line-numbers-mode"><pre class="language-kotlin"><code><span class="token keyword">val</span> map <span class="token operator">=</span> <span class="token function">hashMapOf</span><span class="token punctuation">(</span><span class="token number">1</span> <span class="token keyword">to</span> <span class="token string">&quot;one&quot;</span><span class="token punctuation">,</span> <span class="token number">2</span> <span class="token keyword">to</span> <span class="token string">&quot;two&quot;</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>인자가 하나뿐인 일반 메서드나 확장 함수는 중위 호출이 가능하다.</li></ul></details> <h3 id="구조-분해"><a href="#구조-분해" class="header-anchor">#</a> 구조 분해</h3> <details class="custom-block details"><summary>자세히</summary> <div class="language-kotlin line-numbers-mode"><pre class="language-kotlin"><code><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> value<span class="token punctuation">)</span> <span class="token keyword">in</span> <span class="token function">mutableMapOf</span><span class="token punctuation">(</span><span class="token function">Pair</span><span class="token punctuation">(</span><span class="token string">&quot;A&quot;</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token punctuation">}</span>

    <span class="token comment">// withIndex를 활용하면 리스트의 index도 간편히 가져올 수 있다.</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>index<span class="token punctuation">,</span> value<span class="token punctuation">)</span> <span class="token keyword">in</span> <span class="token function">mutableListOf</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">withIndex</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><ul><li>map을 key, value로 구조분해, list를 withIndex로 호출하여 index, value로 구조분해 하는등의 방식을 활용 가능.</li></ul></details> <h3 id="문자열-및-정규식-다루기"><a href="#문자열-및-정규식-다루기" class="header-anchor">#</a> 문자열 및 정규식 다루기</h3> <details class="custom-block details"><summary>자세히</summary> <div class="language-kotlin line-numbers-mode"><pre class="language-kotlin"><code><span class="token keyword">fun</span> <span class="token function">regex</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 명시적으로 정규 표현식을 표현</span>
  <span class="token keyword">val</span> regex <span class="token operator">=</span> <span class="token string">&quot;\\d\\d&quot;</span><span class="token punctuation">.</span><span class="token function">toRegex</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

  <span class="token comment">// 삼중 따옴표는 역슬래쉬를 한번만 사용할 수 있다.</span>
  <span class="token keyword">val</span> regex2 <span class="token operator">=</span> <span class="token raw-string string">&quot;&quot;&quot;\d\d&quot;&quot;&quot;</span><span class="token punctuation">.</span><span class="token function">toRegex</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div></details> <h2 id="_4장-클래스-객체-인터페이스"><a href="#_4장-클래스-객체-인터페이스" class="header-anchor">#</a> 4장. 클래스, 객체, 인터페이스</h2> <h3 id="인터페이스와-클래스"><a href="#인터페이스와-클래스" class="header-anchor">#</a> 인터페이스와 클래스</h3> <details class="custom-block details"><summary>자세히</summary> <div class="language-kotlin line-numbers-mode"><pre class="language-kotlin"><code><span class="token keyword">interface</span> Clickable <span class="token punctuation">{</span>
    <span class="token keyword">fun</span> <span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token comment">// 자바 디폴트 메서드 같이 구현 정의 가능. (상태를 가질 순 없다.)</span>
    <span class="token keyword">fun</span> <span class="token function">showOff</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Clickable Interface&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// 구현, 상속은 :로 표현한다.</span>
<span class="token keyword">class</span> Button <span class="token operator">:</span> Clickable <span class="token punctuation">{</span>
    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">TODO</span><span class="token punctuation">(</span><span class="token string">&quot;Not yet implemented&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h4 id="자바에서-코틀린-인터페이스의-디폴트-메서드-구현"><a href="#자바에서-코틀린-인터페이스의-디폴트-메서드-구현" class="header-anchor">#</a> 자바에서 코틀린 인터페이스의 디폴트 메서드 구현</h4> <ul><li>자바는 8부터 디폴트 메서드를 제공하지만 코틀린은 자바6부터 호환성을 제공해야 한다.</li> <li>그래서 코틀린에서는 디폴트 메서드가 각 구현의클래스의 정적 메서드로 들어가게 된다.</li></ul> <h4 id="open-final-abstract-변경자"><a href="#open-final-abstract-변경자" class="header-anchor">#</a> open, final, abstract 변경자</h4> <ul><li>코틀린은 기본이 <code>final</code>이기 때문에 상속이 불가능하다.</li> <li>상속을 위해서 <code>open</code> 변경자를 명시해줘야 한다.
<ul><li>이는 메서드, 필드변수 모두 적용된다.</li></ul></li> <li>override 메서드는 자동으로 open이 적용되는데 명시적으로 final을 붙여 상속을 막을 수 있다.</li> <li><code>abstract</code>는 자바와 동일하게 추상 메서드를 의미한다.</li></ul> <h4 id="스마트-캐스트와-상속"><a href="#스마트-캐스트와-상속" class="header-anchor">#</a> 스마트 캐스트와 상속</h4> <ul><li>이전에 스마트 캐스팅을 위해선 클래스의 프로퍼티가 val이면서 커스텀 접근자를 구현하지 않아야 가능하다고 했다.</li> <li>이는 클래스에도 적용되기 때문에 만약 클래스가 open되어 있다면 스마트 캐스트는 불가하다.</li></ul></details> <h3 id="가시성-변경자"><a href="#가시성-변경자" class="header-anchor">#</a> 가시성 변경자</h3> <details class="custom-block details"><summary>자세히</summary> <ul><li>코틀린은 기본 가시성변경자가 public이며 default 접근자는 따로 존재하지 않는다.</li> <li>모듈 내부에서만 사용할 수 있는 internal 접근자를 따로
제공한다. <a href="https://kotlinlang.org/docs/reference/visibility-modifiers.html#modules" target="_blank" rel="noopener noreferrer">(모듈 범위 문서 참고)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>public, internal, private, protected의 가시성 변경자가 존재하며 protected를 제외하곤 최상위에 선언도 가능하다.</li></ul> <div class="language-kotlin line-numbers-mode"><pre class="language-kotlin"><code><span class="token keyword">interface</span> Focusable <span class="token punctuation">{</span>
  <span class="token keyword">fun</span> <span class="token function">showOff</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;I`m Focusable showOff&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">internal</span> <span class="token keyword">open</span> <span class="token keyword">class</span> TalkativeButton <span class="token operator">:</span> Focusable <span class="token punctuation">{</span>
  <span class="token keyword">private</span> <span class="token keyword">fun</span> <span class="token function">yell</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;yell&quot;</span><span class="token punctuation">)</span>
  <span class="token keyword">protected</span> <span class="token keyword">fun</span> <span class="token function">whisper</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;whisper&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// 확장하려는 클래스가 internal이므로 가시성이 수준이 같거나 더 낮아야 한다.</span>
<span class="token keyword">internal</span> <span class="token keyword">fun</span> TalkativeButton<span class="token punctuation">.</span><span class="token function">giveSpeech</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token comment">//    yell()  private이므로 호출 불가</span>
<span class="token comment">//    whisper()  자바와 다르게 protected는 오직 하위 클래스에서만 사용 가능 </span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h4 id="코틀린과-자바의-가시성-변경자"><a href="#코틀린과-자바의-가시성-변경자" class="header-anchor">#</a> 코틀린과 자바의 가시성 변경자</h4> <ul><li>public, protected, private은 자바의 바이트코드 안에서 그대로 유지</li> <li>하지만 private class같이 자바에서 구현이 불가능한 것들은 private 클래스를 패키지-전용 클래스로 컴파일한다.</li> <li>internal 변경자도 자바에서 지원되지 않는 변경자이므로 바이트코드상으론 public이 된다.
<ul><li>그러므로 자바에서 접근이 가능하지만 internal 멤버의 이름을 의도적으로 바꾸어 외부에서 사용을 하기 어렵게 컴파일한다.</li></ul></li></ul> <h4 id="프로퍼티-접근자-가시성-변경"><a href="#프로퍼티-접근자-가시성-변경" class="header-anchor">#</a> 프로퍼티 접근자 가시성 변경</h4> <div class="language-kotlin line-numbers-mode"><pre class="language-kotlin"><code><span class="token keyword">class</span> LengthCounter <span class="token punctuation">{</span>
    <span class="token keyword">var</span> counter<span class="token operator">:</span> Int <span class="token operator">=</span> <span class="token number">0</span>
        <span class="token keyword">private</span> <span class="token keyword">set</span> <span class="token comment">// set은 클래스 내부에서만 사용할 수 있게 함.</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></details> <h3 id="내부-클래스와-중첩-클래스"><a href="#내부-클래스와-중첩-클래스" class="header-anchor">#</a> 내부 클래스와 중첩 클래스</h3> <details class="custom-block details"><summary>자세히</summary> <ul><li>코틀린은 외부 클래스가 내부 클래스의 private 멤버에 접근이 불가능하다.</li></ul> <div class="language-kotlin line-numbers-mode"><pre class="language-kotlin"><code><span class="token keyword">class</span> Outer <span class="token punctuation">{</span>
    <span class="token keyword">class</span> Inner1 <span class="token punctuation">{</span>
        <span class="token comment">// 코틀린은 기본이 자바의 static 클래스처럼 외부의 참조가 없는 중첩 클래스이다.</span>
        <span class="token comment">// fun test() = this@Outer 외부 참조가 없으니 불가능 </span>
    <span class="token punctuation">}</span>
    
    <span class="token comment">// 내부 클래스를 위해 inner를 명시적으로 붙여줘야 한다.</span>
    <span class="token keyword">inner</span> <span class="token keyword">class</span> Inner2 <span class="token punctuation">{</span>
        <span class="token keyword">fun</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token label symbol">@Outer</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h4 id="코틀린-중첩-클래스를-유용하게-사용할-수-있는-방법"><a href="#코틀린-중첩-클래스를-유용하게-사용할-수-있는-방법" class="header-anchor">#</a> 코틀린 중첩 클래스를 유용하게 사용할 수 있는 방법</h4> <div class="language-kotlin line-numbers-mode"><pre class="language-kotlin"><code><span class="token comment">// 계층 확장 제한을 가능하게 해주는 봉인 클래스 (자신의 외부에 자신을 상속한 클래스를 둘 수 없음)</span>
<span class="token keyword">sealed</span> <span class="token keyword">class</span> Expr2 <span class="token punctuation">{</span>
    <span class="token keyword">class</span> <span class="token function">Num</span><span class="token punctuation">(</span><span class="token keyword">val</span> value<span class="token operator">:</span> Int<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">Expr2</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">class</span> <span class="token function">Sum</span><span class="token punctuation">(</span><span class="token keyword">val</span> left<span class="token operator">:</span> Expr2<span class="token punctuation">,</span> <span class="token keyword">val</span> right<span class="token operator">:</span> Expr2<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">Expr2</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// 봉인 클래스를 활용하면 when절에서 else를 사용하지 않아도 된다.</span>
<span class="token comment">// 새로운 중첩 클래스가 생겼을 때 해당 클래스에 대해 when절을 구현하지 않으면 컴파일 에러가 발생한다.</span>
<span class="token keyword">fun</span> <span class="token function">eval2</span><span class="token punctuation">(</span>e<span class="token operator">:</span> Expr2<span class="token punctuation">)</span><span class="token operator">:</span> Int <span class="token operator">=</span>
        <span class="token keyword">when</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">is</span> Expr2<span class="token punctuation">.</span>Num <span class="token operator">-&gt;</span> <span class="token function">TODO</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token keyword">is</span> Expr2<span class="token punctuation">.</span>Sum <span class="token operator">-&gt;</span> <span class="token function">TODO</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div></details> <h3 id="코틀린의-생성자"><a href="#코틀린의-생성자" class="header-anchor">#</a> 코틀린의 생성자</h3> <details class="custom-block details"><summary>자세히</summary> <ul><li>코틀린 클래스의 생성자는 크게 주 생성자와, 부 생성자로 구분할 수 있다.
<ul><li>주 생성자는 클래스 본문이 아닌 괄호 안에서 정의</li> <li>부 생성자는 클래스 본문 안에서 정의</li></ul></li></ul> <div class="language-kotlin line-numbers-mode"><pre class="language-kotlin"><code><span class="token comment">// 주 생성자</span>
<span class="token keyword">open</span> <span class="token keyword">class</span> <span class="token function">User</span> <span class="token punctuation">(</span><span class="token keyword">val</span> name<span class="token operator">:</span> String<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token comment">// 위를 풀어쓰면 아래와 같다.</span>
<span class="token keyword">class</span> User2 <span class="token keyword">constructor</span><span class="token punctuation">(</span>_name<span class="token operator">:</span> String<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">val</span> name<span class="token operator">:</span> String
    <span class="token keyword">init</span> <span class="token punctuation">{</span>
        name <span class="token operator">=</span> _name
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 부모의 생성자 호출은 아래와같이 가능하며 괄호를 붙여 부모 클래스 생성자를 호출해줘야 한다.</span>
<span class="token keyword">class</span> <span class="token function">SubUser</span><span class="token punctuation">(</span>name<span class="token operator">:</span> String<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">User</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><blockquote><p>코틀린은 모든 생성자 프로퍼티에 디폴트 값을 부여하면 자동으로 디폴트 생성자를 만들어준다.</p> <ul><li>코틀린은 디폴트 파라미터가 있기 때문에 대부분의 부 생성자 오버로딩이 필요 없다.</li></ul></blockquote></details> <h3 id="인터페이스-프로퍼티와-backing-field"><a href="#인터페이스-프로퍼티와-backing-field" class="header-anchor">#</a> 인터페이스 프로퍼티와 Backing Field</h3> <details class="custom-block details"><summary>자세히</summary> <ul><li>인터페이스에서 상태를 가질 순 없지만 <code>추상 프로퍼티 정의</code>가 가능하다.</li></ul> <div class="language-kotlin line-numbers-mode"><pre class="language-kotlin"><code><span class="token keyword">interface</span> Member <span class="token punctuation">{</span>
  <span class="token keyword">val</span> name<span class="token operator">:</span> String

  <span class="token comment">// 다른 프로퍼티를 활용하여 커스텀 접근자를 가지는 프로퍼티를 구현할 수는 있다.(상태를 가지면 안되므로 Backing Field가 존재 안함)</span>
  <span class="token keyword">val</span> listCharName<span class="token operator">:</span> Char
    <span class="token keyword">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> name<span class="token punctuation">.</span>lastChar
<span class="token punctuation">}</span>

<span class="token comment">// 추상 프로퍼티는 반드시 구현되어야 한다.</span>
<span class="token keyword">class</span> <span class="token function">PrivateMember</span><span class="token punctuation">(</span><span class="token keyword">override</span> <span class="token keyword">val</span> name<span class="token operator">:</span> String<span class="token punctuation">)</span> <span class="token operator">:</span> Member <span class="token punctuation">{</span><span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h4 id="커스텀-접근자의-backing-field"><a href="#커스텀-접근자의-backing-field" class="header-anchor">#</a> 커스텀 접근자의 Backing field</h4> <ul><li>프로퍼티는 값을 직접 저장하는 프로퍼티와 커스텀 접근자를 활용해 매번 새로운 값을 계산하는 프로퍼티가 존재한다.</li> <li>이 두가지 방법을 조합하여 값이 변경할 때 이전 값과 현재 저장할 값을 이용하여 원하는 로직을 수행하도록 할 수 있다.</li> <li>이를 위해 접근자 안에서 해당 프로퍼티의 Backing field에 접근할 수 있어야 한다.</li></ul> <div class="language-kotlin line-numbers-mode"><pre class="language-kotlin"><code><span class="token keyword">class</span> <span class="token function">AUser</span><span class="token punctuation">(</span><span class="token keyword">val</span> name<span class="token operator">:</span> String<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> address<span class="token operator">:</span> String <span class="token operator">=</span> <span class="token string">&quot;unselected&quot;</span>
    <span class="token keyword">set</span><span class="token punctuation">(</span>value<span class="token operator">:</span> String<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// backing field는 `field`로 접근가능 (get에서는 field를 참조할 수 있지만 읽기만 가능하다.)</span>
      <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;백킹 필드값(이전값): <span class="token interpolation variable">$field</span>, 새로운 값: <span class="token interpolation variable">$value</span>&quot;</span><span class="token punctuation">)</span>
      field <span class="token operator">=</span> value
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">fun</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">val</span> aUser <span class="token operator">=</span> <span class="token function">AUser</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span>
  aUser<span class="token punctuation">.</span>address <span class="token operator">=</span> <span class="token string">&quot;서울시&quot;</span> <span class="token comment">// setter 호출</span>
  aUser<span class="token punctuation">.</span>address <span class="token operator">=</span> <span class="token string">&quot;부산시&quot;</span> <span class="token comment">// setter 호출</span>
<span class="token comment">//    ## 출력 ##</span>
<span class="token comment">//    백킹 필드값(이전값): unselected, 새로운 값: 서울시</span>
<span class="token comment">//    백킹 필드값(이전값): 서울시, 새로운 값: 부산시</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h4 id="클라이언트-입장에서의-backing-field"><a href="#클라이언트-입장에서의-backing-field" class="header-anchor">#</a> 클라이언트 입장에서의 Backing Field</h4> <ul><li>해당 프로퍼티를 사용하는 클라이언트 입장에서는 Backing Field에 대해 알 필요가 없다.</li> <li>디폴트 접근자로 구현을 하더라도 코틀린 내부적으로 Backing Field를 생성해주기 때문이다.</li> <li>단, 직접 커스텀 접근자를 구현하였는데 거기서 Backing Field를 사용하지 않으면 Backing Field는 존재하지 않게 된다.</li></ul></details> <h3 id="data-class"><a href="#data-class" class="header-anchor">#</a> data class</h3> <details class="custom-block details"><summary>자세히</summary> <ul><li>JVM언어에서는 hash 컬렉션의 사용 방식으로 인해 equals, hashCode를 반드시 동시에 알맞게 구현해줘야 하는 규칙이 있다.
<ul><li>최적화를 위해 hashCode로 비교 후 equals로 한번 더 비교하기 때문이다.</li></ul></li> <li>이런 보일러 플레이트 같은 메서드들을 자동 구현해주는 data class가 존재한다. -&gt; <code>data class User(val name: String)</code></li></ul></details> <h3 id="클래스-위임-by"><a href="#클래스-위임-by" class="header-anchor">#</a> 클래스 위임: by</h3> <details class="custom-block details"><summary>자세히</summary> <ul><li>상속을 하지 않고 클래스에 새로운 동작을 추가하기 위해선 주로 <strong>데코레이터 패턴</strong>을 활용한다.</li> <li>데코레이터 패턴을 위해선 동일한 인터페이스를 구현해야하고, 관련되지 않은 모든 동작도 하나씩 위임해줘야 한다.</li> <li>코틀린은 언어적으로 이러한 위임을 간편히 할 수 있도록 제공해준다.</li></ul> <div class="language-kotlin line-numbers-mode"><pre class="language-kotlin"><code><span class="token comment">// 직접 구현하지 않으면 innerList로 전부 위임하도록 해준다.</span>
<span class="token keyword">class</span> DelegatingCollection<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span><span class="token punctuation">(</span>innerList<span class="token operator">:</span> Collection<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span> <span class="token operator">=</span> ArrayList<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">:</span> Collection<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span> <span class="token keyword">by</span> innerList <span class="token punctuation">{</span>
    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> Boolean <span class="token punctuation">{</span>
        <span class="token function">TODO</span><span class="token punctuation">(</span><span class="token string">&quot;Not yet implemented&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></details> <h3 id="object-키워드-클래스-선언과-동시에-인스턴스-생성-싱글톤-보장"><a href="#object-키워드-클래스-선언과-동시에-인스턴스-생성-싱글톤-보장" class="header-anchor">#</a> object 키워드: 클래스 선언과 동시에 인스턴스 생성(싱글톤 보장)</h3> <details class="custom-block details"><summary>자세히</summary> <ul><li>object 키워드는 클래스 선언과 동시에 인스턴스를 생성하여 싱글톤을 보장해준다.
<ul><li>주로 싱글톤, 익명 내부 클래스, 동반 객체에서 사용된다.</li></ul></li></ul> <div class="language-kotlin line-numbers-mode"><pre class="language-kotlin"><code><span class="token comment">// 싱글톤이면 충분한 것들에서 유용하게 사용된다.</span>
<span class="token keyword">object</span> StringComparator <span class="token operator">:</span> Comparator<span class="token operator">&lt;</span>String<span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">compare</span><span class="token punctuation">(</span>o1<span class="token operator">:</span> String<span class="token operator">?</span><span class="token punctuation">,</span> o2<span class="token operator">:</span> String<span class="token operator">?</span><span class="token punctuation">)</span><span class="token operator">:</span> Int <span class="token punctuation">{</span>
        <span class="token function">TODO</span><span class="token punctuation">(</span><span class="token string">&quot;Not yet implemented&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">data</span> <span class="token keyword">class</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token keyword">val</span> name<span class="token operator">:</span> String<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//  중접 객체로도 사용하며 외부에서 정적 메서드를 호출하는 거처럼 접근이 가능해진다.</span>
    <span class="token keyword">object</span> NameComparator <span class="token operator">:</span> Comparator<span class="token operator">&lt;</span>String<span class="token operator">&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">compare</span><span class="token punctuation">(</span>o1<span class="token operator">:</span> String<span class="token operator">?</span><span class="token punctuation">,</span> o2<span class="token operator">:</span> String<span class="token operator">?</span><span class="token punctuation">)</span><span class="token operator">:</span> Int <span class="token punctuation">{</span>
            <span class="token function">TODO</span><span class="token punctuation">(</span><span class="token string">&quot;Not yet implemented&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>

    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div></details> <h3 id="동반-객체"><a href="#동반-객체" class="header-anchor">#</a> 동반 객체</h3> <details class="custom-block details"><summary>자세히</summary> <ul><li>코틀린은 클래스 내부에서 static 메서드를 제공해주지 않는다.(최상위 함수와, 객체 선언이 가능해서)</li> <li>하지만 상황에 따라 클래스 내부에 private 접근자로 접근하기 위해 클래스 내부에 구현되어야 할 필요가 있다.</li> <li>이런경우 동반 객체를 활용하여 private 접근자에 접근이 가능하도록 할 수 있다.</li></ul> <div class="language-kotlin line-numbers-mode"><pre class="language-kotlin"><code><span class="token keyword">class</span> BUser <span class="token keyword">private</span> <span class="token keyword">constructor</span><span class="token punctuation">(</span><span class="token keyword">val</span> name<span class="token operator">:</span> String<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">companion</span> <span class="token keyword">object</span> <span class="token punctuation">{</span>
        <span class="token comment">// private 생성자로 접근가능, 사용처에선 static 메서드처럼 호출 가능</span>
        <span class="token keyword">fun</span> <span class="token function">newUser</span><span class="token punctuation">(</span>name<span class="token operator">:</span> String<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token function">BUser</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 동반객체도 인터페이스를 구현하여 다형성을 활용할 수 있다.</span>
<span class="token keyword">interface</span> JSONFactory<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">fun</span> <span class="token function">fromJSON</span><span class="token punctuation">(</span>jsonText<span class="token operator">:</span> String<span class="token punctuation">)</span><span class="token operator">:</span> T
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token function">CUser</span><span class="token punctuation">(</span><span class="token keyword">val</span> name<span class="token operator">:</span> String<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 동반 객체도 인터페이스를 구현할 수 있다.</span>
    <span class="token keyword">companion</span> <span class="token keyword">object</span> <span class="token operator">:</span> JSONFactory<span class="token operator">&lt;</span>CUser<span class="token operator">&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">fromJSON</span><span class="token punctuation">(</span>jsonText<span class="token operator">:</span> String<span class="token punctuation">)</span><span class="token operator">:</span> CUser <span class="token punctuation">{</span>
            <span class="token function">TODO</span><span class="token punctuation">(</span><span class="token string">&quot;Not yet implemented&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">fun</span> <span class="token operator">&lt;</span>T<span class="token operator">&gt;</span> <span class="token function">loadFromJSON</span><span class="token punctuation">(</span>factory<span class="token operator">:</span> JSONFactory<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token operator">:</span> T <span class="token punctuation">{</span>
    <span class="token function">TODO</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">fun</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 동반 객체가 구현한 인터페이스를 파라미터로 가지는 메서드에 CUser를 넘겨 다형성 활용 가능</span>
    <span class="token function">loadFromJSON</span><span class="token punctuation">(</span>CUser<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><h4 id="동반-객체-확장"><a href="#동반-객체-확장" class="header-anchor">#</a> 동반 객체 확장</h4> <div class="language-kotlin line-numbers-mode"><pre class="language-kotlin"><code><span class="token keyword">class</span> <span class="token function">DUser</span><span class="token punctuation">(</span><span class="token keyword">val</span> name<span class="token operator">:</span> String<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 확장 함수를 사용하기 위해서 빈 동반 객체 정의가 필요</span>
    <span class="token keyword">companion</span> <span class="token keyword">object</span>
<span class="token punctuation">}</span>


<span class="token comment">// 외부에서 동반 객체의 확장 함수를 구현해 관심사를 분리할 수 있다.</span>
<span class="token keyword">fun</span> DUser<span class="token punctuation">.</span>Companion<span class="token punctuation">.</span><span class="token function">fromJSON</span><span class="token punctuation">(</span>json<span class="token operator">:</span> String<span class="token punctuation">)</span><span class="token operator">:</span> DUser <span class="token punctuation">{</span>
    <span class="token function">TODO</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div></details> <h3 id="객체-식-익명-내부-클래스"><a href="#객체-식-익명-내부-클래스" class="header-anchor">#</a> 객체 식: 익명 내부 클래스</h3> <details class="custom-block details"><summary>자세히</summary> <div class="language-kotlin line-numbers-mode"><pre class="language-kotlin"><code><span class="token keyword">interface</span> Sender <span class="token punctuation">{</span>
    <span class="token keyword">fun</span> <span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">fun</span> <span class="token function">sendSend</span><span class="token punctuation">(</span>sender<span class="token operator">:</span> Sender<span class="token punctuation">)</span> <span class="token operator">=</span> sender<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">fun</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">sendSend</span><span class="token punctuation">(</span><span class="token keyword">object</span> <span class="token operator">:</span> Sender <span class="token punctuation">{</span>
        <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token function">TODO</span><span class="token punctuation">(</span><span class="token string">&quot;Not yet implemented&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><ul><li><code>object : className() {}</code> 로 익명 내부 클래스를 정의할 수 있다.</li> <li>주로 메서드에 넘겨줄 객체를 즉시 생성할 때 사용된다.
<ul><li>이 경우 object는 싱글톤을 보장하지 않는다. 호출될 때 마다 새로운 object를 생성한다.
:::</li></ul></li></ul> <h2 id="_5장-람다로-프로그래밍"><a href="#_5장-람다로-프로그래밍" class="header-anchor">#</a> 5장. 람다로 프로그래밍</h2> <h3 id="람다와-컬렉션"><a href="#람다와-컬렉션" class="header-anchor">#</a> 람다와 컬렉션</h3> <details class="custom-block details"><summary>자세히</summary> <div class="language-kotlin line-numbers-mode"><pre class="language-kotlin"><code><span class="token keyword">fun</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">val</span> items <span class="token operator">=</span> <span class="token function">listOf</span><span class="token punctuation">(</span><span class="token function">Item</span><span class="token punctuation">(</span><span class="token string">&quot;item1&quot;</span><span class="token punctuation">,</span> <span class="token number">10000</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">Item</span><span class="token punctuation">(</span><span class="token string">&quot;item2&quot;</span><span class="token punctuation">,</span> <span class="token number">20000</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token function">println</span><span class="token punctuation">(</span>items<span class="token punctuation">.</span><span class="token function">maxByOrNull</span> <span class="token punctuation">{</span> it<span class="token punctuation">.</span>price <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">// 스트림 원소를 it으로 바로 참조 가능하다.</span>
  <span class="token function">println</span><span class="token punctuation">(</span>items<span class="token punctuation">.</span><span class="token function">maxByOrNull</span><span class="token punctuation">(</span>Item<span class="token operator">::</span>price<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 메서드 참조도 가능</span>

  <span class="token comment">// 람다를 변수에 직접 할당할 수 있다.</span>
  <span class="token keyword">val</span> sum <span class="token operator">=</span> <span class="token punctuation">{</span> x<span class="token operator">:</span> Int<span class="token punctuation">,</span> y<span class="token operator">:</span> Int <span class="token operator">-&gt;</span> x <span class="token operator">+</span> y <span class="token punctuation">}</span>

  <span class="token comment">// { println(&quot;Hello World&quot;) }()</span>
  <span class="token comment">//  람다를 위와 같이 호출할 수도 있지만 더 간단하게 run 함수를 활용하면 람다 본문을 호출할 수 있다.</span>
  run <span class="token punctuation">{</span> <span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Hello World&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><ul><li>자바와 다르게 코틀린은 람다에서 final이 아닌 변수에 접근이 가능하다.
<ul><li>컴파일러가 특별한 wrapper로 감싸서 참조는 그대로두고 내부의 값을 변경할 수 있도록 해준다.
:::</li></ul></li></ul> <h3 id="컬렉션-함수형-api"><a href="#컬렉션-함수형-api" class="header-anchor">#</a> 컬렉션 함수형 API</h3> <details class="custom-block details"><summary>자세히</summary> <div class="language-kotlin line-numbers-mode"><pre class="language-kotlin"><code><span class="token keyword">fun</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">val</span> items <span class="token operator">=</span> <span class="token function">listOf</span><span class="token punctuation">(</span><span class="token function">Item</span><span class="token punctuation">(</span><span class="token string">&quot;item1&quot;</span><span class="token punctuation">,</span> <span class="token number">10000</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">Item</span><span class="token punctuation">(</span><span class="token string">&quot;item2&quot;</span><span class="token punctuation">,</span> <span class="token number">20000</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  items<span class="token punctuation">.</span><span class="token function">all</span> <span class="token punctuation">{</span> it<span class="token punctuation">.</span>price <span class="token operator">&lt;</span> <span class="token number">10000</span> <span class="token punctuation">}</span> <span class="token comment">// 모두 만족</span>
  items<span class="token punctuation">.</span><span class="token function">any</span> <span class="token punctuation">{</span> it<span class="token punctuation">.</span>price <span class="token operator">&lt;</span> <span class="token number">10000</span> <span class="token punctuation">}</span> <span class="token comment">// 하나라도 만족하는지?</span>
  items<span class="token punctuation">.</span><span class="token function">count</span> <span class="token punctuation">{</span> it<span class="token punctuation">.</span>price <span class="token operator">&lt;</span> <span class="token number">10000</span> <span class="token punctuation">}</span> <span class="token comment">// 키운팅</span>

  <span class="token keyword">val</span> itemsList <span class="token operator">=</span> <span class="token function">listOf</span><span class="token punctuation">(</span>items<span class="token punctuation">,</span> items<span class="token punctuation">)</span>
  <span class="token keyword">val</span> flattedItems <span class="token operator">=</span> itemsList<span class="token punctuation">.</span><span class="token function">flatten</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 단순히 펼치려면 flatten 쓰면된다.</span>

  <span class="token keyword">val</span> maps <span class="token operator">=</span> <span class="token function">mapOf</span><span class="token punctuation">(</span><span class="token number">1</span> <span class="token keyword">to</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span> <span class="token number">2</span> <span class="token keyword">to</span> <span class="token string">&quot;2&quot;</span><span class="token punctuation">)</span>
  maps<span class="token punctuation">.</span><span class="token function">mapValues</span> <span class="token punctuation">{</span> it <span class="token operator">+</span> it <span class="token punctuation">}</span> <span class="token comment">// mapValues 가능 </span>
  maps<span class="token punctuation">.</span><span class="token function">mapKeys</span> <span class="token punctuation">{</span> it <span class="token operator">+</span> <span class="token number">1</span> <span class="token punctuation">}</span> <span class="token comment">// mapKeys 가능</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><ul><li>기본적인 자바 스트림에서 제공하는 filter, map 등등을 제공한다.</li></ul></details></details></details> <h3 id="지연-계산을-위한-시퀀스"><a href="#지연-계산을-위한-시퀀스" class="header-anchor">#</a> 지연 계산을 위한 시퀀스</h3> <details class="custom-block details"><summary>자세히</summary> <div class="language-kotlin line-numbers-mode"><pre class="language-kotlin"><code><span class="token keyword">fun</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">val</span> items <span class="token operator">=</span> <span class="token function">listOf</span><span class="token punctuation">(</span><span class="token function">Item</span><span class="token punctuation">(</span><span class="token string">&quot;item1&quot;</span><span class="token punctuation">,</span> <span class="token number">10000</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">Item</span><span class="token punctuation">(</span><span class="token string">&quot;item2&quot;</span><span class="token punctuation">,</span> <span class="token number">20000</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

  <span class="token comment">// 기본 확장 함수는 지연 계산을 하지 않는다.</span>
  items<span class="token punctuation">.</span><span class="token function">filter</span> <span class="token punctuation">{</span> it<span class="token punctuation">.</span>price <span class="token operator">&lt;</span> <span class="token number">1000</span> <span class="token punctuation">}</span>
          <span class="token punctuation">.</span><span class="token function">map</span> <span class="token punctuation">{</span> it<span class="token punctuation">.</span>price <span class="token punctuation">}</span>

  <span class="token comment">// 지연 계산을 위해 asSequence를 이용하면된다.</span>
  <span class="token comment">// - 자바 스트림과 동일하므로 stream을 써도된다. 자바 8 이전의 호환성을 위해 asSequence가 생김</span>
  items<span class="token punctuation">.</span><span class="token function">asSequence</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
          <span class="token punctuation">.</span><span class="token function">filter</span> <span class="token punctuation">{</span> it<span class="token punctuation">.</span>price <span class="token operator">&lt;</span> <span class="token number">1000</span> <span class="token punctuation">}</span>
          <span class="token punctuation">.</span><span class="token function">map</span> <span class="token punctuation">{</span> it<span class="token punctuation">.</span>price <span class="token punctuation">}</span>
          <span class="token punctuation">.</span><span class="token function">toList</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

  <span class="token comment">// 무한 시퀀스를 만들 수 있다.</span>
  <span class="token function">generateSequence</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> it <span class="token operator">+</span> <span class="token number">1</span> <span class="token punctuation">}</span>
          <span class="token punctuation">.</span><span class="token function">takeWhile</span> <span class="token punctuation">{</span> it <span class="token operator">&lt;=</span> <span class="token number">100</span> <span class="token punctuation">}</span>
          <span class="token punctuation">.</span><span class="token function">forEach</span> <span class="token punctuation">{</span> <span class="token function">println</span><span class="token punctuation">(</span>it<span class="token punctuation">)</span> <span class="token punctuation">}</span>


  <span class="token comment">// 확장함수와 무한 시퀀스를 활용하여 부모 파일이 hidden일 때 까지 계속 탐색하도록 함수를 만듬</span>
  <span class="token keyword">fun</span> File<span class="token punctuation">.</span><span class="token function">isInsideHiddenDirectory</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span>
          <span class="token function">generateSequence</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> it<span class="token punctuation">.</span>parentFile <span class="token punctuation">}</span>
                  <span class="token comment">// hidden file을 찾으면 멈춘다.</span>
                  <span class="token punctuation">.</span><span class="token function">any</span> <span class="token punctuation">{</span> it<span class="token punctuation">.</span>isHidden <span class="token punctuation">}</span>

  <span class="token function">File</span><span class="token punctuation">(</span><span class="token string">&quot;/Users/dongmyeonglee/Projects/simple-summary/java-sample/src/main/java/com/example/demo/kotlin/lambda.kt&quot;</span><span class="token punctuation">)</span>
          <span class="token punctuation">.</span><span class="token function">isInsideHiddenDirectory</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><ul><li>기본 함수형 API는 지연 계산을 하지 않으므로 지연 계산이 필요하다면 <code>asSequence()</code> or <code>stream()</code>를 사용하면 된다.</li></ul></details> <h3 id="람다-vs-익명-클래스"><a href="#람다-vs-익명-클래스" class="header-anchor">#</a> 람다 vs 익명 클래스</h3> <details class="custom-block details"><summary>자세히</summary> <ul><li>람다와 익명 클래스는 간결성에서도 차이가 나지만, 재사용에서도 차이가 있다.</li> <li>익명 클래스는 생성마다 새로운 인스턴스를 만들지만 람다는 재사용한다.</li></ul> <blockquote><p>책 기준으로 inline 되지 않은 람다식은 구버전 호환을 위해 익명 클래스로 만들어짐.</p> <ul><li>자바 8부터 제공하는 람다를 사용하도록 변경될 예정이다.</li> <li>대부분 기본 확장함수는 inline을 활용하므로 익명 클래스를 만들진 않는다.
:::</li></ul></blockquote> <h3 id="sam-생성자-람다를-함수형-인터페이스로-명시적-변경"><a href="#sam-생성자-람다를-함수형-인터페이스로-명시적-변경" class="header-anchor">#</a> SAM 생성자: 람다를 함수형 인터페이스로 명시적 변경</h3> <details class="custom-block details"><summary>자세히</summary> <div class="language-kotlin line-numbers-mode"><pre class="language-kotlin"><code><span class="token comment">// Runnable 같은 함수형 인터페이스는 SAM 생성자를 활용하자</span>
<span class="token keyword">fun</span> <span class="token function">createRunable</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> Runnable <span class="token punctuation">{</span> <span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;RUN!&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">}</span>
<span class="token keyword">val</span> runnable <span class="token operator">=</span> Runnable <span class="token punctuation">{</span> <span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;RUN!&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ul><li>함수형 인터페이스의 인스턴스를 반환하는 메서드가 있으면 람다로 반환이 불가능하고 SAM 생성자로 감싸주어야 한다.</li> <li></li></ul></details></details> <h3 id="수신-객체-지정-람다-with-apply"><a href="#수신-객체-지정-람다-with-apply" class="header-anchor">#</a> 수신 객체 지정 람다: with, apply</h3> <details class="custom-block details"><summary>자세히</summary> <h4 id="with-함수-수신-객체-지정-람다"><a href="#with-함수-수신-객체-지정-람다" class="header-anchor">#</a> with 함수(수신 객체 지정 람다)</h4> <div class="language-kotlin line-numbers-mode"><pre class="language-kotlin"><code><span class="token keyword">fun</span> <span class="token function">buildString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> String <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">with</span><span class="token punctuation">(</span><span class="token function">StringBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// with 활용</span>
    <span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;Hello&quot;</span><span class="token punctuation">)</span>
    <span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot; &quot;</span><span class="token punctuation">)</span>
    <span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;World&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">fun</span> <span class="token function">buildString2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> String <span class="token operator">=</span>
        <span class="token function">with</span><span class="token punctuation">(</span><span class="token function">StringBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// with 활용</span>
          <span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;Hello&quot;</span><span class="token punctuation">)</span>
          <span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot; &quot;</span><span class="token punctuation">)</span>
          <span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;World&quot;</span><span class="token punctuation">)</span>
          <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 반환 값</span>
        <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><ul><li>어떤 객체를 람다식에서 사용할 때 객체의 이름을 계속해서 반복하지 않도록 할 수 있다.</li></ul> <h4 id="apply-함수-수신-객체-반환-람다"><a href="#apply-함수-수신-객체-반환-람다" class="header-anchor">#</a> apply 함수(수신 객체 반환 람다)</h4> <div class="language-kotlin line-numbers-mode"><pre class="language-kotlin"><code><span class="token keyword">fun</span> <span class="token function">buildString3</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> String <span class="token operator">=</span>
        <span class="token function">StringBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">apply</span> <span class="token punctuation">{</span>
          <span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;Hello&quot;</span><span class="token punctuation">)</span>
          <span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot; &quot;</span><span class="token punctuation">)</span>
          <span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;World&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 수신 객체를 반환하므로 toString을 호출</span>


<span class="token keyword">class</span> <span class="token function">User4</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> name<span class="token operator">:</span> String <span class="token operator">=</span> <span class="token string">&quot;&quot;</span>
    <span class="token keyword">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">TODO</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token keyword">var</span> age<span class="token operator">:</span> Int <span class="token operator">=</span> <span class="token number">0</span>
    <span class="token keyword">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">TODO</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>


<span class="token comment">// apply를 통해 빌더처럼 사용 가능(굳이?)</span>
<span class="token keyword">fun</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">User4</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">apply</span> <span class="token punctuation">{</span>
    name <span class="token operator">=</span> <span class="token string">&quot;DEXTER&quot;</span>
    age <span class="token operator">=</span> <span class="token number">13</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div></details> <h2 id="_6장-코틀린-타입-시스템"><a href="#_6장-코틀린-타입-시스템" class="header-anchor">#</a> 6장. 코틀린 타입 시스템</h2> <ul><li>코틀린은 nullable 타입, 읽기 전용 컬렉션등 새로운 타입 시스템을 도입했다.</li> <li>배열과 같이 자바 타입 시스템에서 불필요한 부분들을 제거하였다.</li></ul> <h3 id="nullability"><a href="#nullability" class="header-anchor">#</a> Nullability</h3> <details class="custom-block details"><summary>자세히</summary> <ul><li>NPE를 피할 수 있게 돕기 위한 코틀린 타입 시스템의 특성으로 컴파일 시점에 null 에러를 파악할 수 있도록 해준다.</li> <li>코틀린은 기본 타입이 null이 불가능하며, nullable 타입을 위해 ?를 붙이면 됨.</li></ul></details> <h3 id="앨비스-연산자"><a href="#앨비스-연산자" class="header-anchor">#</a> 앨비스 연산자 ?:</h3> <details class="custom-block details"><summary>자세히</summary> <div class="language-kotlin line-numbers-mode"><pre class="language-kotlin"><code><span class="token keyword">data</span> <span class="token keyword">class</span> <span class="token function">Address</span><span class="token punctuation">(</span><span class="token keyword">val</span> city<span class="token operator">:</span> String<span class="token punctuation">,</span> <span class="token keyword">val</span> country<span class="token operator">:</span> String<span class="token punctuation">)</span>

<span class="token keyword">data</span> <span class="token keyword">class</span> <span class="token function">Company</span><span class="token punctuation">(</span><span class="token keyword">val</span> name<span class="token operator">:</span> String<span class="token punctuation">,</span> <span class="token keyword">val</span> address<span class="token operator">:</span> Address<span class="token operator">?</span><span class="token punctuation">)</span>

<span class="token keyword">data</span> <span class="token keyword">class</span> <span class="token function">Employee</span><span class="token punctuation">(</span><span class="token keyword">val</span> name<span class="token operator">:</span> String<span class="token punctuation">,</span> <span class="token keyword">val</span> company<span class="token operator">:</span> Company<span class="token operator">?</span><span class="token punctuation">)</span>

<span class="token keyword">fun</span> <span class="token function">print</span><span class="token punctuation">(</span>employee<span class="token operator">:</span> Employee<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 엘비스 연산자로 throw도 가능</span>
  <span class="token keyword">val</span> address <span class="token operator">=</span> employee<span class="token operator">?</span><span class="token punctuation">.</span>company<span class="token operator">?</span><span class="token punctuation">.</span>address <span class="token operator">?:</span> <span class="token keyword">throw</span> <span class="token function">IllegalArgumentException</span><span class="token punctuation">(</span><span class="token string">&quot;Need Address&quot;</span><span class="token punctuation">)</span>
  <span class="token function">with</span><span class="token punctuation">(</span>address<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;city: <span class="token interpolation variable">$city</span>, countyL <span class="token interpolation variable">$country</span>&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><ul><li>어떤 값이 null일 떄 그 값대신 사용할 기본 값을 지정할 수 있다.</li> <li><code>val t: String = str ?: &quot;Default</code></li></ul></details> <h3 id="안전한-캐스팅-as"><a href="#안전한-캐스팅-as" class="header-anchor">#</a> 안전한 캐스팅 as?</h3> <details class="custom-block details"><summary>자세히</summary> <div class="language-kotlin line-numbers-mode"><pre class="language-kotlin"><code><span class="token keyword">fun</span> <span class="token function">findAddressCity</span><span class="token punctuation">(</span>any<span class="token operator">:</span> Any<span class="token punctuation">)</span><span class="token operator">:</span> String <span class="token punctuation">{</span>
  <span class="token keyword">val</span> address <span class="token operator">=</span> any <span class="token keyword">as</span><span class="token operator">?</span> Address <span class="token operator">?:</span> <span class="token keyword">throw</span> <span class="token function">IllegalArgumentException</span><span class="token punctuation">(</span><span class="token string">&quot;It is not address&quot;</span><span class="token punctuation">)</span>
  <span class="token keyword">return</span> address<span class="token punctuation">.</span>city
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ul><li>코틀린은 as?를 통해 ClassCastException이 발생하지 않도록 할 수 있다.</li></ul></details> <h3 id="null-아님-단언"><a href="#null-아님-단언" class="header-anchor">#</a> null 아님 단언: !!</h3> <ul><li>!!는 null이 아님을 확신할 떄 사용하는 것으로 NPE를 감수할 수 있을 때 사용한다.</li></ul> <h3 id="let-함수"><a href="#let-함수" class="header-anchor">#</a> let 함수</h3> <details class="custom-block details"><summary>자세히</summary> <div class="language-kotlin line-numbers-mode"><pre class="language-kotlin"><code><span class="token keyword">fun</span> <span class="token function">sendEmail</span><span class="token punctuation">(</span>message<span class="token operator">:</span> String<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token function">print</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span>

<span class="token keyword">fun</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> email<span class="token operator">:</span> String<span class="token operator">?</span> <span class="token operator">=</span> <span class="token string">&quot;email&quot;</span>

  <span class="token comment">// null 아니므로 함수 호출 O</span>
  email<span class="token operator">?</span><span class="token punctuation">.</span><span class="token function">let</span> <span class="token punctuation">{</span> <span class="token function">sendEmail</span><span class="token punctuation">(</span>it<span class="token punctuation">)</span> <span class="token punctuation">}</span>

  email <span class="token operator">=</span> <span class="token keyword">null</span>

  <span class="token comment">// null 이므로 함수 호출 X</span>
  email<span class="token operator">?</span><span class="token punctuation">.</span><span class="token function">let</span> <span class="token punctuation">{</span> <span class="token function">sendEmail</span><span class="token punctuation">(</span>it<span class="token punctuation">)</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><ul><li>nullable한 타입의 값일 때 null이 불가능한 함수의 파라미터로 넘기려고 할 때 let을 활용하면 된다.</li></ul></details> <h3 id="null-불가능-타입의-지연-초기화"><a href="#null-불가능-타입의-지연-초기화" class="header-anchor">#</a> null 불가능 타입의 지연 초기화</h3> <details class="custom-block details"><summary>자세히</summary> <div class="language-kotlin line-numbers-mode"><pre class="language-kotlin"><code><span class="token keyword">class</span> LateInit <span class="token punctuation">{</span>
  <span class="token keyword">private</span> <span class="token keyword">lateinit</span> <span class="token keyword">var</span> kotlinService<span class="token operator">:</span> Any
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ul><li>null이 불가능한 타입을 사용하지만 상황에 따라 지연 초기화가 필요할 때가 존재한다.</li> <li>그럴땐 lateinit을 활용하면 null이 불가능한 타입을 사용할 수 있다.
<ul><li><code>프로퍼티 초기화전에 접근 시 예외가 발생한다.</code>
:::</li></ul></li></ul> <h3 id="타입-파라미터와-nullable"><a href="#타입-파라미터와-nullable" class="header-anchor">#</a> 타입 파라미터와 nullable</h3> <details class="custom-block details"><summary>자세히</summary> <div class="language-kotlin line-numbers-mode"><pre class="language-kotlin"><code><span class="token comment">// 타입 파라미터는 유일하게 Any?로 추론되므로 nullable하다.</span>
<span class="token keyword">fun</span> <span class="token operator">&lt;</span>T<span class="token operator">&gt;</span> <span class="token function">some1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> T <span class="token operator">=</span> <span class="token function">TODO</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">// 상한을 두어 null이 불가능하게 할 수도 있다.</span>
<span class="token keyword">fun</span> <span class="token operator">&lt;</span>T <span class="token operator">:</span> Any<span class="token operator">&gt;</span> <span class="token function">some2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> T <span class="token operator">=</span> <span class="token function">TODO</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></details></details> <h3 id="플랫폼-타입"><a href="#플랫폼-타입" class="header-anchor">#</a> 플랫폼 타입</h3> <details class="custom-block details"><summary>자세히</summary> <ul><li>코틀린이 null에 대한 정보를 알수 없는 타입으로 처리를 개발자에게 전적으로 맡긴다.</li> <li><strong>오직 자바에서 가져온 타입만 플랫폼 타입이 될 수 있다.</strong> <ul><li>즉 자바에서 가져온 타입을 쓸 땐 null에 대해 주의를 기울여야 한다.</li></ul></li></ul> <h4 id="왜-플랫폼-타입이-생겼나"><a href="#왜-플랫폼-타입이-생겼나" class="header-anchor">#</a> 왜 플랫폼 타입이 생겼나?</h4> <ul><li>만약 자바타입을 모두 Nullable 타입으로 취급했다면 컬렉션을 사용할 때 ArrayList&lt;String?&gt;? 이런식으로 ?를 남발해야 한다.</li> <li>모든 자바타입에 null 검사를 하는건 null 안정성보다 비용이 더 크기 때문에 플랫폼 타입을 두어 개발자가 처리할 수 있도록 하였다.</li></ul> <blockquote><p>실제로 null인 플랫폼 타입을 null 불가능한 타입으로 변환을 시도하면 런타임 에러가 발생할 수 있다.</p></blockquote> <h4 id="자바-메서드-오버라이드"><a href="#자바-메서드-오버라이드" class="header-anchor">#</a> 자바 메서드 오버라이드</h4> <ul><li>자바 메서드를 오버라이드하고, 메서드 변수가 null 불가능한 타입으로 선언된다면 null 아님을 단언하는 validation을 자동으로 추가해준다.</li></ul></details> <h3 id="코틀린의-원시타입"><a href="#코틀린의-원시타입" class="header-anchor">#</a> 코틀린의 원시타입</h3> <details class="custom-block details"><summary>자세히</summary> <ul><li>코틀린은 원시 타입과 래퍼 타입의 구분이 없다. 코틀린 내부적으로 런타임에 가장 효율적인 방식으로 처리한다.
<ul><li>대부분의 Int 타입은 자바 int로 컴파일되며, 컬렉션이나 제네릭 같은곳에서만 래퍼 객체를 사용한다.
:::</li></ul></li></ul> <h3 id="any-any-최상위-타입"><a href="#any-any-최상위-타입" class="header-anchor">#</a> Any, Any?: 최상위 타입</h3> <ul><li>자바의 Object와 비슷하다. 즉 Any는 자바에서 Object로 컴파일 된다.</li></ul> <h3 id="unit"><a href="#unit" class="header-anchor">#</a> Unit</h3> <ul><li>자바의 void와 같은 기능을 한다.</li></ul> <h3 id="nothing"><a href="#nothing" class="header-anchor">#</a> Nothing</h3> <details class="custom-block details"><summary>자세히</summary> <div class="language-kotlin line-numbers-mode"><pre class="language-kotlin"><code><span class="token comment">// 정상적으로 끝날 수 없는 함수</span>
<span class="token keyword">fun</span> <span class="token function">fail</span><span class="token punctuation">(</span>message<span class="token operator">:</span> String<span class="token punctuation">)</span><span class="token operator">:</span> Nothing <span class="token punctuation">{</span>
  <span class="token keyword">throw</span> <span class="token function">RuntimeException</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">fun</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// fail은 정상적으로 끝나지 않는 함수임을 알수 있으므로 country가 null이 아님을 확신할 수 있다.</span>
  <span class="token keyword">val</span> country <span class="token operator">=</span> <span class="token function">Address</span><span class="token punctuation">(</span><span class="token string">&quot;city&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;country&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>country <span class="token operator">?:</span> <span class="token function">fail</span><span class="token punctuation">(</span><span class="token string">&quot;No City&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><ul><li>Nothing 타입은 오직 반환 타입으로만 쓸 수 있으며 <code>Nothing을 반환하는 함수는 정상적으로 끝나지 않음을 의미한다.</code></li></ul></details></details> <h3 id="코틀린과-자바-컬렉션"><a href="#코틀린과-자바-컬렉션" class="header-anchor">#</a> 코틀린과 자바 컬렉션</h3> <details class="custom-block details"><summary>자세히</summary> <ul><li>코틀린의 모든 컬렉션은 자바 컬렉션 인터페이스의 구현체이므로 언제든지 서로 오갈 수 있다.</li> <li>코틀린은 자바 컬렉션을 구현했지만 읽기 전용 클래스와 변경 가능 컬렉션(MutableCollection)을 분리했다.</li></ul></details> <h3 id="배열"><a href="#배열" class="header-anchor">#</a> 배열</h3> <details class="custom-block details"><summary>자세히</summary> <div class="language-kotlin line-numbers-mode"><pre class="language-kotlin"><code><span class="token keyword">fun</span> <span class="token function">main</span><span class="token punctuation">(</span>args<span class="token operator">:</span> Array<span class="token operator">&lt;</span>String<span class="token operator">&gt;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// array index for</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span>index <span class="token keyword">in</span> args<span class="token punctuation">.</span>indices<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// list -&gt; array</span>
  <span class="token function">listOf</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toIntArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

  <span class="token comment">// array도 람다식으로 생성 가능</span>
  <span class="token keyword">val</span> array<span class="token operator">:</span> Array<span class="token operator">&lt;</span>String<span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token function">Array</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> it<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">}</span>
  <span class="token function">IntArray</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>
  <span class="token function">intArrayOf</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span>

  <span class="token comment">// array map도 가능하며 결과를 List가 됨</span>
  <span class="token keyword">val</span> map<span class="token operator">:</span> List<span class="token operator">&lt;</span>String<span class="token operator">&gt;</span> <span class="token operator">=</span> array<span class="token punctuation">.</span><span class="token function">map</span> <span class="token punctuation">{</span> it <span class="token operator">+</span> <span class="token number">1</span> <span class="token punctuation">}</span>

  <span class="token comment">// index, element for문도 가능하다.</span>
  array<span class="token punctuation">.</span><span class="token function">forEachIndexed</span> <span class="token punctuation">{</span> index<span class="token punctuation">,</span> element <span class="token operator">-&gt;</span> <span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;index: <span class="token interpolation variable">$index</span>, value: <span class="token interpolation variable">$element</span>&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><ul><li>코틀린은 배열에 대해서도 다양한 api를 제공해준다.</li></ul></details> <h2 id="_7장-연산자-오버로딩과-기타-관례"><a href="#_7장-연산자-오버로딩과-기타-관례" class="header-anchor">#</a> 7장. 연산자 오버로딩과 기타 관례</h2> <h3 id="산술-연산자-오버로딩"><a href="#산술-연산자-오버로딩" class="header-anchor">#</a> 산술 연산자 오버로딩</h3> <details class="custom-block details"><summary>자세히</summary> <div class="language-kotlin line-numbers-mode"><pre class="language-kotlin"><code><span class="token comment">/**
 * a * b = times
 * a / b = div
 * a % b = mod(rem)
 * a + b = plus
 * a - b = minus
 *
 * 연산자 우선순위는 숫자 형태와 동일하게 적용된다.
 */</span>
<span class="token keyword">data</span> <span class="token keyword">class</span> <span class="token function">Point</span><span class="token punctuation">(</span><span class="token keyword">val</span> x<span class="token operator">:</span> Int<span class="token punctuation">,</span> <span class="token keyword">val</span> y<span class="token operator">:</span> Int<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 연산자 오버로딩은 opertator를 붙여줘야 한다.</span>
  <span class="token keyword">operator</span> <span class="token keyword">fun</span> <span class="token function">plus</span><span class="token punctuation">(</span>other<span class="token operator">:</span> Point<span class="token punctuation">)</span><span class="token operator">:</span> Point <span class="token operator">=</span> <span class="token function">Point</span><span class="token punctuation">(</span>x <span class="token operator">+</span> other<span class="token punctuation">.</span>x<span class="token punctuation">,</span> y <span class="token operator">+</span> other<span class="token punctuation">.</span>y<span class="token punctuation">)</span>

  <span class="token comment">// 연산자 오버로딩도 오버로딩이 가능하므로 다양하게 만들 수 있다.</span>
  <span class="token keyword">operator</span> <span class="token keyword">fun</span> <span class="token function">plus</span><span class="token punctuation">(</span>number<span class="token operator">:</span> Int<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token function">Point</span><span class="token punctuation">(</span>x <span class="token operator">+</span> number<span class="token punctuation">,</span> y <span class="token operator">+</span> number<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// 확장 함수로도 가능하다.</span>
<span class="token keyword">operator</span> <span class="token keyword">fun</span> Point<span class="token punctuation">.</span><span class="token function">minus</span><span class="token punctuation">(</span>other<span class="token operator">:</span> Point<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token function">Point</span><span class="token punctuation">(</span>x <span class="token operator">-</span> other<span class="token punctuation">.</span>x<span class="token punctuation">,</span> y <span class="token operator">-</span> other<span class="token punctuation">.</span>y<span class="token punctuation">)</span>

<span class="token comment">// 연산자 오버로딩 파라미터가 꼭 같을 필요가 없다.</span>
<span class="token keyword">operator</span> <span class="token keyword">fun</span> Point<span class="token punctuation">.</span><span class="token function">times</span><span class="token punctuation">(</span>scale<span class="token operator">:</span> Double<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token function">Point</span><span class="token punctuation">(</span><span class="token punctuation">(</span>x <span class="token operator">*</span> scale<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>y <span class="token operator">*</span> scale<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment">// 교환 법칙은 성립되지 않으므로 이렇게 반대로 사용하기 위해 직접 정의해줘아 한다.</span>
<span class="token keyword">operator</span> <span class="token keyword">fun</span> Double<span class="token punctuation">.</span><span class="token function">times</span><span class="token punctuation">(</span>p<span class="token operator">:</span> Point<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token function">Point</span><span class="token punctuation">(</span><span class="token punctuation">(</span>p<span class="token punctuation">.</span>x <span class="token operator">*</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>p<span class="token punctuation">.</span>y <span class="token operator">*</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token keyword">fun</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">val</span> p1 <span class="token operator">=</span> <span class="token function">Point</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span>
  <span class="token keyword">val</span> p2 <span class="token operator">=</span> <span class="token function">Point</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">70</span><span class="token punctuation">)</span>
  <span class="token function">println</span><span class="token punctuation">(</span>p1 <span class="token operator">+</span> p2<span class="token punctuation">)</span>
  <span class="token function">println</span><span class="token punctuation">(</span>p2 <span class="token operator">-</span> p1<span class="token punctuation">)</span>
  <span class="token function">println</span><span class="token punctuation">(</span><span class="token punctuation">(</span>p2 <span class="token operator">+</span> p1<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">0.3</span><span class="token punctuation">)</span>
  <span class="token function">println</span><span class="token punctuation">(</span><span class="token number">0.3</span> <span class="token operator">*</span> <span class="token punctuation">(</span>p2 <span class="token operator">+</span> p1<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br></div></div></details> <h3 id="복합-대입-연산자-오버로딩"><a href="#복합-대입-연산자-오버로딩" class="header-anchor">#</a> 복합 대입 연산자 오버로딩</h3> <details class="custom-block details"><summary>자세히</summary> <div class="language-kotlin line-numbers-mode"><pre class="language-kotlin"><code><span class="token comment">// 현재 리스트를 그대로 유지하면서 복합 연산자 오버로딩을 수행한다.</span>
<span class="token keyword">operator</span> <span class="token keyword">fun</span> <span class="token operator">&lt;</span>T<span class="token operator">&gt;</span> MutableCollection<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span><span class="token punctuation">.</span><span class="token function">plusAssign</span><span class="token punctuation">(</span>element<span class="token operator">:</span> T<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>element<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">fun</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">val</span> numbers <span class="token operator">=</span> arrayListOf<span class="token operator">&lt;</span>Int<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  numbers <span class="token operator">+=</span> <span class="token number">1</span>
  <span class="token function">println</span><span class="token punctuation">(</span>numbers<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token comment">// 사실 +=는 plus, plusAssign 모두 컴파일 가능하다. 그러므로 둘 중하나만 정의해야 한다.</span>
  <span class="token comment">// 빌더와 같이 변경 가능한 클래스라면 plusAssign, 그렇지 않고 불변 객체라면 plus를 제공해주자.</span>
  numbers <span class="token operator">+=</span> <span class="token number">2</span>
  <span class="token function">println</span><span class="token punctuation">(</span>numbers<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><ul><li>+=와 같은 복합 대입 연산자는 연산 후 참조를 그대로 유지하고 싶을때 유용하다.</li></ul> <h4 id="코틀린-표준-라이브러리의-연산자-오버로딩-규칙"><a href="#코틀린-표준-라이브러리의-연산자-오버로딩-규칙" class="header-anchor">#</a> 코틀린 표준 라이브러리의 연산자 오버로딩 규칙</h4> <ul><li>+, -는 항상 새로운 컬렉션을 반환한다.</li> <li>변경 가능한 컬렉션에서의 +=, -=는 메모리에 있는 객체 상태를 변경시킨다.</li> <li>읽기 전용 컬렉션의 경우 복사본을 반환한다.</li></ul></details> <h3 id="단항-연산자-오버로딩"><a href="#단항-연산자-오버로딩" class="header-anchor">#</a> 단항 연산자 오버로딩</h3> <details class="custom-block details"><summary>자세히</summary> <div class="language-kotlin line-numbers-mode"><pre class="language-kotlin"><code><span class="token comment">/** 단항 연산자 (함수 파라미터가 없다)
 *  +a = unaryPlus
 *  -a = unaryMinus
 *  !a = not
 *  ++a, a++ = inc (표현은 같지만 실행 시점이 다름)
 *  --a, a-- = dec (표현은 같지만 실행 시점이 다름)
 */</span>
<span class="token keyword">operator</span> <span class="token keyword">fun</span> Point<span class="token punctuation">.</span><span class="token function">unaryMinus</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token function">Point</span><span class="token punctuation">(</span><span class="token operator">-</span>x<span class="token punctuation">,</span> <span class="token operator">-</span>y<span class="token punctuation">)</span>

<span class="token keyword">fun</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">val</span> p1 <span class="token operator">=</span> <span class="token function">Point</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span>
  <span class="token function">println</span><span class="token punctuation">(</span><span class="token operator">-</span>p1<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div></details> <h3 id="비교-연산자-오버로딩"><a href="#비교-연산자-오버로딩" class="header-anchor">#</a> 비교 연산자 오버로딩</h3> <details class="custom-block details"><summary>자세히</summary> <div class="language-kotlin line-numbers-mode"><pre class="language-kotlin"><code><span class="token comment">/** 동등 비교 연산자
 * a == b -&gt; a?.equals(b) ?: (b == null)
 * - 동등성 검사는 null 검사도 하기때문에 null도 동등성 검사가 가능해진다.
 * - != 는 ==의 반대 결과 값을 반환해준다.
 * - equals도 Any를 확인해보면 연산자 오버로딩을 활용한 것이다.
 */</span>


<span class="token comment">/** 순서 연산자
 *  자바의 Comparable에 들어있는 메서드를 관례로 사용한다.
 *  a &gt;= b -&gt; a.compareTo(b) &gt;= 0
 */</span>

<span class="token keyword">class</span> <span class="token function">Person</span><span class="token punctuation">(</span>
        <span class="token keyword">val</span> firstName<span class="token operator">:</span> String<span class="token punctuation">,</span> <span class="token keyword">val</span> lastName<span class="token operator">:</span> String
<span class="token punctuation">)</span> <span class="token operator">:</span> Comparable<span class="token operator">&lt;</span>Person<span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">compareTo</span><span class="token punctuation">(</span>other<span class="token operator">:</span> Person<span class="token punctuation">)</span><span class="token operator">:</span> Int <span class="token punctuation">{</span>
    <span class="token comment">// 인자로 받은 함수를 차례로 호출하면서 값을 비교해줌</span>
    <span class="token keyword">return</span> <span class="token function">compareValuesBy</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> other<span class="token punctuation">,</span> Person<span class="token operator">::</span>lastName<span class="token punctuation">,</span> Person<span class="token operator">::</span>firstName<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">fun</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// Comparable을 연산자 오버로딩으로 사용하기 때문에 기본 JAVA 클래스가 Comparable을 구현했다면 연산자 오버로딩을 사용할 수 있다.</span>
  <span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;asd&quot;</span> <span class="token operator">&lt;</span> <span class="token string">&quot;csd&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div></details> <h3 id="get-set-관례"><a href="#get-set-관례" class="header-anchor">#</a> get, set 관례</h3> <details class="custom-block details"><summary>자세히</summary> <div class="language-kotlin line-numbers-mode"><pre class="language-kotlin"><code><span class="token comment">// get 관례는 [index or key]와 같이 접근을 가능하게 해준다.</span>
<span class="token keyword">operator</span> <span class="token keyword">fun</span> Point<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>index<span class="token operator">:</span> Int<span class="token punctuation">)</span><span class="token operator">:</span> Int <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">when</span> <span class="token punctuation">(</span>index<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token number">0</span> <span class="token operator">-&gt;</span> x
    <span class="token number">1</span> <span class="token operator">-&gt;</span> y
    <span class="token keyword">else</span> <span class="token operator">-&gt;</span> <span class="token keyword">throw</span> <span class="token function">IndexOutOfBoundsException</span><span class="token punctuation">(</span><span class="token string">&quot;Invalid&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">data</span> <span class="token keyword">class</span> <span class="token function">MutablePoint</span><span class="token punctuation">(</span><span class="token keyword">var</span> x<span class="token operator">:</span> Int<span class="token punctuation">,</span> <span class="token keyword">var</span> y<span class="token operator">:</span> Int<span class="token punctuation">)</span>

<span class="token comment">// set 또한 관례가 존재하며 p[index] = value로 값을 세팅할 수 있다.</span>
<span class="token comment">// 마지막 파라미터만 연산자의 우항, 나머지는 연산자의 좌항의 []안에 들어가게 된다.</span>
<span class="token comment">// 즉 x[a, b] = c -&gt; x.set(a, b, c) 이런식으로 사용할 수 있다.</span>
<span class="token keyword">operator</span> <span class="token keyword">fun</span> MutablePoint<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>index<span class="token operator">:</span> Int<span class="token punctuation">,</span> value<span class="token operator">:</span> Int<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">when</span> <span class="token punctuation">(</span>index<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token number">0</span> <span class="token operator">-&gt;</span> x <span class="token operator">=</span> value
    <span class="token number">1</span> <span class="token operator">-&gt;</span> y <span class="token operator">=</span> value
    <span class="token keyword">else</span> <span class="token operator">-&gt;</span> <span class="token keyword">throw</span> <span class="token function">IndexOutOfBoundsException</span><span class="token punctuation">(</span><span class="token string">&quot;Invalid&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">fun</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">val</span> point <span class="token operator">=</span> <span class="token function">Point</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span>
  <span class="token function">println</span><span class="token punctuation">(</span>point<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token function">println</span><span class="token punctuation">(</span>point<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

  <span class="token keyword">val</span> mutablePoint <span class="token operator">=</span> <span class="token function">MutablePoint</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span>
  <span class="token function">println</span><span class="token punctuation">(</span>mutablePoint<span class="token punctuation">)</span>
  mutablePoint<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">30</span>
  <span class="token function">println</span><span class="token punctuation">(</span>mutablePoint<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br></div></div></details> <h3 id="in-관례"><a href="#in-관례" class="header-anchor">#</a> in 관례</h3> <details class="custom-block details"><summary>자세히</summary> <div class="language-kotlin line-numbers-mode"><pre class="language-kotlin"><code><span class="token keyword">data</span> <span class="token keyword">class</span> <span class="token function">Rectangle</span><span class="token punctuation">(</span><span class="token keyword">val</span> upperLeft<span class="token operator">:</span> Point<span class="token punctuation">,</span> <span class="token keyword">val</span> lowerRight<span class="token operator">:</span> Point<span class="token punctuation">)</span>

<span class="token comment">// in 연산자는 comtains와 대응된다.</span>
<span class="token keyword">operator</span> <span class="token keyword">fun</span> Rectangle<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span>p<span class="token operator">:</span> Point<span class="token punctuation">)</span><span class="token operator">:</span> Boolean <span class="token operator">=</span>
<span class="token comment">// until은 x &lt;= value &lt; y 인 범위를 의미한다.</span>
        <span class="token comment">// ..은 x  &lt;= value &lt;= y를 의미힌다.</span>
        p<span class="token punctuation">.</span>x <span class="token keyword">in</span> <span class="token punctuation">(</span>upperLeft<span class="token punctuation">.</span>x until lowerRight<span class="token punctuation">.</span>x<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> p<span class="token punctuation">.</span>y <span class="token keyword">in</span> <span class="token punctuation">(</span>upperLeft<span class="token punctuation">.</span>y until lowerRight<span class="token punctuation">.</span>y<span class="token punctuation">)</span>

<span class="token keyword">fun</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">val</span> p1 <span class="token operator">=</span> <span class="token function">Point</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span>
  <span class="token keyword">val</span> p2 <span class="token operator">=</span> <span class="token function">Point</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span>
  <span class="token keyword">val</span> rectangle <span class="token operator">=</span> <span class="token function">Rectangle</span><span class="token punctuation">(</span>p1<span class="token punctuation">,</span> p2<span class="token punctuation">)</span>

  <span class="token comment">// in의 좌항이 해당 함수의 파라미터가 되고 우항은 contains를 소유한 객체이다.</span>
  <span class="token function">println</span><span class="token punctuation">(</span><span class="token function">Point</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span> <span class="token keyword">in</span> rectangle<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div></details> <h3 id="rangeto-관례"><a href="#rangeto-관례" class="header-anchor">#</a> rangeTo 관례</h3> <details class="custom-block details"><summary>자세히</summary> <div class="language-kotlin line-numbers-mode"><pre class="language-kotlin"><code><span class="token comment">/** start..end -&gt; start.rangeTo(end)
 *  - rangeTo는 함수의 **범위를 반환**
 *  - Comparable 인터페이스를 구현하고 있으면 rangeTo를 정의할 필요가 없다.
 *  - 코틀린 표준 라이브러리를 통해 비교 가능한 원소로 만들 수 있다.
 *      - operator fun &lt;T: Comparable&lt;T&gt;&gt; T.rangeTo(that: T): ClosedRange&lt;T&gt;
 */</span>

<span class="token keyword">fun</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">val</span> now <span class="token operator">=</span> LocalDate<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

  <span class="token comment">// now.range(now.plusDays(10)) 이 된다.</span>
  <span class="token keyword">val</span> vacation <span class="token operator">=</span> now<span class="token operator">..</span>now<span class="token punctuation">.</span><span class="token function">plusDays</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>
  <span class="token function">println</span><span class="token punctuation">(</span>now<span class="token punctuation">.</span><span class="token function">plusDays</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token keyword">in</span> vacation<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div></details> <h3 id="for-루프-iterator-관례"><a href="#for-루프-iterator-관례" class="header-anchor">#</a> for 루프 iterator 관례</h3> <details class="custom-block details"><summary>자세히</summary> <ul><li>for 루프에서 사용하는 in은 iterator를 호출해 hasNext, next 호출을 반복하는 식으로 변환된다.</li></ul> <div class="language-kotlin line-numbers-mode"><pre class="language-kotlin"><code><span class="token comment">// range에 대한 for문을 돌리기 때문에 ClosedRange&lt;&gt;.iterator를 정의한다.</span>
<span class="token keyword">operator</span> <span class="token keyword">fun</span> ClosedRange<span class="token operator">&lt;</span>LocalDate<span class="token operator">&gt;</span><span class="token punctuation">.</span><span class="token function">iterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> Iterator<span class="token operator">&lt;</span>LocalDate<span class="token operator">&gt;</span> <span class="token operator">=</span>
        <span class="token keyword">object</span> <span class="token operator">:</span> Iterator<span class="token operator">&lt;</span>LocalDate<span class="token operator">&gt;</span> <span class="token punctuation">{</span>
          <span class="token keyword">var</span> current <span class="token operator">=</span> start

          <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">hasNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> current <span class="token operator">&lt;=</span> endInclusive

          <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> current<span class="token punctuation">.</span><span class="token function">apply</span> <span class="token punctuation">{</span>
            current <span class="token operator">=</span> current<span class="token punctuation">.</span><span class="token function">plusDays</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>

<span class="token keyword">fun</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// iterator 메서드를 확장 함수로 정의할 수 있기 떄문에 자바 문자열에 대한 for 루프가 가능해진다.</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span>c <span class="token keyword">in</span> <span class="token string">&quot;asd&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">println</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">val</span> now <span class="token operator">=</span> LocalDate<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token comment">// 위에서 정의한 iterator를 이용해 for문을 돌릴 수 있다.</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span>date <span class="token keyword">in</span> <span class="token punctuation">(</span>now<span class="token operator">..</span>now<span class="token punctuation">.</span><span class="token function">plusDays</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">println</span><span class="token punctuation">(</span>date<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div></details> <h3 id="구조-분해-관례"><a href="#구조-분해-관례" class="header-anchor">#</a> 구조 분해 관례</h3> <details class="custom-block details"><summary>자세히</summary> <div class="language-kotlin line-numbers-mode"><pre class="language-kotlin"><code><span class="token comment">/** 구조 분해 관례
 *  - val (a, b) = p --&gt; a = p.component1(), b = p.component2()
 *  - data 클래스는 주 생성자 들에 들어 있는 프로퍼티에 대해서는 자동으로 컴파일러가 componentN을 만들어 준다.
 *  - 구조분해는 이터레이터와 함께 루프문에서 매우 유용하다.
 */</span>

<span class="token comment">// 일반 클래스에는 직접 정의할 수 있다.</span>
<span class="token keyword">class</span> <span class="token function">NewPoint</span><span class="token punctuation">(</span><span class="token keyword">val</span> x<span class="token operator">:</span> Int<span class="token punctuation">,</span> <span class="token keyword">val</span> y<span class="token operator">:</span> Int<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">operator</span> <span class="token keyword">fun</span> <span class="token function">component1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> x
  <span class="token keyword">operator</span> <span class="token keyword">fun</span> <span class="token function">component2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> y
  <span class="token comment">// (x, y) = NewPoint(1, 2) 이렇게 가능</span>
<span class="token punctuation">}</span>

<span class="token comment">// data class에 대해선 컴파일러가 자동으로 componentN 함수를 만들어준다.</span>
<span class="token keyword">data</span> <span class="token keyword">class</span> <span class="token function">NamedComponents</span><span class="token punctuation">(</span><span class="token keyword">val</span> name<span class="token operator">:</span> String<span class="token punctuation">,</span> <span class="token keyword">val</span> extension<span class="token operator">:</span> String<span class="token punctuation">)</span>

<span class="token keyword">fun</span> <span class="token function">splitFilename</span><span class="token punctuation">(</span>fullName<span class="token operator">:</span> String<span class="token punctuation">)</span><span class="token operator">:</span> NamedComponents <span class="token punctuation">{</span>
  <span class="token keyword">val</span> result <span class="token operator">=</span> fullName<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'.'</span><span class="token punctuation">,</span> limit <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">)</span>
  <span class="token keyword">return</span> <span class="token function">NamedComponents</span><span class="token punctuation">(</span>result<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> result<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">fun</span> <span class="token function">splitFilename2</span><span class="token punctuation">(</span>fullName<span class="token operator">:</span> String<span class="token punctuation">)</span><span class="token operator">:</span> NamedComponents <span class="token punctuation">{</span>
  <span class="token comment">// 배열도 component를 제공하므로 이렇게 써도 된다.</span>
  <span class="token comment">// 코틀린 표준 라이브러리에서는 맨 앞의 다섯 원소에 대해 componentN을 제공한다.</span>
  <span class="token keyword">val</span> <span class="token punctuation">(</span>name<span class="token punctuation">,</span> extesion<span class="token punctuation">)</span> <span class="token operator">=</span> fullName<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'.'</span><span class="token punctuation">,</span> limit <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">)</span>
  <span class="token keyword">return</span> <span class="token function">NamedComponents</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> extesion<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">fun</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 구조 분해를 활용하면 값을 간단히 풀어서 가져올 수 있다.</span>
  <span class="token keyword">val</span> <span class="token punctuation">(</span>name<span class="token punctuation">,</span> extension<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token function">splitFilename</span><span class="token punctuation">(</span><span class="token string">&quot;helloWorld.kt&quot;</span><span class="token punctuation">)</span>
  <span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;<span class="token interpolation variable">$name</span>.<span class="token interpolation variable">$extension</span>&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br></div></div></details> <h3 id="위임-프로퍼티"><a href="#위임-프로퍼티" class="header-anchor">#</a> 위임 프로퍼티</h3> <details class="custom-block details"><summary>자세히</summary> <div class="language-kotlin line-numbers-mode"><pre class="language-kotlin"><code><span class="token keyword">class</span> Foo <span class="token punctuation">{</span>
  <span class="token comment">// 이렇게 위임을 설정할 수 있다.</span>
  <span class="token keyword">var</span> p<span class="token operator">:</span> Type <span class="token keyword">by</span> <span class="token function">Delegate</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

  <span class="token comment">// 위와 같이 설정하면 실제 set, get은 delegate로 위임되어 로직이 수행될 것이다.</span>
  <span class="token keyword">private</span> <span class="token keyword">val</span> delegate <span class="token operator">=</span> <span class="token function">Delegate</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">var</span> p<span class="token operator">:</span> Type
    <span class="token keyword">set</span><span class="token punctuation">(</span>value<span class="token operator">:</span> Type<span class="token punctuation">)</span> <span class="token operator">=</span> delegate<span class="token punctuation">.</span><span class="token function">setValue</span><span class="token punctuation">(</span><span class="token operator">..</span><span class="token punctuation">.</span><span class="token punctuation">,</span> value<span class="token punctuation">)</span>
  <span class="token keyword">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> delegate<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token operator">..</span><span class="token punctuation">.</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><ul><li>위임 프로퍼티를 사용하면 값을 단순히 backing field에 저장하는것 보다 더 복잡한 방식으로 작동하는 프로퍼티를 구현할 수 있다.
<ul><li>예를들어 프로퍼티 위임을 통해 자신의 값을 필드가 아닌 DB 테이블, 세션, 맵등에 저장이 가능하다.</li></ul></li> <li>이는 도우미 객체인 위임 객체가 필요하다.</li></ul> <h4 id="지연-초기화를-백킹-필드를-통해-구현"><a href="#지연-초기화를-백킹-필드를-통해-구현" class="header-anchor">#</a> 지연 초기화를 백킹 필드를 통해 구현</h4> <div class="language-kotlin line-numbers-mode"><pre class="language-kotlin"><code><span class="token comment">/** 이러한 패턴은 매우 자주 사용된다.
 * - 뒷받침하는 프로퍼티를 이용해 데이터를 지연 초기화 하는 기법이다.
 * - 하지만 이 방식은 스레드 안전하지 않고 프로퍼티가 많을 수록 귀찮아 질 것이다.
 */</span>
<span class="token keyword">class</span> <span class="token function">Person3</span><span class="token punctuation">(</span><span class="token keyword">val</span> name<span class="token operator">:</span> String<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">private</span> <span class="token keyword">var</span> _emails<span class="token operator">:</span> List<span class="token operator">&lt;</span>String<span class="token operator">&gt;</span><span class="token operator">?</span> <span class="token operator">=</span> <span class="token keyword">null</span>
  <span class="token keyword">val</span> emails<span class="token operator">:</span> List<span class="token operator">&lt;</span>String<span class="token operator">&gt;</span>
    <span class="token keyword">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// emails은 딱 한번만 가져온다.</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>_emails <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        _emails <span class="token operator">=</span> <span class="token function">loadEmails</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">return</span> _emails<span class="token operator">!!</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h4 id="위임-프로퍼티-활용-by-lazy-를-사용한-프로퍼티-초기화-지연"><a href="#위임-프로퍼티-활용-by-lazy-를-사용한-프로퍼티-초기화-지연" class="header-anchor">#</a> 위임 프로퍼티 활용: by lazy()를 사용한 프로퍼티 초기화 지연</h4> <div class="language-kotlin line-numbers-mode"><pre class="language-kotlin"><code><span class="token keyword">class</span> <span class="token function">Person4</span><span class="token punctuation">(</span><span class="token keyword">val</span> name<span class="token operator">:</span> String<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">/** 위임 프로퍼티는 백킹 필드와 값이 오직 한번만 초기화 됨을 보장하는 get 로직을 함께 캡슐화 해준다.
   *  - lazy 함수가 위임 객체를 반환하는 표준 라이브러리이다.
   *  - lazy 함수는 코틀린 관례에 맞는 getValue 메서드가 들어있는 객체를 반환해준다.
   **/</span>
  <span class="token keyword">val</span> emails <span class="token keyword">by</span> lazy <span class="token punctuation">{</span> <span class="token function">loadEmails</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div></details> <h3 id="위임-프로퍼티-구현해보기"><a href="#위임-프로퍼티-구현해보기" class="header-anchor">#</a> 위임 프로퍼티 구현해보기</h3> <details class="custom-block details"><summary>자세히</summary> <ul><li>위임 프로퍼티 없이 프로퍼티 변경을 리스너에 통지해주는 기능을 구현하보고 그 후에 위임 프로퍼티를 사용하는 방식으로 리팩터링 한다.</li></ul> <h4 id="기본-자바-빈즈를-이용해-구현"><a href="#기본-자바-빈즈를-이용해-구현" class="header-anchor">#</a> 기본 자바 빈즈를 이용해 구현</h4> <div class="language-kotlin line-numbers-mode"><pre class="language-kotlin"><code><span class="token comment">// 리스너의 목록을 관리하고 이벤트가 들어오면 통지한다</span>
<span class="token keyword">open</span> <span class="token keyword">class</span> PropertyChangeAware <span class="token punctuation">{</span>
  <span class="token keyword">protected</span> <span class="token keyword">val</span> changeSupport <span class="token operator">=</span> <span class="token function">PropertyChangeSupport</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>

  <span class="token keyword">fun</span> <span class="token function">addPropertyChangeListener</span><span class="token punctuation">(</span>listener<span class="token operator">:</span> PropertyChangeListener<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    changeSupport<span class="token punctuation">.</span><span class="token function">addPropertyChangeListener</span><span class="token punctuation">(</span>listener<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">fun</span> <span class="token function">removePropertyChangeListener</span><span class="token punctuation">(</span>listener<span class="token operator">:</span> PropertyChangeListener<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    changeSupport<span class="token punctuation">.</span><span class="token function">removePropertyChangeListener</span><span class="token punctuation">(</span>listener<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token function">MyPerson</span><span class="token punctuation">(</span>
        <span class="token keyword">val</span> name<span class="token operator">:</span> String<span class="token punctuation">,</span> age<span class="token operator">:</span> Int<span class="token punctuation">,</span> salaray<span class="token operator">:</span> Int
<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">PropertyChangeAware</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> age<span class="token operator">:</span> Int <span class="token operator">=</span> age
    <span class="token keyword">set</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">val</span> oldValue <span class="token operator">=</span> field
      field <span class="token operator">=</span> value
      changeSupport<span class="token punctuation">.</span><span class="token function">firePropertyChange</span><span class="token punctuation">(</span><span class="token string">&quot;age&quot;</span><span class="token punctuation">,</span> oldValue<span class="token punctuation">,</span> value<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

  <span class="token keyword">var</span> salary<span class="token operator">:</span> Int <span class="token operator">=</span> salaray
    <span class="token keyword">set</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">val</span> oldValue <span class="token operator">=</span> field
      field <span class="token operator">=</span> value
      changeSupport<span class="token punctuation">.</span><span class="token function">firePropertyChange</span><span class="token punctuation">(</span><span class="token string">&quot;salary&quot;</span><span class="token punctuation">,</span> oldValue<span class="token punctuation">,</span> value<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">fun</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">val</span> myPerson <span class="token operator">=</span> <span class="token function">MyPerson</span><span class="token punctuation">(</span><span class="token string">&quot;Jayden&quot;</span><span class="token punctuation">,</span> <span class="token number">26</span><span class="token punctuation">,</span> <span class="token number">1234</span><span class="token punctuation">)</span>
  myPerson<span class="token punctuation">.</span><span class="token function">addPropertyChangeListener</span><span class="token punctuation">(</span>
          PropertyChangeListener <span class="token punctuation">{</span> event <span class="token operator">-&gt;</span>
            <span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Property <span class="token interpolation"><span class="token delimiter variable">${</span>event<span class="token punctuation">.</span>propertyName<span class="token delimiter variable">}</span></span> changed from <span class="token interpolation"><span class="token delimiter variable">${</span>event<span class="token punctuation">.</span>oldValue<span class="token delimiter variable">}</span></span> to <span class="token interpolation"><span class="token delimiter variable">${</span>event<span class="token punctuation">.</span>newValue<span class="token delimiter variable">}</span></span>&quot;</span><span class="token punctuation">)</span>
          <span class="token punctuation">}</span>
  <span class="token punctuation">)</span>

  myPerson<span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token number">30</span>
  myPerson<span class="token punctuation">.</span>salary <span class="token operator">=</span> <span class="token number">5500</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br></div></div><h4 id="공통-모듈을-뽑아내서-재사용성-증가-시키기"><a href="#공통-모듈을-뽑아내서-재사용성-증가-시키기" class="header-anchor">#</a> 공통 모듈을 뽑아내서 재사용성 증가 시키기</h4> <div class="language-kotlin line-numbers-mode"><pre class="language-kotlin"><code><span class="token keyword">class</span> <span class="token function">ObservableProperty</span><span class="token punctuation">(</span>
        <span class="token keyword">private</span> <span class="token keyword">val</span> propName<span class="token operator">:</span> String<span class="token punctuation">,</span>
        <span class="token keyword">private</span> <span class="token keyword">var</span> propValue<span class="token operator">:</span> Int<span class="token punctuation">,</span>
        <span class="token keyword">private</span> <span class="token keyword">val</span> changeSupport<span class="token operator">:</span> PropertyChangeSupport
<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">fun</span> <span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> Int <span class="token operator">=</span> propValue
  <span class="token keyword">fun</span> <span class="token function">setValue</span><span class="token punctuation">(</span>newValue<span class="token operator">:</span> Int<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">val</span> oldValue <span class="token operator">=</span> propValue
    propValue <span class="token operator">=</span> newValue
    changeSupport<span class="token punctuation">.</span><span class="token function">firePropertyChange</span><span class="token punctuation">(</span>propName<span class="token punctuation">,</span> oldValue<span class="token punctuation">,</span> newValue<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token function">MyPerson</span><span class="token punctuation">(</span>
        <span class="token keyword">val</span> name<span class="token operator">:</span> String<span class="token punctuation">,</span> age<span class="token operator">:</span> Int<span class="token punctuation">,</span> salaray<span class="token operator">:</span> Int
<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">PropertyChangeAware</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">val</span> _age <span class="token operator">=</span> <span class="token function">ObservableProperty</span><span class="token punctuation">(</span><span class="token string">&quot;age&quot;</span><span class="token punctuation">,</span> age<span class="token punctuation">,</span> changeSupport<span class="token punctuation">)</span>
  <span class="token keyword">var</span> age<span class="token operator">:</span> Int
    <span class="token keyword">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> _age<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">set</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token operator">=</span> _age<span class="token punctuation">.</span><span class="token function">setValue</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span>

  <span class="token keyword">val</span> _salary <span class="token operator">=</span> <span class="token function">ObservableProperty</span><span class="token punctuation">(</span><span class="token string">&quot;salary&quot;</span><span class="token punctuation">,</span> salaray<span class="token punctuation">,</span> changeSupport<span class="token punctuation">)</span>
  <span class="token keyword">var</span> salary<span class="token operator">:</span> Int
    <span class="token keyword">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> _salary<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">set</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token operator">=</span> _salary<span class="token punctuation">.</span><span class="token function">setValue</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><ul><li>도우미 클래스를 통해 get, set을 위힘하여 변경을 통지하도록 할 수 있다.</li></ul> <h4 id="위임-프로퍼티-구현-후-적용"><a href="#위임-프로퍼티-구현-후-적용" class="header-anchor">#</a> 위임 프로퍼티 구현 후 적용</h4> <div class="language-kotlin line-numbers-mode"><pre class="language-kotlin"><code><span class="token keyword">class</span> <span class="token function">ObservableProperty</span><span class="token punctuation">(</span>
        <span class="token keyword">private</span> <span class="token keyword">var</span> propValue<span class="token operator">:</span> Int<span class="token punctuation">,</span>
        <span class="token keyword">private</span> <span class="token keyword">val</span> changeSupport<span class="token operator">:</span> PropertyChangeSupport
<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 위임을 위해 코틀린 관례에 맞게 operator를 붙이고, 해당 객체를 프로퍼티를 넘겨줘야 한다.</span>
  <span class="token keyword">operator</span> <span class="token keyword">fun</span> <span class="token function">getValue</span><span class="token punctuation">(</span>p<span class="token operator">:</span> MyPerson<span class="token punctuation">,</span> prop<span class="token operator">:</span> KProperty<span class="token operator">&lt;</span><span class="token operator">*</span><span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token operator">:</span> Int <span class="token operator">=</span> propValue
  <span class="token keyword">operator</span> <span class="token keyword">fun</span> <span class="token function">setValue</span><span class="token punctuation">(</span>p<span class="token operator">:</span> MyPerson<span class="token punctuation">,</span> prop<span class="token operator">:</span> KProperty<span class="token operator">&lt;</span><span class="token operator">*</span><span class="token operator">&gt;</span><span class="token punctuation">,</span> newValue<span class="token operator">:</span> Int<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">val</span> oldValue <span class="token operator">=</span> propValue
    propValue <span class="token operator">=</span> newValue
    changeSupport<span class="token punctuation">.</span><span class="token function">firePropertyChange</span><span class="token punctuation">(</span>prop<span class="token punctuation">.</span>name<span class="token punctuation">,</span> oldValue<span class="token punctuation">,</span> newValue<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token function">MyPerson</span><span class="token punctuation">(</span>
        age<span class="token operator">:</span> Int<span class="token punctuation">,</span> salary<span class="token operator">:</span> Int
<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">PropertyChangeAware</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// by 오른쪽의 객체를 **위임 객체**라고 부른다.</span>
  <span class="token comment">// 코틀린은 위임 객체를 감춰진 프로퍼티에 저장하고, 주 객체의 프로퍼티를 읽거나 쓸때마다 위임 객체의 getValue, setValue를 호출해준다.</span>
  <span class="token keyword">var</span> age<span class="token operator">:</span> Int <span class="token keyword">by</span> <span class="token function">ObservableProperty</span><span class="token punctuation">(</span>age<span class="token punctuation">,</span> changeSupport<span class="token punctuation">)</span>
  <span class="token keyword">var</span> salary<span class="token operator">:</span> Int <span class="token keyword">by</span> <span class="token function">ObservableProperty</span><span class="token punctuation">(</span>salary<span class="token punctuation">,</span> changeSupport<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><h4 id="코틀린-지원-라이브러리로-위임-객체-만들기"><a href="#코틀린-지원-라이브러리로-위임-객체-만들기" class="header-anchor">#</a> 코틀린 지원 라이브러리로 위임 객체 만들기</h4> <div class="language-kotlin line-numbers-mode"><pre class="language-kotlin"><code><span class="token keyword">class</span> <span class="token function">MyPerson</span><span class="token punctuation">(</span>
        age<span class="token operator">:</span> Int<span class="token punctuation">,</span> salary<span class="token operator">:</span> Int
<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">PropertyChangeAware</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">/** observer를 정의하고 코틀린 위임 객체에 넘겨주면 된다.
   *  - 사실 위임 객체의 방법은 보이지 않는 접근자들을 만들어 주는 것이다.
   *  - get() -&gt; &lt;delegate&gt;.getValue(v, &lt;property&gt;)
   *  - set() -&gt; &lt;delegate&gt;.setValue(c, &lt;property&gt;, x)
   *  - 단순한 방법이지만 프로퍼티가 저장될 값을 맵, 디비 등으로 바꿀 수 있고, 프로퍼티를 읽거나 쓸 때 이벤트들을 추가하는 방식들을 간결하게 구현할 수 있다.
   */</span>

  <span class="token keyword">private</span> <span class="token keyword">val</span> observer <span class="token operator">=</span> <span class="token punctuation">{</span> prop<span class="token operator">:</span> KProperty<span class="token operator">&lt;</span><span class="token operator">*</span><span class="token operator">&gt;</span><span class="token punctuation">,</span> oldValue<span class="token operator">:</span> Int<span class="token punctuation">,</span> newValue<span class="token operator">:</span> Int <span class="token operator">-&gt;</span>
    changeSupport<span class="token punctuation">.</span><span class="token function">firePropertyChange</span><span class="token punctuation">(</span>prop<span class="token punctuation">.</span>name<span class="token punctuation">,</span> oldValue<span class="token punctuation">,</span> newValue<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">var</span> age<span class="token operator">:</span> Int <span class="token keyword">by</span> Delegates<span class="token punctuation">.</span><span class="token function">observable</span><span class="token punctuation">(</span>age<span class="token punctuation">,</span> observer<span class="token punctuation">)</span>
  <span class="token keyword">var</span> salary<span class="token operator">:</span> Int <span class="token keyword">by</span> Delegates<span class="token punctuation">.</span><span class="token function">observable</span><span class="token punctuation">(</span>salary<span class="token punctuation">,</span> observer<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div></details> <h2 id="_8장-고차-함수"><a href="#_8장-고차-함수" class="header-anchor">#</a> 8장. 고차 함수</h2> <h3 id="고차-함수-정의"><a href="#고차-함수-정의" class="header-anchor">#</a> 고차 함수 정의</h3> <details class="custom-block details"><summary>자세히</summary> <ul><li>고차 함수는 다른 함수를 인자로 받거나 함수를 반환하는 함수이다.</li> <li>그러므로 filter, map, with 등이 모두 고차 함수로 볼 수 있다.</li></ul></details> <h3 id="함수-타입"><a href="#함수-타입" class="header-anchor">#</a> 함수 타입</h3> <details class="custom-block details"><summary>자세히</summary> <div class="language-kotlin line-numbers-mode"><pre class="language-kotlin"><code><span class="token keyword">fun</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 함수도 타입이 존재한다. 타입을 명시하면 실제 람다식은 타입 추론이 가능하다.</span>
  <span class="token keyword">val</span> sum<span class="token operator">:</span> <span class="token punctuation">(</span>Int<span class="token punctuation">,</span> Int<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> Int <span class="token operator">=</span> <span class="token punctuation">{</span> x<span class="token punctuation">,</span> y <span class="token operator">-&gt;</span> x <span class="token operator">+</span> y <span class="token punctuation">}</span>
  <span class="token comment">// nullable도 가능</span>
  <span class="token keyword">val</span> sumNullable<span class="token operator">:</span> <span class="token punctuation">(</span>Int<span class="token punctuation">,</span> Int<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> Int<span class="token operator">?</span> <span class="token operator">=</span> <span class="token punctuation">{</span> x<span class="token punctuation">,</span> y <span class="token operator">-&gt;</span> x <span class="token operator">+</span> y <span class="token punctuation">}</span>

  <span class="token keyword">val</span> actions<span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> Unit <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token function">println</span><span class="token punctuation">(</span><span class="token number">123</span><span class="token punctuation">)</span> <span class="token punctuation">}</span>
  <span class="token comment">// 함수 전체에 대해서도 nullable을 정의할 수 있다.</span>
  <span class="token keyword">val</span> actionsNullable<span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> Unit<span class="token punctuation">)</span><span class="token operator">?</span> <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token function">println</span><span class="token punctuation">(</span><span class="token number">123</span><span class="token punctuation">)</span> <span class="token punctuation">}</span>


  <span class="token keyword">fun</span> <span class="token function">performRequest</span><span class="token punctuation">(</span>
          url<span class="token operator">:</span> String<span class="token punctuation">,</span>
          <span class="token comment">// 가독성을 위해 파라미터 이름을 정의할 수 있다.</span>
          callback<span class="token operator">:</span> <span class="token punctuation">(</span>code<span class="token operator">:</span> Int<span class="token punctuation">,</span> contnet<span class="token operator">:</span> String<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> Unit
  <span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">callback</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;Hello&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token function">performRequest</span><span class="token punctuation">(</span><span class="token string">&quot;url&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> code<span class="token punctuation">,</span> contnet <span class="token operator">-&gt;</span> <span class="token comment">//TODO()</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// 함수 타입만 미리 정해놓을 수도 있다.</span>
  <span class="token keyword">fun</span> <span class="token function">toAndThree</span><span class="token punctuation">(</span>operation<span class="token operator">:</span> <span class="token punctuation">(</span>Int<span class="token punctuation">,</span> Int<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> Int<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">val</span> result <span class="token operator">=</span> <span class="token function">operation</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span>
    <span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;The result is <span class="token interpolation variable">$result</span>&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><h4 id="intellij-idea-팁"><a href="#intellij-idea-팁" class="header-anchor">#</a> IntelliJ IDEA 팁</h4> <ul><li>인텔리에는 디버깅할 때 람다 코드 내부를 한 단계씩 실행해볼 수 잇는 <code>스마트 스테핑을 제공</code>한다.</li></ul></details> <h3 id="자바에서-코틀린-함수-타입"><a href="#자바에서-코틀린-함수-타입" class="header-anchor">#</a> 자바에서 코틀린 함수 타입</h3> <details class="custom-block details"><summary>자세히</summary> <ul><li>컴파일된 코드 안에서 함수 타입은 FunctionN인터페이스를 구현한 객체이다.</li> <li>FunctionN 인터페이스에는 invoke 메서드 정의가 하나 들어있기 때문에 자바에서도 코틀린 함수타입을 invoke를 통해 호출할 수 있게 된다.</li></ul></details> <h3 id="안전한-nullable-function-호출"><a href="#안전한-nullable-function-호출" class="header-anchor">#</a> 안전한 nullable function 호출</h3> <details class="custom-block details"><summary>자세히</summary> <div class="language-kotlin line-numbers-mode"><pre class="language-kotlin"><code><span class="token keyword">fun</span> <span class="token operator">&lt;</span>T<span class="token operator">&gt;</span> Collection<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span><span class="token punctuation">.</span><span class="token function">joinToString</span><span class="token punctuation">(</span>
        separator<span class="token operator">:</span> String <span class="token operator">=</span> <span class="token string">&quot;, &quot;</span><span class="token punctuation">,</span>
        prefix<span class="token operator">:</span> String <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
        suffix<span class="token operator">:</span> String <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
        transform<span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>T<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> String<span class="token punctuation">)</span><span class="token operator">?</span> <span class="token operator">=</span> <span class="token keyword">null</span>
<span class="token punctuation">)</span><span class="token operator">:</span> String <span class="token punctuation">{</span>
  <span class="token keyword">val</span> list <span class="token operator">=</span> <span class="token keyword">this</span>
  <span class="token keyword">return</span> buildString <span class="token punctuation">{</span>
    <span class="token function">append</span><span class="token punctuation">(</span>suffix<span class="token punctuation">)</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>index<span class="token punctuation">,</span> element<span class="token punctuation">)</span> <span class="token keyword">in</span> list<span class="token punctuation">.</span><span class="token function">withIndex</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token function">append</span><span class="token punctuation">(</span>separator<span class="token punctuation">)</span>
      <span class="token comment">// 람다식은 invoke 함수를 가지는 인터페이스임을 활용하여 null check를 사용할 수 있다.</span>
      <span class="token keyword">val</span> str <span class="token operator">=</span> transform<span class="token operator">?</span><span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>element<span class="token punctuation">)</span> <span class="token operator">?:</span> element<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token function">append</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token function">append</span><span class="token punctuation">(</span>suffix<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div></details> <h3 id="함수를-반환하는-함수-만들기"><a href="#함수를-반환하는-함수-만들기" class="header-anchor">#</a> 함수를 반환하는 함수 만들기</h3> <details class="custom-block details"><summary>자세히</summary> <div class="language-kotlin line-numbers-mode"><pre class="language-kotlin"><code><span class="token keyword">data</span> <span class="token keyword">class</span> <span class="token function">Person</span><span class="token punctuation">(</span>
        <span class="token keyword">val</span> firstName<span class="token operator">:</span> String<span class="token punctuation">,</span>
        <span class="token keyword">val</span> lastName<span class="token operator">:</span> String<span class="token punctuation">,</span>
        <span class="token keyword">val</span> phoneNumber<span class="token operator">:</span> String<span class="token operator">?</span>
<span class="token punctuation">)</span>


<span class="token keyword">fun</span> <span class="token function">getPredicate</span><span class="token punctuation">(</span>prefix<span class="token operator">:</span> String <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> onlyWithPhoneNumber<span class="token operator">:</span> Boolean <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token punctuation">(</span>Person<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> Boolean <span class="token punctuation">{</span>
  <span class="token keyword">val</span> startsWithPrefix <span class="token operator">=</span> <span class="token punctuation">{</span> p<span class="token operator">:</span> Person <span class="token operator">-&gt;</span> p<span class="token punctuation">.</span>firstName<span class="token punctuation">.</span><span class="token function">startsWith</span><span class="token punctuation">(</span>prefix<span class="token punctuation">)</span> <span class="token operator">||</span> p<span class="token punctuation">.</span>lastName<span class="token punctuation">.</span><span class="token function">startsWith</span><span class="token punctuation">(</span>prefix<span class="token punctuation">)</span> <span class="token punctuation">}</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>onlyWithPhoneNumber<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> startsWithPrefix
  <span class="token punctuation">}</span>
  <span class="token comment">// 함수 반환 타입으로 유추가 가능하므로 람다식을 반활할때도 it을 활용할 수 있다. </span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token function">startsWithPrefix</span><span class="token punctuation">(</span>it<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> it<span class="token punctuation">.</span>phoneNumber <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div></details> <h3 id="인라인-함수-람다의-부가-비용-없애기"><a href="#인라인-함수-람다의-부가-비용-없애기" class="header-anchor">#</a> 인라인 함수: 람다의 부가 비용 없애기</h3> <details class="custom-block details"><summary>자세히</summary> <ul><li>코틀린이 보통 람다를 익명 클래스로 컴파일하지만 그렇다고 람다를 사용할 때마다 익명 클래스처럼 새로운 클래스를 만들지 않는다.</li> <li>하지만 <strong>람다가 변수를 포획하여 상태를 가지고 있게 되면 람다가 생성되는 시점마다 새로운 익명 클래스 객체가 생성될 것이다.</strong></li> <li>이런 경우에는 실행 시점에 익명 클래스 생성에 대한 부가 비용이 발생하여 성능저하가 일어날 수 있다.</li> <li><strong>inline 변경자를 활용하면 컴파일러는 해당 인라인 함수를 호출하는 곳에 함수 본문에 해당하는 바이트 코드를 복사하여 컴파일 시켜준다.</strong></li></ul></details> <h3 id="인라이닝이-작동하는-방식"><a href="#인라이닝이-작동하는-방식" class="header-anchor">#</a> 인라이닝이 작동하는 방식</h3> <details class="custom-block details"><summary>자세히</summary> <div class="language-kotlin line-numbers-mode"><pre class="language-kotlin"><code><span class="token comment">// 이 함수는 inline을 사용했으므로 자바의 synchronized 문과 같을 것이다.</span>
<span class="token keyword">inline</span> <span class="token keyword">fun</span> <span class="token operator">&lt;</span>T<span class="token operator">&gt;</span> <span class="token function">synchronized</span><span class="token punctuation">(</span>lock<span class="token operator">:</span> Lock<span class="token punctuation">,</span> action<span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> T<span class="token punctuation">)</span><span class="token operator">:</span> T <span class="token punctuation">{</span>
  lock<span class="token punctuation">.</span><span class="token function">lock</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">action</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
    lock<span class="token punctuation">.</span><span class="token function">unlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// ### 기존 함수 -&gt; 실제 컴파일 시 인라인된 foo 함수처럼 바이트코드가 함수 본문에 삽입된다.</span>
<span class="token keyword">fun</span> <span class="token function">foo</span><span class="token punctuation">(</span>l<span class="token operator">:</span> Lock<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Before sync&quot;</span><span class="token punctuation">)</span>

  <span class="token function">synchronized</span><span class="token punctuation">(</span>l<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Action&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;AfterSync&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// ### 인라인된 foo 함수 ###</span>
<span class="token keyword">fun</span> <span class="token function">foo</span><span class="token punctuation">(</span>l<span class="token operator">:</span> Lock<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Before sync&quot;</span><span class="token punctuation">)</span>

  <span class="token comment">// synchronized함수와 synchronized함수에 전달된 람다 표현식까지 인라이닌된다.          </span>
  lock<span class="token punctuation">.</span><span class="token function">lock</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Action&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
    lock<span class="token punctuation">.</span><span class="token function">unlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;AfterSync&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br></div></div><ul><li>인라인을 활용하면 함수를 호출하는 바이트코드 대신 함수 본문을 번역한 바이트코드로 컴파일될 것이다.</li></ul> <blockquote><p>한 인라임 함수를 여러곳에서 사용하면 호출하는 곳에 각각 바이트 코드를복사하므로 바이트코드가 거대해질 수 있다.</p></blockquote></details> <h3 id="인라인-함수의-한계"><a href="#인라인-함수의-한계" class="header-anchor">#</a> 인라인 함수의 한계</h3> <details class="custom-block details"><summary>자세히</summary> <ul><li><strong>모든 람다식을 인라이닝할 수 없다.</strong></li> <li>인라이닝은 람다식을 본문에 직접 펼치기 때문에 상황에 따라 이러한 방식이 불가능 할 때가 존재한다.</li> <li>예를들어 함수의 파라미터에 람다식이 있고 그 람다식을 바로 호출한다면 쉽게 인라이닝이 가능하다.</li> <li><strong>하지만 파라미터로 받은 람다식을 다른 변수에 저장한다면 그 변수는 객체의 참조를 가져야 한다.</strong></li> <li>이 경우엔 함수의 본문에서 람다에 대한 참조를 가져야 하므로 인라이닝이 불가능하다.
<ul><li>이러한 상황에 대비하여 의도적으로 인라이닝을 하지 못하도록 notinline 변경자를 붙여 인라인을 금지시킬 수 있다.</li></ul></li></ul> <blockquote><p>인라인 함수의 본문에서 람다 식을 바로 호출하거나, 해당 람다 식을 인자로 전달받아 바로 호출하는 경우에 해당 람다를 인라이닝할 수 있다.</p></blockquote></details> <h3 id="컬렉션-연산-인라이닝"><a href="#컬렉션-연산-인라이닝" class="header-anchor">#</a> 컬렉션 연산 인라이닝</h3> <details class="custom-block details"><summary>자세히</summary> <ul><li>컬렉션의 filter 같은 함수는 인라인 함수이기 때문에 filter 함수의 바이트코드는 그 함수에 전달된 람다 본문의 바이트코드와 함께 filter를 호출한 위치에 들어가게 된다.
<ul><li>그러므로 직접 if문을 작성하는 것과 바이트코드는 거의 동일하여 성능은 차이가 없다.
:::</li></ul></li></ul> <h3 id="시퀀스와-인라이닝"><a href="#시퀀스와-인라이닝" class="header-anchor">#</a> 시퀀스와 인라이닝</h3> <details class="custom-block details"><summary>자세히</summary> <ul><li>시퀀스는 지연 계산을 위해 filter와 같은 함수를 객체로 가지고 있어야 하므로 인라이닝할 수 없다.</li> <li><strong>그러므로 지연 계산을 지원하는 시퀀스가 기본 컬렉션 함수보다 성능이 항상 좋은건 아니다. 오직 지연 계산의 이점이 필요할때만 성능이 좋다</strong></li></ul></details></details> <h3 id="함수를-인라인으로-선언해야-할-때"><a href="#함수를-인라인으로-선언해야-할-때" class="header-anchor">#</a> 함수를 인라인으로 선언해야 할 때</h3> <details class="custom-block details"><summary>자세히</summary> <ul><li>람다를 인자로 받는 함수를 인라이닝하면 이점이 많다.
<ul><li>JVM은 함수 호출과 람다를 인라이닝 해줄 정도로 똑똑하지 못하기 때문에 성능을 향상시킬 가능성이 있다.</li> <li>인라이닝을 활용하면 함수 호출 비용을 줄일 수 있고, 람다로 표현하는 클래스와 람다 인스턴스에 해당하는 객체를 만들 필요가 없어진다.</li> <li>일반 람다 표현식으로는 하지 못하는 non-local return 같은 기능도 활용할 수 있다.
:::</li></ul></li></ul> <h3 id="함수를-인라인으로-선언하지-말아야-할-때"><a href="#함수를-인라인으로-선언하지-말아야-할-때" class="header-anchor">#</a> 함수를 인라인으로 선언하지 말아야 할 때</h3> <details class="custom-block details"><summary>자세히</summary> <ul><li>람다를 인자로 받는 함수 같은 경우가 아니라 일반 함수 호출은 경우엔 JVM이 이미 강력하게 최적화를 시켜준다.
<ul><li>JIT 컴파일러가 기계어로 변환할 때 캐싱기법등을 활용하여 일반 함수 호출에 대한 최적화를 시켜준다.</li> <li>만약 코틀린 인라이닝을 사용하게 되면 바이트코드 중복이 발생하므로 오히려 성능에 불리하다.
:::</li></ul></li></ul> <h3 id="인라인-함수를-사용할-때-주의할-점"><a href="#인라인-함수를-사용할-때-주의할-점" class="header-anchor">#</a> 인라인 함수를 사용할 때 주의할 점</h3> <details class="custom-block details"><summary>자세히</summary> <ul><li>인라인 함수는 해당 함수의 본문에 해당하는 바이트코드를 호출 지점에 복사하기 때문에 인라인 함수의 코드 크기가 크다면 바이트코드가 상대적으로 매우 커질 수 있으므로 인라인 함수는 최대한 짧게 정의하는 것이 좋다.
<ul><li>코틀린 기본 지원 inline 함수들을 보면 모두 크기가 아주 작다는 사실을 알 수 있다.
:::</li></ul></li></ul> <h3 id="인라인-함수-활용-예"><a href="#인라인-함수-활용-예" class="header-anchor">#</a> 인라인 함수 활용 예</h3> <details class="custom-block details"><summary>자세히</summary> <div class="language-kotlin line-numbers-mode"><pre class="language-kotlin"><code><span class="token keyword">fun</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// Closeable을 구현체들은 inline 확장함수인 use를 사용할 수 있다.</span>
  <span class="token comment">// use 인라이닝 함수는 내부적으로 자원 할당을 해제해주기 때문에 간편히 Closeable 구현체를 사용할 수 있다.</span>
  <span class="token function">BufferedReader</span><span class="token punctuation">(</span><span class="token function">FileReader</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
          <span class="token punctuation">.</span><span class="token function">use</span> <span class="token punctuation">{</span> <span class="token function">doRun</span><span class="token punctuation">(</span>it<span class="token punctuation">)</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">fun</span> <span class="token function">doRun</span><span class="token punctuation">(</span>bufferedReader<span class="token operator">:</span> BufferedReader<span class="token punctuation">)</span><span class="token operator">:</span> List<span class="token operator">&lt;</span>String<span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">listOf</span><span class="token punctuation">(</span>bufferedReader<span class="token punctuation">.</span><span class="token function">readLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div></details></details></details></details> <h3 id="인라인-함수의-non-local-return"><a href="#인라인-함수의-non-local-return" class="header-anchor">#</a> 인라인 함수의 non-local return</h3> <details class="custom-block details"><summary>자세히</summary> <div class="language-kotlin line-numbers-mode"><pre class="language-kotlin"><code><span class="token keyword">fun</span> <span class="token function">lookForAlice</span><span class="token punctuation">(</span>people<span class="token operator">:</span> List<span class="token operator">&lt;</span>Person2<span class="token operator">&gt;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 일반적인 for문에서는 발견즉시 for문을 종료하여 함수를 리턴할 수 있다.</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span>person <span class="token keyword">in</span> people<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>person<span class="token punctuation">.</span>name <span class="token operator">==</span> <span class="token string">&quot;Alice&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Found&quot;</span><span class="token punctuation">)</span>
      <span class="token keyword">return</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Alice is not found&quot;</span><span class="token punctuation">)</span>

  <span class="token comment">// 코틀린은 자바와 다르게 forEach에서도 for문과 같이 return이 가능해진다.</span>
  <span class="token comment">// 여기서 return은 lookForAlice 함수의 return이 된다.</span>
  <span class="token comment">// 이렇게 자신의 상위 스코프의 블록을 반환하게 만드는 것을 non-local return이라고 부른다.</span>
  <span class="token comment">// inline 함수가 되어 forEach 구문의 바이트코드가 실제 lookForAlice본문에 존재하게 되므로 이러한 동작이 가능하다.</span>
  people<span class="token punctuation">.</span><span class="token function">forEach</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>it<span class="token punctuation">.</span>name <span class="token operator">==</span> <span class="token string">&quot;Alice&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Found&quot;</span><span class="token punctuation">)</span>
      <span class="token keyword">return</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Alice is not found&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div></details> <h3 id="레이블을-활용한-로컬-return"><a href="#레이블을-활용한-로컬-return" class="header-anchor">#</a> 레이블을 활용한 로컬 return</h3> <details class="custom-block details"><summary>자세히</summary> <div class="language-kotlin line-numbers-mode"><pre class="language-kotlin"><code><span class="token keyword">fun</span> <span class="token function">lookForAlice2</span><span class="token punctuation">(</span>people<span class="token operator">:</span> List<span class="token operator">&lt;</span>Person2<span class="token operator">&gt;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 로컬 리턴은 for 루프의 break과 비슷한 역할을 수행해준다.</span>
  people<span class="token punctuation">.</span>forEach <span class="token label symbol">label@</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>it<span class="token punctuation">.</span>name <span class="token operator">===</span> <span class="token string">&quot;Alice&quot;</span><span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token label symbol">@label</span>
  <span class="token punctuation">}</span>
  <span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Alice might be somewhere&quot;</span><span class="token punctuation">)</span>

  people<span class="token punctuation">.</span><span class="token function">forEach</span> <span class="token punctuation">{</span>
    <span class="token comment">// 로컬 리턴을 함수 이름을 통해 할 수도 있다.</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>it<span class="token punctuation">.</span>name <span class="token operator">===</span> <span class="token string">&quot;Alice&quot;</span><span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token label symbol">@forEach</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><blockquote><p>람다식의 레이블을 명시하면 함수명을 활용할 수 없다. 그리고 람다 식에는 레이블이 2개 이상 붙을 수 없다.</p></blockquote> <div class="language-kotlin line-numbers-mode"><pre class="language-kotlin"><code><span class="token keyword">fun</span> <span class="token function">main2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 레이블은 this에도 적용된다.</span>
  <span class="token comment">// 레이블을 걸면 일반 this는 외부 참조를 가지게 될 것이다.</span>
  <span class="token function">StringBuffer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>apply <span class="token label symbol">sb@</span><span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token label symbol">@sb</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;Hello World&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><ul><li>local 반환문은 장황하고, 람다 안에 여러 위치에 return@label이 필요해지면 사용이 불편한다.</li> <li>그래서 코틀린은 코드 블록을 여기저기 전달하기 위한 다른 해법을 제공하며 그것이 바로 <code>익명 함수</code>이다.</li></ul> <h4 id="익명함수는-기본적으로-로컬-return이다"><a href="#익명함수는-기본적으로-로컬-return이다" class="header-anchor">#</a> 익명함수는 기본적으로 로컬 return이다.</h4> <div class="language-kotlin line-numbers-mode"><pre class="language-kotlin"><code><span class="token keyword">fun</span> <span class="token function">lookForAlice3</span><span class="token punctuation">(</span>people<span class="token operator">:</span> List<span class="token operator">&lt;</span>Person2<span class="token operator">&gt;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  people<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">fun</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// return은 익명 함수를 지칭한다.</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>person<span class="token punctuation">.</span>name <span class="token operator">==</span> <span class="token string">&quot;Alice&quot;</span><span class="token punctuation">)</span> <span class="token keyword">return</span>
    <span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;<span class="token interpolation"><span class="token delimiter variable">${</span>person<span class="token punctuation">.</span>name<span class="token delimiter variable">}</span></span> is not Alice&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token comment">// 반환 타입은 명시해줘야 한다.</span>
  people<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token keyword">fun</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span><span class="token operator">:</span> Boolean <span class="token punctuation">{</span> <span class="token keyword">return</span> person<span class="token punctuation">.</span>age <span class="token operator">&lt;</span> <span class="token number">30</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token comment">// 식이 본문인 함수를 활용하면 리턴타입이 및 명시적 리턴이 필요없다.</span>
  people<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token keyword">fun</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span> <span class="token operator">=</span> person<span class="token punctuation">.</span>age <span class="token operator">&lt;</span> <span class="token number">30</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><ul><li>익명함수는 일반 함수와 동일하나 함수 이름이나 파라미터 타입을 생략할 수 있는 차이일 뿐이다.</li></ul> <blockquote><p>람다 함수는 기본적으로 논로컬 리턴을 특징으로 하고 익명 함수는 로컬 리턴을 특징으로 한다.</p> <ul><li>람다는 label을 통해 로컬 리턴이 가능하지만 익명 함수는 논로컬 리턴이 불가능하다.</li> <li>익명 함수는 일반 함수와 같아보이지만 사실 람다 식의 문법적 편의일 뿐이다.<br>
:::</li></ul></blockquote> <h2 id="_9장-제네릭스"><a href="#_9장-제네릭스" class="header-anchor">#</a> 9장. 제네릭스</h2> <h3 id="제네릭-타입-파라미터"><a href="#제네릭-타입-파라미터" class="header-anchor">#</a> 제네릭 타입 파라미터</h3> <details class="custom-block details"><summary>자세히</summary> <ul><li><strong>자바와 다르게 코틀린은 raw 타입을 허용하지 않으므로 제네릭 타입의 타입인자를 컴파일러가 알 수 있게 해줘야 한다.</strong></li> <li>제네릭의 기본적인 특징은 자바랑 대부분 동일하다.</li></ul> <div class="language-kotlin line-numbers-mode"><pre class="language-kotlin"><code><span class="token comment">// 타입 파라미터에 여러 제약을 가할 수 있다.</span>
<span class="token comment">// T 타입은 반드시 CharSequence와 Appendable을 구현한 구현체여야 한다.</span>
<span class="token keyword">fun</span> <span class="token operator">&lt;</span>T<span class="token operator">&gt;</span> <span class="token function">ensureTrailingRerioid</span><span class="token punctuation">(</span>seq<span class="token operator">:</span> T<span class="token punctuation">)</span>
        <span class="token keyword">where</span> T <span class="token operator">:</span> CharSequence<span class="token punctuation">,</span> T <span class="token operator">:</span> Appendable <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>seq<span class="token punctuation">.</span><span class="token function">endsWith</span><span class="token punctuation">(</span><span class="token string">'.'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        seq<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'.'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 타입파라미터는 nullable하므로 null 불가능하게 막을 수 있다.</span>
<span class="token keyword">fun</span> <span class="token operator">&lt;</span>T <span class="token operator">:</span> Any<span class="token operator">&gt;</span> <span class="token function">test</span><span class="token punctuation">(</span>t<span class="token operator">:</span> T<span class="token punctuation">)</span><span class="token operator">:</span> Nothing <span class="token operator">=</span> <span class="token function">TODO</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div></details></details> <h3 id="런타임의-제네릭-타임-검사와-캐스트"><a href="#런타임의-제네릭-타임-검사와-캐스트" class="header-anchor">#</a> 런타임의 제네릭: 타임 검사와 캐스트</h3> <details class="custom-block details"><summary>자세히</summary> <ul><li>코틀린도 자바와 동일하게 런타임엔 타입 파라미터 정보는 제거된다..</li> <li>즉, 런타임에 타입 정보가 제거되므로 런타임에 제네릭 타입에 대한 검사는 불가능하다.</li> <li>예를들어 자바에선 타입을 검사할 때<code>stringList is List</code>와 같이 제네릭 타입을 제외하고 검사 하지만 <strong>코틀린은 제네릭 클래스에 반드시 제네릭 타입을 명시해야 한다.</strong></li> <li><code>stringList is List&lt;*&gt;</code>와 같이 star projection을 활용할 수 있으며 런타임에 타입 정보를 알수있도록 <strong>inline, reified</strong>를
활용하면 <code>stringList is List&lt;String&gt;</code>와 같이 타입 검사가 가능하다.</li></ul> <h4 id="실체화한-타입-파라미터를-사용한-함수-선언"><a href="#실체화한-타입-파라미터를-사용한-함수-선언" class="header-anchor">#</a> 실체화한 타입 파라미터를 사용한 함수 선언</h4> <ul><li>제네릭 클래스건 함수건 런타임엔 타입이 소거되어 확인이 불가능하지만, 인라인 함수의 타입 파라미터는 실체화시킬 수 있다.</li></ul> <div class="language-kotlin line-numbers-mode"><pre class="language-kotlin"><code><span class="token comment">// inline 함수와 reified를 활용하면 실체화된 타입으로 취급할 수 있다.</span>
<span class="token keyword">inline</span> <span class="token keyword">fun</span> <span class="token operator">&lt;</span><span class="token keyword">reified</span> T<span class="token operator">&gt;</span> <span class="token function">isA</span><span class="token punctuation">(</span>value<span class="token operator">:</span> Any<span class="token punctuation">)</span> <span class="token operator">=</span> value <span class="token keyword">is</span> T

<span class="token keyword">fun</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">println</span><span class="token punctuation">(</span>isA<span class="token operator">&lt;</span>String<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// false</span>
    <span class="token function">println</span><span class="token punctuation">(</span>isA<span class="token operator">&lt;</span>String<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// true</span>

    <span class="token comment">// 실체화된 타입을 활용할 수 있는 예(원하는 타입의 원소만 가져옴)</span>
    <span class="token keyword">val</span> items <span class="token operator">=</span> <span class="token function">listOf</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;2&quot;</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span>
    <span class="token function">println</span><span class="token punctuation">(</span>items<span class="token punctuation">.</span>filterIsInstance<span class="token operator">&lt;</span>Int<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h4 id="왜-인라인-함수에서만-실체화된-타입을-쓸-수-있을까"><a href="#왜-인라인-함수에서만-실체화된-타입을-쓸-수-있을까" class="header-anchor">#</a> 왜 인라인 함수에서만 실체화된 타입을 쓸 수 있을까?</h4> <ul><li>컴파일러는 인라인 함수의 바이트코드를 해당 함수를 호출한 모든 곳에 복사하여 삽입하는데 이 때 컴파일러는 실체화된 타입 인자를 통해 함수를 호출하는 곳에서의 정확한 타입을 알 수 있게 해준다.
<ul><li><strong>자바에서는 inline 함수도 보통의 함수처럼 호출하므로 reified를 사용하는 inline 함수를 호출할 수 없다.</strong></li></ul></li> <li>실체화한 타입 파라미터가 있는 함수는 타입 인자를 바이트코드에 넣기 위해 일반 함수보다 더 많은 작업 필요하고 이를 위해 반드시 inline이 가능해야 한다.</li></ul> <blockquote><p>인라인 함수는 함수를 함수 파라미터로 가지는 등 성능에 효율적일 때 사용할 수도 있지만 위와 같이 실체화한 타입을 사용하기 위해 사용할 수도 있다.</p></blockquote></details> <h3 id="실체화한-타입으로-클래스-참조를-대신하기"><a href="#실체화한-타입으로-클래스-참조를-대신하기" class="header-anchor">#</a> 실체화한 타입으로 클래스 참조를 대신하기</h3> <details class="custom-block details"><summary>자세히</summary> <div class="language-kotlin line-numbers-mode"><pre class="language-kotlin"><code><span class="token comment">// class에 대한 정보를 파라미터로 받음</span>
<span class="token keyword">fun</span> <span class="token operator">&lt;</span>T<span class="token operator">&gt;</span> <span class="token function">printClass</span><span class="token punctuation">(</span>clazz<span class="token operator">:</span> Class<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token function">println</span><span class="token punctuation">(</span>clazz<span class="token punctuation">)</span>

<span class="token comment">// 실체화를 통해 타입 정보를 타입 파라미터로 받아서 활용할 수 있음</span>
<span class="token keyword">inline</span> <span class="token keyword">fun</span> <span class="token operator">&lt;</span><span class="token keyword">reified</span> T<span class="token operator">&gt;</span> <span class="token function">printClassUsingReified</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token function">printClass</span><span class="token punctuation">(</span>T<span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">.</span>java<span class="token punctuation">)</span>

<span class="token keyword">fun</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">printClass</span><span class="token punctuation">(</span>Integer<span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">.</span>java<span class="token punctuation">)</span>
    printClassUsingReified<span class="token operator">&lt;</span>Integer<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><blockquote><p>실체화한 타입 파라미터는 타입 검사, 리플렉션 등으로 사용할 순 있지만 해당 인스턴스를 생성하거나, 동반 객체 메서드를 호출하는 등의 작업은 불가능하다.</p></blockquote></details> <h3 id="변성-variance-제네릭과-하위-타입"><a href="#변성-variance-제네릭과-하위-타입" class="header-anchor">#</a> 변성(variance): 제네릭과 하위 타입</h3> <ul><li>변성(공변성, 무공변성, 반공변성)은 제네릭 타입의 기저 타입은 동일하나 타입 파라미터가 다를 때 서로 어떤 관계를 가지는지에 대한 개념으로 제네릭을 제대로 활용하기 위해 꼭 필요한 개념이다.</li></ul> <h3 id="변성이-있는-이유-인자를-함수에-넘기기"><a href="#변성이-있는-이유-인자를-함수에-넘기기" class="header-anchor">#</a> 변성이 있는 이유: 인자를 함수에 넘기기</h3> <details class="custom-block details"><summary>자세히</summary> <div class="language-kotlin line-numbers-mode"><pre class="language-kotlin"><code><span class="token keyword">fun</span> <span class="token function">addContent</span><span class="token punctuation">(</span>list<span class="token operator">:</span> MutableList<span class="token operator">&lt;</span>Any<span class="token operator">&gt;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">fun</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">val</span> strings <span class="token operator">=</span> <span class="token function">mutableListOf</span><span class="token punctuation">(</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">)</span>
  <span class="token comment">// String은 Any의 하위타입이므로 List&lt;Any&gt;를 받는 함수 파라미터에 List&lt;String&gt;을 넘겨줄 수 있을거 같지만 </span>
  <span class="token comment">// 실제 addContent 함수에서 처럼 Integer 타입이 추가될 수 있어 런타임 에러가 발생하여 타입 안전성을 보장해줄 수 없어 컴파일이 불가능하다.</span>
  <span class="token function">addContent</span><span class="token punctuation">(</span>strings<span class="token punctuation">)</span>  <span class="token comment">// ## 컴파일 에러 ##</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><ul><li>strings가 addContent의 파라미터로 들어가기 위해선 일반적인 함수 호출 방식에 따라 <code>MutableList&lt;String&gt;이 MutableList&lt;Any&gt;의 하위 타입</code>이 되어야 한다.</li></ul> <blockquote><p>코틀린에서 T는 T?의 하위 타입이다. 즉 한 클래스에 두 가지타입(nullable type, not nullable type)이 존재한다.</p></blockquote></details> <h3 id="공변성-하위-타입-관계를-유지"><a href="#공변성-하위-타입-관계를-유지" class="header-anchor">#</a> 공변성: 하위 타입 관계를 유지</h3> <details class="custom-block details"><summary>자세히</summary> <ul><li>A가 B의 하위 타입일 때 Service&lt;A&gt;가 Service&lt;B&gt;의 하위 타입이라면 이는 공변성을 가진다.</li> <li><strong>제네릭은 기본적으로 무공변성을 지니기 때문에</strong> MutableList&lt;Any&gt;을 기대하는 곳에 MutableList&lt;String&gt;을 넣을 수 없다. (하위 타입이 아니기 때문에)</li> <li>하지만 코틀린은은 타입 파라미터에 <code>out</code>이라는 명령어를 통해 타입 파라미터가 공변성을 가지도록 할 수 있다.</li></ul> <div class="language-kotlin line-numbers-mode"><pre class="language-kotlin"><code><span class="token keyword">open</span> <span class="token keyword">class</span> Animal
<span class="token keyword">class</span> Cat <span class="token operator">:</span> <span class="token function">Animal</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">class</span> Dog <span class="token operator">:</span> <span class="token function">Animal</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">// out을 붙여 공변성을 지니게 하면 타입 안전성을 위해 해당 클래스는 타입 파라미터를 오직 out위치(생산)에 둘 수 있다.</span>
<span class="token keyword">class</span> Herd<span class="token operator">&lt;</span><span class="token keyword">out</span> T <span class="token operator">:</span> Animal<span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// T가 out 위치에 있으므로 가능. 해당 타입을 읽어 반환하는건 가능하다.</span>
  <span class="token keyword">fun</span> <span class="token function">getTypeParameter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> T <span class="token operator">=</span> <span class="token function">TODO</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

  <span class="token comment">// T가 in 위치에 있으므로 에러 발생. 소비(쓰기)는 불가능</span>
  <span class="token comment">// 공변성을 제공하게 되면 Herd&lt;T&gt;는 하위 타입인 Herd&lt;Dog&gt; or Herd&lt;Cat&gt;도 가능해진다. </span>
  <span class="token comment">// ## 만약 add 메서드를 사용할 수 있게 되면 Herd&lt;Cat&gt;인 인스턴스에서 add(t: Dog)가 호출될 수 있고 Dog는 Cat이 될 수 없어 런타임 에러를 발생시킬 수 있다. ## </span>
  <span class="token comment">// fun add(t: T) = TODO()</span>
<span class="token punctuation">}</span>

<span class="token comment">// Head&lt;Dog&gt; or Herd&lt;Cat&gt;이 오더라도 Head&lt;&gt;엔 소비하는 코드가 없고 오직 생산하는 코드만 있으므로 문제가 되지 않는다.</span>
<span class="token comment">// - Dog이던 Cat이던 결군 상위 타입인 Animal이 될 수 있기 때문에 런타임 에러를 유발하지 않는다.</span>
<span class="token keyword">fun</span> <span class="token function">feedAll</span><span class="token punctuation">(</span>animalHerd<span class="token operator">:</span> Herd<span class="token operator">&lt;</span>Animal<span class="token operator">&gt;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span>animal <span class="token keyword">in</span> animalHerd<span class="token punctuation">.</span>animals<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">TODO</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">fun</span> <span class="token function">catTest</span><span class="token punctuation">(</span>catHerd<span class="token operator">:</span> Herd<span class="token operator">&lt;</span>Cat<span class="token operator">&gt;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// out을 지정해 공변성을 가지도록 하였으므로 Herd&lt;Cat&gt;은 Herd&lt;Animal&gt;의 하위 타입이 되어 호출이 가능하다.</span>
    <span class="token function">feedAll</span><span class="token punctuation">(</span>catHerd<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><ul><li>out 키워드를 붙이면 <strong>공변성</strong>은 제공해주나 이를 보장하기 위해 <strong>내부에서 타입 파라미터를를 소비하는건 불가능하다.</strong></li> <li>List는 읽기 전용이므로 내부에서 요소를 소비할 일이 없기 때문에 out을 붙여 공변성을 보장해주도록 했다. 그래서 <strong>MutableList&lt;&gt;와 달리 List&lt;&gt;는 공변성을 제공한다.</strong></li></ul> <blockquote><p>변성(variance)은 코드에서 위험할 여지가 있는 함수를 호출하지 못하게 만들어 제네릭 타입의 안전성을 제공한다.</p> <ul><li>out 키워드는 내부에서 소비를 막아 공변성을 제공하더라도 제네릭 타입을 안전하게 사용할 수 있음을 보장한다.</li></ul></blockquote></details> <h3 id="반공변성-뒤집힌-하위-타입-관계"><a href="#반공변성-뒤집힌-하위-타입-관계" class="header-anchor">#</a> 반공변성: 뒤집힌 하위 타입 관계</h3> <details class="custom-block details"><summary>자세히</summary> <div class="language-kotlin line-numbers-mode"><pre class="language-kotlin"><code><span class="token keyword">interface</span> Comparator<span class="token operator">&lt;</span><span class="token keyword">in</span> T<span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">/**
   * - 반공변하므로 Comparator&lt;String&gt;를 파라미터로 가지는 메서드에 Comparator&lt;Any&gt;가 전달될 수 있고 compare 메서드에 String 타입이 전달될 것이다.
   * - String은 Any의 하위타입이므로 compare(e1: Any, e2: Any)에 String이 타입이 전달되어 사용이 가능하다.
   */</span>
  <span class="token keyword">fun</span> <span class="token function">compare</span><span class="token punctuation">(</span>e1<span class="token operator">:</span> T<span class="token punctuation">,</span> e2<span class="token operator">:</span> T<span class="token punctuation">)</span><span class="token operator">:</span> Int

  <span class="token comment">/** T가 out 위치에 있으므로 컴파일 에러가 발생한다.
   *  - 현재 Comparator는 반공변성을 제공하므로 Comparator&lt;Any&gt;는 Comparator&lt;String&gt;의 하위 타입이 되어 Comparator&lt;String&gt;를 파라미터로 가지는 메서드에 Comparator&lt;Any&gt;를 전달할 수 있다.
   *  - 만약 해당 메서드에서 Comparator&lt;Any&gt;가 전달되었는데 get()을 호출하게 되면 String인 T가 반환되어야 한다. 하지만 실제론 Any이기 때문에 하위 타입인 String으로 반환이 불가능하다.
   */</span>
  <span class="token comment">// fun get(): T</span>
<span class="token punctuation">}</span>


<span class="token keyword">class</span> StringComparator<span class="token operator">:</span> Comparator<span class="token operator">&lt;</span>String<span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">compare</span><span class="token punctuation">(</span>e1<span class="token operator">:</span> String<span class="token punctuation">,</span> e2<span class="token operator">:</span> String<span class="token punctuation">)</span><span class="token operator">:</span> Int <span class="token punctuation">{</span>
    <span class="token function">TODO</span><span class="token punctuation">(</span><span class="token string">&quot;Not yet implemented&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> AnyComparator<span class="token operator">:</span> Comparator<span class="token operator">&lt;</span>Any<span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">compare</span><span class="token punctuation">(</span>e1<span class="token operator">:</span> Any<span class="token punctuation">,</span> e2<span class="token operator">:</span> Any<span class="token punctuation">)</span><span class="token operator">:</span> Int <span class="token punctuation">{</span>
    <span class="token function">TODO</span><span class="token punctuation">(</span><span class="token string">&quot;Not yet implemented&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// Comparator&lt;String&gt;를 파라미터로 가지지만 반공변성을 가지므로 Comparator&lt;Any&gt;가 올 수 있다.</span>
<span class="token keyword">fun</span> <span class="token function">test</span><span class="token punctuation">(</span>comparator<span class="token operator">:</span> Comparator<span class="token operator">&lt;</span>String<span class="token operator">&gt;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  comparator<span class="token punctuation">.</span><span class="token function">compare</span><span class="token punctuation">(</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;2&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">fun</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">val</span> stringComparator <span class="token operator">=</span> <span class="token function">StringComparator</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token function">test</span><span class="token punctuation">(</span>stringComparator<span class="token punctuation">)</span>

  <span class="token comment">// Comparator는 반공변성을 가지므로 Comparator&lt;Any&gt;는 Comparator&lt;String&gt;의 하위타입이 되어 test 메서드를 호출할 수 있다.</span>
  <span class="token keyword">val</span> anyComparator <span class="token operator">=</span> <span class="token function">AnyComparator</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token function">test</span><span class="token punctuation">(</span>anyComparator<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br></div></div><ul><li>반공변성은 공변성의 반대이다. 반공변성을 가지는 클래스는 위와 같이 타입 값을 소비하는 것만 가능하다.</li> <li><strong>Service&lt;A&gt;가 Service&lt;B&gt;의 하위 타입일 때 A가 B의 상위 타입이라면 Service&lt;T&gt;는 타입T에 반공변하다.</strong></li> <li>in 키워드를 붙이면 반공변을 제공할 수 있고 이를 보장하기 위해 해당 클래스에선 소비만 가능하다.(in 위치에만 사용 가능)</li></ul> <div class="language-kotlin line-numbers-mode"><pre class="language-kotlin"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> Function1<span class="token operator">&lt;</span><span class="token keyword">in</span> P1<span class="token punctuation">,</span> <span class="token keyword">out</span> R<span class="token operator">&gt;</span> <span class="token operator">:</span> Function<span class="token operator">&lt;</span>R<span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">operator</span> <span class="token keyword">fun</span> <span class="token function">invoke</span><span class="token punctuation">(</span>p1<span class="token operator">:</span> P1<span class="token punctuation">)</span><span class="token operator">:</span> R
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ul><li>Function1 인터페이스를 보면 in, out을 모두 가질 수 있는 것을 알 수 있다.</li></ul></details> <h3 id="사용-지점-변성-타입이-언급되는-지점에서-변성-지정"><a href="#사용-지점-변성-타입이-언급되는-지점에서-변성-지정" class="header-anchor">#</a> 사용 지점 변성: 타입이 언급되는 지점에서 변성 지정</h3> <details class="custom-block details"><summary>자세히</summary> <ul><li>위에서 사용한 out, in 방식은 <strong>선언 지점 변성</strong>이라고 하며 클래스 선언 시 변성을 지정하면 모든 장소에 영향을 끼치므로 편리하다.</li> <li>하지만 자바에서는 제네릭 클래스를 사용할 때마다 필요하다면 와일드 카드를 통해 직접 변성을 정의해야 하며 이를 <strong>사용 지점 변성</strong>이라고 한다.</li></ul> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Stream</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">extends</span> <span class="token class-name">BaseStream</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">,</span> <span class="token class-name">Stream</span><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
    <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">R</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">Stream</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">R</span><span class="token punctuation">&gt;</span></span> <span class="token function">map</span><span class="token punctuation">(</span><span class="token class-name">Function</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">super</span> <span class="token class-name">T</span><span class="token punctuation">,</span> <span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">R</span><span class="token punctuation">&gt;</span></span> mapper<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ul><li>자바는 사용 지점 변성이기 때문에 위와 같이 Function을 사용하는 모든곳에서 직접 변성을 지정해야 한다.</li></ul> <div class="language-kotlin line-numbers-mode"><pre class="language-kotlin"><code><span class="token comment">// 코틀린도 사용 지점 변성을 지원한다. 만약 클래스 에서 이미 변성이 지정되어 있다면 따로 사용 지점 변성을 하지 않아도 된다.</span>
<span class="token comment">// 사용 지점 변성은 자바와 동일하기 떄문에 out T -&gt; ? extends T, in T -&gt; ? super T와 동일하다.</span>
<span class="token keyword">fun</span><span class="token operator">&lt;</span>T<span class="token operator">&gt;</span> <span class="token function">copyData</span><span class="token punctuation">(</span>source<span class="token operator">:</span> MutableList<span class="token operator">&lt;</span><span class="token keyword">out</span> T<span class="token operator">&gt;</span><span class="token punctuation">,</span>
                destination<span class="token operator">:</span> MutableList<span class="token operator">&lt;</span><span class="token keyword">in</span> T<span class="token operator">&gt;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span>item <span class="token keyword">in</span> source<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        destination<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div></details> <h3 id="스타-프로젝션-타입-대신"><a href="#스타-프로젝션-타입-대신" class="header-anchor">#</a> 스타 프로젝션: 타입 대신 *</h3> <details class="custom-block details"><summary>자세히</summary> <ul><li>자바의 와일드 카드와 동일하게 생각하면 된다.</li> <li>Service&lt;*&gt;는 사실 Service&lt;out Any?&gt;로 동작한다고 할 수 있다.</li> <li>*는 어떤 타입을 넣을 지 정확히 모르지만 제네릭 안전성을 위해선 오직 out만 가능할 것이다.</li></ul> <blockquote><p>스타 프로젝션은 자바 와일드 카드처럼 타입의 데이터를 읽기만하지만 어떤 타입인지 알 필요 없을 때 일반 제네릭 타입 파라미터보다 간결하게 사용할 수 있다.</p></blockquote></details> <h2 id="_10장-애노테이션과-리플렉션"><a href="#_10장-애노테이션과-리플렉션" class="header-anchor">#</a> 10장. 애노테이션과 리플렉션</h2> <ul><li>코틀린에서 애노테이션을 사용하는 문법은 자바와 똑같지만 선언할 때 사용하는 문법은 약간 다르다.</li> <li>리플렉션 API의 일반 구조도 자바와 같지만 세부 사항에서 약간 차이가 있다.</li></ul> <h3 id="애노테이션-선언과-적용"><a href="#애노테이션-선언과-적용" class="header-anchor">#</a> 애노테이션 선언과 적용</h3> <details class="custom-block details"><summary>자세히</summary> <ul><li>코틀린 애노테이션 인자를 지정하는 문법은 자바아 약간 다르다.
<ul><li>클래스를 애노테이션 인자로 지정 시 @Anno(MyClass::class)로 지정해야 함</li> <li>다른 애노테이션을 인자로 지정할 때 @는 제외시켜야 한다.</li> <li>배열을 인자로 지정하기 위해선 arrayOf를 사용해야 한다.
<ul><li>자바의 애노테이션 사용시 기본 value에 대해선 생략 가능</li></ul></li> <li>어떤 프로퍼티를 애노테이션의 인자에 넣기 위해선 const를 붙여줘야 한다.
<ul><li>애노테이션의 인자는 컴파일 시점에 알 수 있어야 하기 때문에 상수로 취급되어야 한다.</li></ul></li></ul></li></ul> <div class="language-kotlin line-numbers-mode"><pre class="language-kotlin"><code><span class="token keyword">class</span> HasTempFolder <span class="token punctuation">{</span>
    <span class="token comment">// 프로퍼티가 아닌 getter에 애노테이션을 명시하는 방법</span>
    <span class="token comment">// @property는 코틀린 프로퍼티 전체(getter, field 등등)에 적용될 수 있게 할 수 있다.</span>
    <span class="token annotation builtin">@get:MyAnno</span>
    <span class="token keyword">val</span> folder <span class="token operator">=</span> <span class="token function">Any</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// 애노테이션은 메타데이터이기 때문에 내부에 코드를 가질 수 없다. 그러므로 코틀린 애노테이션은 본문을 가질 수 없다.</span>
<span class="token comment">// 프로퍼티는 오직 주 생성자로 정의한다.</span>
<span class="token keyword">annotation</span> <span class="token keyword">class</span> MyAnno
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div></details> <h3 id="자바-api를-애노테이션으로-제어"><a href="#자바-api를-애노테이션으로-제어" class="header-anchor">#</a> 자바 API를 애노테이션으로 제어</h3> <ul><li>@JvmName, @JvmStatic, @JvmOverloads, @JvmField등 애노테이션으로 자바 언어를 대신할 수 있는 애노테이션들을 제공한다.</li></ul> <h3 id="리플렉션"><a href="#리플렉션" class="header-anchor">#</a> 리플렉션</h3> <ul><li>코틀린 리플렉션을 사용하기 위해 <strong>자바가 제공하는 표준 리플렉션과</strong>, <strong>코틀린이 제공하는 코틀린 리플렉션 API</strong>를 사용할 수 있어야 한다.</li> <li>자바 리플렉션에서 기본적인건 제공하지만 코틀린만의 특성을 지닌 Nullable 타입, 코틀린 고유개념에 대해선 코틀린 API가 필요하다.</li></ul> <h3 id="코틀린-리플렉션-api-kclass-kcallable-kfunction-kproperty"><a href="#코틀린-리플렉션-api-kclass-kcallable-kfunction-kproperty" class="header-anchor">#</a> 코틀린 리플렉션 API: KClass, KCallable, KFunction, KProperty</h3> <details class="custom-block details"><summary>자세히</summary> <div class="language-kotlin line-numbers-mode"><pre class="language-kotlin"><code><span class="token keyword">class</span> <span class="token function">Person2</span><span class="token punctuation">(</span><span class="token keyword">val</span> name<span class="token operator">:</span> String<span class="token punctuation">,</span> <span class="token keyword">val</span> age<span class="token operator">:</span> Int<span class="token punctuation">)</span>

<span class="token keyword">fun</span> <span class="token function">foo</span><span class="token punctuation">(</span>x<span class="token operator">:</span> Int<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token function">println</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span>
<span class="token keyword">fun</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">val</span> kClass<span class="token operator">:</span> KClass<span class="token operator">&lt;</span>Person2<span class="token operator">&gt;</span> <span class="token operator">=</span> Person2<span class="token operator">::</span><span class="token keyword">class</span>
    <span class="token comment">// 비확장 프로퍼티만</span>
    kClass<span class="token punctuation">.</span>memberProperties<span class="token punctuation">.</span><span class="token function">forEach</span> <span class="token punctuation">{</span> <span class="token function">println</span><span class="token punctuation">(</span>it<span class="token punctuation">.</span>name<span class="token punctuation">)</span> <span class="token punctuation">}</span>

    <span class="token comment">// 모든 프로퍼티</span>
    <span class="token comment">// KCallable은 함수와 프로퍼티를 아우르는 상위 인터페이스로 call 메서드가 들어있고 call 메서드로 함수나 프로퍼티(getter)를 호출할 수 있다.</span>
    <span class="token keyword">val</span> members<span class="token operator">:</span> Collection<span class="token operator">&lt;</span>KCallable<span class="token operator">&lt;</span><span class="token operator">*</span><span class="token operator">&gt;</span><span class="token operator">&gt;</span> <span class="token operator">=</span> kClass<span class="token punctuation">.</span>members
    members<span class="token punctuation">.</span><span class="token function">forEach</span> <span class="token punctuation">{</span> <span class="token function">println</span><span class="token punctuation">(</span>it<span class="token punctuation">.</span>name<span class="token punctuation">)</span> <span class="token punctuation">}</span>

    <span class="token comment">// KFunction은 KCallable을 구현하므로 call 호출 가능</span>
    <span class="token keyword">val</span> kFunction <span class="token operator">=</span> <span class="token operator">::</span>foo
    kFunction<span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><div class="language-kotlin line-numbers-mode"><pre class="language-kotlin"><code><span class="token keyword">var</span> counter <span class="token operator">=</span> <span class="token number">0</span>
<span class="token keyword">fun</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 최상위 프로퍼티는 Property0이다. 이 프로퍼티는 인자 없이 get을 호출한다.</span>
    <span class="token keyword">val</span> kProperty<span class="token operator">:</span> KMutableProperty0<span class="token operator">&lt;</span>Int<span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token operator">::</span>counter
    kProperty<span class="token punctuation">.</span>setter<span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>
    Assert<span class="token punctuation">.</span><span class="token function">isTrue</span><span class="token punctuation">(</span>kProperty<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">10</span><span class="token punctuation">)</span>

    <span class="token keyword">val</span> person <span class="token operator">=</span> <span class="token function">Person2</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
    <span class="token comment">// 객체의 프로퍼티는 Property1로 get호출 시 객체를 넘겨주면 된다.</span>
    <span class="token keyword">val</span> ageProperty1<span class="token operator">:</span> KProperty1<span class="token operator">&lt;</span>Person2<span class="token punctuation">,</span> Int<span class="token operator">&gt;</span> <span class="token operator">=</span> Person2<span class="token operator">::</span>age
    Assert<span class="token punctuation">.</span><span class="token function">isTrue</span><span class="token punctuation">(</span>ageProperty1<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h4 id="kfunctionn-인터페이스는-언제-어떻게-정의될까"><a href="#kfunctionn-인터페이스는-언제-어떻게-정의될까" class="header-anchor">#</a> KFunctionN 인터페이스는 언제 어떻게 정의될까?</h4> <ul><li>KFunction들은 컴파일러가 생성한 합성 타입이기 때문에 정의를 찾을 수 없다.(실제 해당 구현체를 조회할 수 없음)</li> <li><strong>코틀린은 컴파일러가 자동으로 생성하는 방식을 활용하기 때문에 원하는 수만큼 많은 파라미터를 갖는 함수에 대한 인터페이스를 사용할 수 있는 것이다.</strong></li></ul> <h4 id="kclass-얻기"><a href="#kclass-얻기" class="header-anchor">#</a> KClass 얻기</h4> <ul><li>컴파일 시점에 정확히 대상을 알고 있다면 ClassName::class로 얻을 수 있다.</li> <li>만약 런타임에 동적으로 얻길 원한다면 object.javaClass.kotlin을 사용한다.</li></ul></details> <h2 id="_11장-dsl-만들기"><a href="#_11장-dsl-만들기" class="header-anchor">#</a> 11장. DSL 만들기</h2> <h3 id="api에서-dsl로"><a href="#api에서-dsl로" class="header-anchor">#</a> API에서 DSL로</h3> <details class="custom-block details"><summary>자세히</summary> <ul><li>개발자의 궁극적인 목표는 코드의 가독성과 유지 보수성을 가장 좋게 유지하는 것이다.</li> <li>깔끔한 API는 클래스와 메서드 명으로 어떤 일을 수행하는지 명확히 알 수 있고 간결한 코드를 제공한다.</li> <li>코틀린이 제공하는 확장 함수, 중위 함수, 연산자 오버로딩 등등의 다양한 기능은 깔끔한 API를 작성하는데 많은 도움을 준다.</li> <li>코틀린의 기능을 잘 활용하면 깔끔한 API에서 더 나아가 DSL을 구축할 수 있다.</li></ul></details> <h3 id="domain-specific-language"><a href="#domain-specific-language" class="header-anchor">#</a> Domain-Specific Language</h3> <details class="custom-block details"><summary>자세히</summary> <ul><li>특정 도메인 영역에 특화된 언어들 중 가장 대표적인건 SQL, 정규식이 존재한다.
<ul><li>SQL은 데이터베이스 조작, 정규식은 문자열 조작에 가장 적합하며 그 이외엔 거의 사용되지 않는다.</li></ul></li> <li>이 둘은 자신들만의 규칙을 통해 범용 프로그래밍 언어에 비해 훨씬 더 깔끔하게 원하는 연산을 수행할 수 있다.</li> <li>범용 프로그래밍 언어는 보통 <strong>명령적</strong>특징을 가지지만, DSL은 <strong>선언적</strong>특징을 가진다.
<ul><li>명령적 언어는 원하는 연산을 위해 각 순서를 정확히 기술하지만, 선언적 언어는 원하는 결과만을 기술하고 세부적인건 내부 구현에 맡긴다.</li></ul></li> <li>DSL이 가지는 단점은 자기만의 고유한 문법이 있어 다른 언어와의 통합이 어렵고 DSL 문법을 따로 습득해야 하므로 개발비용이 높다.
<ul><li>이러한 단점을 해결하기 위해 내부 DSL이 많이 활용된다.</li></ul></li></ul></details> <h3 id="내부-dsl"><a href="#내부-dsl" class="header-anchor">#</a> 내부 DSL</h3> <ul><li>내부 DSL은 범용 언어로 작성된 프로그램의 일부로, 범용 언어와 동일한 문법을 사용하여 DSL의 장점을 유지한채 단점을 해결할 수 있다.</li></ul> <h3 id="dsl의-구조"><a href="#dsl의-구조" class="header-anchor">#</a> DSL의 구조</h3> <details class="custom-block details"><summary>자세히</summary> <ul><li>DSL과 일반 API를 명확히 구분하긴 어렵지만 DSL이 고유하게 가지는 특징은 자신만의 구조와 문법을 가지는 것이다.</li> <li>일반 라이브러리 API는 어떤 메서드를 호출하면 다른 호출과는 아무런 연결성이 존재하지 않는다.</li> <li>반면 DSL은 메서드 호출 시 정해진 DSL 문법에 의해서 구조화 된다.
<ul><li>코틀린에서는 람다를 중첩시키거나, 메서드 호출을 연쇄시키는 방법으로 DSL 구조를 만들 수 있다.</li></ul></li></ul></details> <h3 id="구조화된-api-구축으로-dsl-만들기"><a href="#구조화된-api-구축으로-dsl-만들기" class="header-anchor">#</a> 구조화된 API 구축으로 DSL 만들기</h3> <details class="custom-block details"><summary>자세히</summary> <ul><li>코틀린의 확장함수의 특징과 수신 객체 지정 람다를 통해 구조화된 API를 손쉽게 만들 수 있다.</li></ul> <div class="language-kotlin line-numbers-mode"><pre class="language-kotlin"><code><span class="token comment">// 파라미터를 일반 람다로 정의</span>
<span class="token keyword">fun</span> <span class="token function">myBuildString</span><span class="token punctuation">(</span>
        buildAction<span class="token operator">:</span> <span class="token punctuation">(</span>StringBuilder<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> Unit
<span class="token punctuation">)</span><span class="token operator">:</span> String <span class="token punctuation">{</span>
    <span class="token keyword">val</span> sb <span class="token operator">=</span> <span class="token function">StringBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token function">buildAction</span><span class="token punctuation">(</span>sb<span class="token punctuation">)</span>
    <span class="token keyword">return</span> sb<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// 파라미터를 확장 함수 타입의 람다로 정의(수신 객체 지정 람다)</span>
<span class="token keyword">fun</span> <span class="token function">myBuildString2</span><span class="token punctuation">(</span>
        buildAction<span class="token operator">:</span> StringBuilder<span class="token punctuation">.</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> Unit
<span class="token punctuation">)</span><span class="token operator">:</span> String <span class="token punctuation">{</span>
    <span class="token keyword">val</span> sb <span class="token operator">=</span> <span class="token function">StringBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    sb<span class="token punctuation">.</span><span class="token function">buildAction</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> sb<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// 실제 코틀린에 구현된 방식. apply를 활용하여 더 간다히 정의할 수 있다.</span>
<span class="token keyword">fun</span> <span class="token function">buildStringByKotlinLib</span> <span class="token punctuation">(</span>
        buildAction<span class="token operator">:</span> StringBuilder<span class="token punctuation">.</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> Unit
<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token function">StringBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">apply</span> <span class="token punctuation">{</span> buildAction <span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">// with를 활용할 수도 있다.</span>
<span class="token keyword">fun</span> <span class="token function">buildStringUsingWith</span><span class="token punctuation">(</span>
        buildAction<span class="token operator">:</span> StringBuilder<span class="token punctuation">.</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> Unit
<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token function">with</span><span class="token punctuation">(</span><span class="token function">StringBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> buildAction<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">fun</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 일반 람다이므로 it을 명시적으로 붙여줘야 한다.</span>
    myBuildString <span class="token punctuation">{</span>
        it<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;hello&quot;</span><span class="token punctuation">)</span>
        it<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;world&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 수신 객체 지정 람다이므로 this가 자동적으로 바인딩되므로 it을 생략하여도 된다.</span>
    myBuildString2 <span class="token punctuation">{</span>
        <span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;hello&quot;</span><span class="token punctuation">)</span>
        <span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;world&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br></div></div></details> <h3 id="kotlinx-사용해보기"><a href="#kotlinx-사용해보기" class="header-anchor">#</a> kotlinx 사용해보기</h3> <details class="custom-block details"><summary>자세히</summary> <div class="language-kotlin line-numbers-mode"><pre class="language-kotlin"><code><span class="token keyword">fun</span> <span class="token function">buildDropdown</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token function">createHTML</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">div</span><span class="token punctuation">(</span>classes <span class="token operator">=</span> <span class="token string">&quot;dropdown&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">button</span><span class="token punctuation">(</span>classes <span class="token operator">=</span> <span class="token string">&quot;btn dropdown-toggle&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token operator">+</span><span class="token string">&quot;Dropdown&quot;</span>
                <span class="token function">span</span><span class="token punctuation">(</span>classes <span class="token operator">=</span> <span class="token string">&quot;caret&quot;</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
            <span class="token function">ul</span><span class="token punctuation">(</span>classes <span class="token operator">=</span> <span class="token string">&quot;dropdown-menu&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                li <span class="token punctuation">{</span> <span class="token function">a</span><span class="token punctuation">(</span><span class="token string">&quot;#&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token operator">+</span><span class="token string">&quot;Action&quot;</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span>
                li <span class="token punctuation">{</span> <span class="token function">a</span><span class="token punctuation">(</span><span class="token string">&quot;#&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token operator">+</span><span class="token string">&quot;Another action&quot;</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span>
                li <span class="token punctuation">{</span> role <span class="token operator">=</span> <span class="token string">&quot;separator&quot;</span><span class="token punctuation">;</span> classes <span class="token operator">=</span> <span class="token function">setOf</span><span class="token punctuation">(</span><span class="token string">&quot;divider&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">}</span>
                li <span class="token punctuation">{</span> classes <span class="token operator">=</span> <span class="token function">setOf</span><span class="token punctuation">(</span><span class="token string">&quot;dropdown-header&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">+</span><span class="token string">&quot;Header&quot;</span> <span class="token punctuation">}</span>
                li <span class="token punctuation">{</span> <span class="token function">a</span><span class="token punctuation">(</span><span class="token string">&quot;#&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token operator">+</span><span class="token string">&quot;Separated Link&quot;</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>


<span class="token keyword">fun</span> <span class="token function">buildDropdown2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token function">createHTML</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">div</span><span class="token punctuation">(</span>classes <span class="token operator">=</span> <span class="token string">&quot;dropdown&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">button</span><span class="token punctuation">(</span>classes <span class="token operator">=</span> <span class="token string">&quot;btn dropdown-toggle&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token operator">+</span><span class="token string">&quot;Dropdown&quot;</span>
                <span class="token function">span</span><span class="token punctuation">(</span>classes <span class="token operator">=</span> <span class="token string">&quot;caret&quot;</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
            <span class="token comment">// 코틀린 언어로 구현되었기 때문에 커스텀하게 tag를 만들 수 있다.</span>
            dropdownMenu <span class="token punctuation">{</span>
                <span class="token function">item</span><span class="token punctuation">(</span><span class="token string">&quot;#&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Action&quot;</span><span class="token punctuation">)</span>
                <span class="token function">item</span><span class="token punctuation">(</span><span class="token string">&quot;#&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Another action&quot;</span><span class="token punctuation">)</span>
                <span class="token function">divider</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token function">dropdownHeader</span><span class="token punctuation">(</span><span class="token string">&quot;Header&quot;</span><span class="token punctuation">)</span>
                <span class="token function">item</span><span class="token punctuation">(</span><span class="token string">&quot;#&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Separated Link&quot;</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>

<span class="token keyword">fun</span> UL<span class="token punctuation">.</span><span class="token function">item</span><span class="token punctuation">(</span>href<span class="token operator">:</span> String<span class="token punctuation">,</span> text<span class="token operator">:</span> String<span class="token punctuation">)</span> <span class="token operator">=</span> li <span class="token punctuation">{</span> <span class="token function">a</span><span class="token punctuation">(</span>href<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token operator">+</span>text <span class="token punctuation">}</span> <span class="token punctuation">}</span>
<span class="token keyword">fun</span> UL<span class="token punctuation">.</span><span class="token function">divider</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> li <span class="token punctuation">{</span> role <span class="token operator">=</span> <span class="token string">&quot;separator&quot;</span><span class="token punctuation">;</span> classes <span class="token operator">=</span> <span class="token function">setOf</span><span class="token punctuation">(</span><span class="token string">&quot;divider&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">}</span>
<span class="token keyword">fun</span> UL<span class="token punctuation">.</span><span class="token function">dropdownHeader</span><span class="token punctuation">(</span>text<span class="token operator">:</span> String<span class="token punctuation">)</span> <span class="token operator">=</span> li <span class="token punctuation">{</span> classes <span class="token operator">=</span> <span class="token function">setOf</span><span class="token punctuation">(</span><span class="token string">&quot;dropdown-header&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">+</span>text <span class="token punctuation">}</span>
<span class="token keyword">fun</span> DIV<span class="token punctuation">.</span><span class="token function">dropdownMenu</span><span class="token punctuation">(</span>action<span class="token operator">:</span> UL<span class="token punctuation">.</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> Unit<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token function">ul</span><span class="token punctuation">(</span>classes <span class="token operator">=</span> <span class="token string">&quot;dropdown-menu&quot;</span><span class="token punctuation">,</span> action<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br></div></div></details> <h3 id="invoke-관례"><a href="#invoke-관례" class="header-anchor">#</a> invoke 관례</h3> <details class="custom-block details"><summary>자세히</summary> <div class="language-kotlin line-numbers-mode"><pre class="language-kotlin"><code><span class="token keyword">class</span> <span class="token function">Greeter</span><span class="token punctuation">(</span><span class="token keyword">private</span> <span class="token keyword">val</span> greeting<span class="token operator">:</span> String<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">operator</span> <span class="token keyword">fun</span> <span class="token function">invoke</span><span class="token punctuation">(</span>name<span class="token operator">:</span> String<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;<span class="token interpolation variable">$greeting</span>, <span class="token interpolation variable">$name</span>!&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">fun</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">val</span> greeter <span class="token operator">=</span> <span class="token function">Greeter</span><span class="token punctuation">(</span><span class="token string">&quot;Hello&quot;</span><span class="token punctuation">)</span>
    <span class="token comment">// 관례로 인해 gretter.invoke(&quot;World&quot;)로 호출된다.</span>
    <span class="token function">greeter</span><span class="token punctuation">(</span><span class="token string">&quot;World&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><ul><li>인스턴스를 함수처럼 호출하면 invoke가 자동으로 호출된다.</li></ul> <h4 id="invoke-활용하기"><a href="#invoke-활용하기" class="header-anchor">#</a> invoke 활용하기</h4> <div class="language-kotlin line-numbers-mode"><pre class="language-kotlin"><code><span class="token keyword">class</span> DEPENDENCIES <span class="token punctuation">{</span>
    <span class="token keyword">fun</span> <span class="token function">compile</span><span class="token punctuation">(</span>text<span class="token operator">:</span> String<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">println</span><span class="token punctuation">(</span>text<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    
    <span class="token comment">// 자기자신을 호출할 때 스스로에 대한 람다를 받아 dsl 구문으로 받을 수 있다.</span>
    <span class="token keyword">operator</span> <span class="token keyword">fun</span> <span class="token function">invoke</span><span class="token punctuation">(</span>body<span class="token operator">:</span> DEPENDENCIES<span class="token punctuation">.</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> Unit<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">body</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">fun</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">val</span> dependencies <span class="token operator">=</span> <span class="token function">DEPENDENCIES</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token comment">// invoke를 활용하면 dsl형식과 일반 메서드 호출 형식을 모두 지원하도록 할 수 있다.</span>
    dependencies <span class="token punctuation">{</span>
        <span class="token function">compile</span><span class="token punctuation">(</span><span class="token string">&quot;org.springframework.boot:spring-boot-starter-web&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    dependencies<span class="token punctuation">.</span><span class="token function">compile</span><span class="token punctuation">(</span><span class="token string">&quot;org.springframework.boot:spring-boot-starter-web&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div></details> <h3 id="중위-함수-활용"><a href="#중위-함수-활용" class="header-anchor">#</a> 중위 함수 활용</h3> <details class="custom-block details"><summary>자세히</summary> <div class="language-kotlin line-numbers-mode"><pre class="language-kotlin"><code><span class="token keyword">interface</span> Matcher<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">fun</span> <span class="token function">test</span><span class="token punctuation">(</span>value<span class="token operator">:</span> T<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token function">startWith</span><span class="token punctuation">(</span><span class="token keyword">val</span> prefix<span class="token operator">:</span> String<span class="token punctuation">)</span> <span class="token operator">:</span> Matcher<span class="token operator">&lt;</span>String<span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">test</span><span class="token punctuation">(</span>value<span class="token operator">:</span> String<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>value<span class="token punctuation">.</span><span class="token function">startsWith</span><span class="token punctuation">(</span>prefix<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token function">AssertionError</span><span class="token punctuation">(</span><span class="token string">&quot;String <span class="token interpolation variable">$value</span> does not start with <span class="token interpolation variable">$prefix</span>&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 중위 함수를 정의</span>
<span class="token keyword">infix</span> <span class="token keyword">fun</span> <span class="token operator">&lt;</span>T<span class="token operator">&gt;</span> T<span class="token punctuation">.</span><span class="token function">should</span><span class="token punctuation">(</span>matcher<span class="token operator">:</span> Matcher<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span><span class="token punctuation">)</span> <span class="token operator">=</span> matcher<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>

<span class="token keyword">fun</span> <span class="token function">test1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// DSL을 활용하면 테스트 코드를 깔끔하게 유지시킬 수 있다.</span>
    <span class="token string">&quot;hello&quot;</span> should <span class="token function">startWith</span><span class="token punctuation">(</span><span class="token string">&quot;h&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>


<span class="token comment">// start는 단순히 dsl 문법을 위해 사용되는 것</span>
<span class="token keyword">object</span> start

<span class="token keyword">infix</span> <span class="token keyword">fun</span> String<span class="token punctuation">.</span><span class="token function">should</span><span class="token punctuation">(</span>x<span class="token operator">:</span> start<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token function">StartWrapper</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>

<span class="token keyword">class</span> <span class="token function">StartWrapper</span><span class="token punctuation">(</span><span class="token keyword">val</span> value<span class="token operator">:</span> String<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">infix</span> <span class="token keyword">fun</span> <span class="token function">with</span><span class="token punctuation">(</span>prefix<span class="token operator">:</span> String<span class="token punctuation">)</span> <span class="token operator">=</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>value<span class="token punctuation">.</span><span class="token function">startsWith</span><span class="token punctuation">(</span>prefix<span class="token punctuation">)</span><span class="token punctuation">)</span>
                Unit
            <span class="token keyword">else</span>
                <span class="token keyword">throw</span> <span class="token function">AssertionError</span><span class="token punctuation">(</span><span class="token string">&quot;String <span class="token interpolation variable">$value</span> does not start with <span class="token interpolation variable">$prefix</span>&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">fun</span> <span class="token function">test2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 중위 함수를 활용하면 이렇게도 가능</span>
    <span class="token string">&quot;hello&quot;</span> should start with <span class="token string">&quot;h&quot;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br></div></div></details> <h3 id="원시-타입에-확장-프로퍼티를-활용하여-날짜-처리를-간단히"><a href="#원시-타입에-확장-프로퍼티를-활용하여-날짜-처리를-간단히" class="header-anchor">#</a> 원시 타입에 확장 프로퍼티를 활용하여 날짜 처리를 간단히</h3> <details class="custom-block details"><summary>자세히</summary> <div class="language-kotlin line-numbers-mode"><pre class="language-kotlin"><code><span class="token comment">// 확장 프로퍼티는 백킹필드를 가질 수 없으므로 getter로 직접 명시하여야 한다.</span>
<span class="token keyword">val</span> Int<span class="token punctuation">.</span>days<span class="token operator">:</span> Period <span class="token keyword">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> Period<span class="token punctuation">.</span><span class="token function">ofDays</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>

<span class="token keyword">val</span> Period<span class="token punctuation">.</span>ago<span class="token operator">:</span> LocalDateTime <span class="token keyword">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> LocalDateTime<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token keyword">this</span>
<span class="token keyword">val</span> Period<span class="token punctuation">.</span>fromNow<span class="token operator">:</span> LocalDateTime <span class="token keyword">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> LocalDateTime<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token keyword">this</span>
<span class="token keyword">val</span> LocalDateTime<span class="token punctuation">.</span>toDate <span class="token keyword">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">toLocalDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">fun</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    Assert<span class="token punctuation">.</span><span class="token function">isTrue</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">.</span>days<span class="token punctuation">.</span>ago<span class="token punctuation">.</span>toDate <span class="token operator">==</span> LocalDateTime<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">minusDays</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toLocalDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    Assert<span class="token punctuation">.</span><span class="token function">isTrue</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">.</span>days<span class="token punctuation">.</span>fromNow<span class="token punctuation">.</span>toDate <span class="token operator">==</span> LocalDateTime<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">plusDays</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toLocalDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div></details> <h3 id="sql-dsl-만들기"><a href="#sql-dsl-만들기" class="header-anchor">#</a> SQL DSL 만들기</h3> <details class="custom-block details"><summary>자세히</summary> <div class="language-kotlin line-numbers-mode"><pre class="language-kotlin"><code><span class="token comment">// Table 내부에서 컬럼에 대한 기능을 확장하여 Table에서만 사용할 수 있도록 한다.(이런걸 멤버 확장이라고 한다)</span>
<span class="token keyword">open</span> <span class="token keyword">class</span> Table <span class="token punctuation">{</span>
    <span class="token keyword">fun</span> <span class="token function">integer</span><span class="token punctuation">(</span>name<span class="token operator">:</span> String<span class="token punctuation">)</span> <span class="token operator">=</span> Column<span class="token operator">&lt;</span>Int<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">fun</span> <span class="token function">varchar</span><span class="token punctuation">(</span>name<span class="token operator">:</span> String<span class="token punctuation">,</span> length<span class="token operator">:</span> Int<span class="token punctuation">)</span> <span class="token operator">=</span> Column<span class="token operator">&lt;</span>String<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    
    <span class="token keyword">fun</span> <span class="token operator">&lt;</span>T<span class="token operator">&gt;</span> Column<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span><span class="token punctuation">.</span><span class="token function">primaryKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> Column<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token function">TODO</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token comment">// 자동 증가는 int만 되도록 제한을 건다</span>
    <span class="token keyword">fun</span> Column<span class="token operator">&lt;</span>Int<span class="token operator">&gt;</span><span class="token punctuation">.</span><span class="token function">autoIncrement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> Column<span class="token operator">&lt;</span>Int<span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token function">TODO</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> Column<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span>

<span class="token comment">// Table에서 정의한 타입들을 활용하여 컬럼을 지정할 수 있다.</span>
<span class="token keyword">object</span> Item<span class="token operator">:</span> <span class="token function">Table</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">val</span> id <span class="token operator">=</span> <span class="token function">integer</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">primaryKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">autoIncrement</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">val</span> name <span class="token operator">=</span> <span class="token function">varchar</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">fun</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 컬럼에 필요한 함수들은 Table 내부에서 확장하여 사용하기 때문에 외부에선 호출을 불가능하게 캡슐화할 수 있다.</span>
    <span class="token comment">// Column&lt;Int&gt;().primaryKey()</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div></details> <blockquote><p>코틀린은 다양한 기능으로 내부 DSL을 제공해줄 수 있으면서, 코틀린은 정적 타입 언어이므로 코틀린으로 내부 DSL을 만들면 자동 완성 및 문법 안정성을 보장받으면서 DSL를 사용할 수 있다.</p></blockquote></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/blog/Java/whyCantCreateGenericsArray.html" class="prev">
        JAVA 제네릭 배열을 생성하지 못하는 이유
      </a></span> <span class="next"><a href="/blog/Network/HttpNetworkBasic.html">
        그림으로 배우는 Http Network Basic 정리
      </a>
      →
    </span></p></div> <div data-v-0eb52d94 data-v-fa8c0460></div></main></div><div class="global-ui"></div></div>
    <script src="/blog/assets/js/app.a19d2190.js" defer></script><script src="/blog/assets/js/18.5924265b.js" defer></script><script src="/blog/assets/js/2.a1252cbe.js" defer></script><script src="/blog/assets/js/3.d1125fe1.js" defer></script><script src="/blog/assets/js/1.f9d497c3.js" defer></script><script src="/blog/assets/js/41.7722e4ea.js" defer></script>
  </body>
</html>
